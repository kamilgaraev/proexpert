# üöÄ Frontend Integration Guide: Advanced Dashboard

## üìã –û–±–∑–æ—Ä

–ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ —Å –º–æ–¥—É–ª–µ–º "–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π –¥–∞—à–±–æ—Ä–¥".

**–î–∞—Ç–∞:** 4 –æ–∫—Ç—è–±—Ä—è 2025  
**–í–µ—Ä—Å–∏—è API:** 1.0.0  
**Base URL:** `/api/v1/admin/advanced-dashboard`

---

## üîê –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

### –¢—Ä–µ–±—É–µ–º—ã–µ Headers

**–í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –¥–æ–ª–∂–Ω—ã —Å–æ–¥–µ—Ä–∂–∞—Ç—å:**

```http
Authorization: Bearer {JWT_TOKEN}
X-Organization-ID: {ORGANIZATION_ID}
Content-Type: application/json
Accept: application/json
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –º–æ–¥—É–ª—è

**–ü–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –∞–∫—Ç–∏–≤–∞—Ü–∏—é:**

```http
GET /api/modules/advanced-dashboard/status

Response 200:
{
  "success": true,
  "data": {
    "is_active": true,
    "is_trial": false,
    "expires_at": null
  }
}

Response 403:
{
  "success": false,
  "message": "Module not active"
}
```

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
- –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ —Å—Ç–∞—Ç—É—Å –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- –ü–æ–∫–∞–∑—ã–≤–∞–π—Ç–µ –±–∞–Ω–Ω–µ—Ä –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –µ—Å–ª–∏ `is_active: false`
- –ü–æ–∫–∞–∑—ã–≤–∞–π—Ç–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ trial –µ—Å–ª–∏ `is_trial: true`

---

## üìä 1. –î–∞—à–±–æ—Ä–¥—ã (Dashboards)

### 1.1. –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –¥–∞—à–±–æ—Ä–¥–æ–≤

```http
GET /dashboards

Response 200:
{
  "success": true,
  "data": [
    {
      "id": 1,
      "name": "My Financial Dashboard",
      "slug": "my-financial-dashboard",
      "description": "Dashboard for financial analytics",
      "layout": {
        "lg": [{"i": "widget-1", "x": 0, "y": 0, "w": 6, "h": 4}]
      },
      "widgets": [
        {
          "id": "widget-1",
          "type": "cash-flow",
          "settings": {}
        }
      ],
      "filters": {
        "period": "30d",
        "project_ids": [1, 2, 3]
      },
      "is_shared": false,
      "visibility": "private",
      "is_default": true,
      "views_count": 42,
      "created_at": "2025-10-04T12:00:00Z"
    }
  ]
}
```

**UI —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
- –û—Ç–æ–±—Ä–∞–∂–∞–π—Ç–µ —Å–ø–∏—Å–æ–∫ –≤ sidebar –∏–ª–∏ dropdown
- –ü–æ–∫–∞–∑—ã–≤–∞–π—Ç–µ `is_default` –±–µ–π–¥–∂
- –°–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –ø–æ `is_default` ‚Üí `created_at`

---

### 1.2. –°–æ–∑–¥–∞—Ç—å –¥–∞—à–±–æ—Ä–¥

```http
POST /dashboards

Request:
{
  "name": "My Dashboard",
  "description": "Optional description",
  "visibility": "private",  // private | team | organization
  "layout": {},
  "widgets": []
}

Response 201:
{
  "success": true,
  "message": "Dashboard created successfully",
  "data": {
    "id": 2,
    "name": "My Dashboard",
    ...
  }
}

Error 403:
{
  "success": false,
  "message": "Dashboard limit exceeded (max 10 per user)"
}
```

**–õ–∏–º–∏—Ç—ã –º–æ–¥—É–ª—è:**
- –ú–∞–∫—Å–∏–º—É–º 10 –¥–∞—à–±–æ—Ä–¥–æ–≤ –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ª–∏–º–∏—Ç –ø–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º

---

### 1.3. –°–æ–∑–¥–∞—Ç—å –∏–∑ —à–∞–±–ª–æ–Ω–∞

```http
POST /dashboards/from-template

Request:
{
  "template": "finance",  // admin | finance | technical | hr
  "name": "My Finance Dashboard"  // optional
}

Response 201:
{
  "success": true,
  "message": "Dashboard created from template",
  "data": {
    "id": 3,
    "template": "finance",
    "widgets": [
      // –ü—Ä–µ–¥–∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –≤–∏–¥–∂–µ—Ç—ã
    ]
  }
}
```

**–î–æ—Å—Ç—É–ø–Ω—ã–µ —à–∞–±–ª–æ–Ω—ã:**

```http
GET /dashboards/templates

Response 200:
{
  "success": true,
  "data": [
    {
      "id": "admin",
      "name": "–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–π",
      "description": "–ö–æ–Ω—Ç—Ä–∞–∫—Ç—ã, –ø—Ä–æ–µ–∫—Ç—ã, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞",
      "preview_url": "/previews/admin.png",
      "widgets": [
        {"type": "contracts-stats"},
        {"type": "projects-overview"}
      ]
    },
    {
      "id": "finance",
      "name": "–§–∏–Ω–∞–Ω—Å–æ–≤—ã–π",
      "description": "Cash Flow, P&L, ROI",
      "widgets": [
        {"type": "cash-flow"},
        {"type": "profit-loss"}
      ]
    },
    {
      "id": "technical",
      "name": "–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π",
      "description": "–ó–∞–≥—Ä—É–∑–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤, –ø—Ä–æ–≥—Ä–µ—Å—Å",
      "widgets": [
        {"type": "resource-utilization"},
        {"type": "contract-forecast"}
      ]
    },
    {
      "id": "hr",
      "name": "HR",
      "description": "KPI, —Ç–æ–ø –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–∏",
      "widgets": [
        {"type": "top-performers"},
        {"type": "user-kpi"}
      ]
    }
  ]
}
```

**UI —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
- –ü–æ–∫–∞–∑—ã–≤–∞–π—Ç–µ preview –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —à–∞–±–ª–æ–Ω–∞
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–∞—Ä—Ç–æ—á–∫–∏ —Å –ø—Ä–µ–≤—å—é
- –û–ø—Ü–∏—è "–ü—É—Å—Ç–æ–π –¥–∞—à–±–æ—Ä–¥" + 4 —à–∞–±–ª–æ–Ω–∞

---

### 1.4. –û–±–Ω–æ–≤–∏—Ç—å –¥–∞—à–±–æ—Ä–¥

```http
PUT /dashboards/{id}

Request:
{
  "name": "Updated Name",
  "description": "Updated description",
  "visibility": "team"
}

Response 200:
{
  "success": true,
  "message": "Dashboard updated successfully",
  "data": {...}
}
```

---

### 1.5. –û–±–Ω–æ–≤–∏—Ç—å layout (drag-and-drop)

```http
PUT /dashboards/{id}/layout

Request:
{
  "layout": {
    "lg": [
      {"i": "widget-1", "x": 0, "y": 0, "w": 6, "h": 4},
      {"i": "widget-2", "x": 6, "y": 0, "w": 6, "h": 4}
    ],
    "md": [...],
    "sm": [...]
  }
}

Response 200:
{
  "success": true,
  "message": "Layout updated successfully"
}
```

**Layout —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:**
- `i` - ID –≤–∏–¥–∂–µ—Ç–∞ (string)
- `x` - –ø–æ–∑–∏—Ü–∏—è X –≤ —Å–µ—Ç–∫–µ (0-11)
- `y` - –ø–æ–∑–∏—Ü–∏—è Y
- `w` - —à–∏—Ä–∏–Ω–∞ (1-12)
- `h` - –≤—ã—Å–æ—Ç–∞ (1-N)

**UI –±–∏–±–ª–∏–æ—Ç–µ–∫–∏:**
- React: `react-grid-layout`
- Vue: `vue-grid-layout`
- Angular: `angular-gridster2`

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
- –°–æ—Ö—Ä–∞–Ω—è–π—Ç–µ layout –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏–∏ (debounce 500ms)
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–π—Ç–µ responsive (lg, md, sm)
- –ü–æ–∫–∞–∑—ã–≤–∞–π—Ç–µ "Saving..." –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä

---

### 1.6. –û–±–Ω–æ–≤–∏—Ç—å –≤–∏–¥–∂–µ—Ç—ã

```http
PUT /dashboards/{id}/widgets

Request:
{
  "widgets": [
    {
      "id": "widget-1",
      "type": "cash-flow",
      "settings": {
        "groupBy": "month",
        "chartType": "bar"
      }
    },
    {
      "id": "widget-2",
      "type": "profit-loss",
      "settings": {
        "showChart": true
      }
    }
  ]
}

Response 200:
{
  "success": true,
  "message": "Widgets updated successfully"
}
```

**–¢–∏–ø—ã –≤–∏–¥–∂–µ—Ç–æ–≤:**
- `cash-flow` - Cash Flow Chart
- `profit-loss` - P&L Widget
- `roi` - ROI Dashboard
- `revenue-forecast` - Revenue Forecast
- `receivables-payables` - –î–µ–±–∏—Ç–æ—Ä–∫–∞/–ö—Ä–µ–¥–∏—Ç–æ—Ä–∫–∞
- `contract-forecast` - –ü—Ä–æ–≥–Ω–æ–∑ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞
- `budget-risk` - –†–∏—Å–∫ –±—é–¥–∂–µ—Ç–∞
- `material-needs` - –ü–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤
- `top-performers` - –¢–æ–ø –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–∏
- `user-kpi` - KPI –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `resource-utilization` - –ó–∞–≥—Ä—É–∑–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤

---

### 1.7. –û–±–Ω–æ–≤–∏—Ç—å –≥–ª–æ–±–∞–ª—å–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã

```http
PUT /dashboards/{id}/filters

Request:
{
  "filters": {
    "period": "30d",           // 7d | 30d | 90d | custom
    "from": "2025-01-01",      // –µ—Å–ª–∏ custom
    "to": "2025-10-04",
    "project_ids": [1, 2, 3],
    "contract_ids": [5, 6]
  }
}

Response 200:
{
  "success": true,
  "message": "Filters updated successfully"
}
```

**UI —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
- Toolbar —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏ –≤–≤–µ—Ä—Ö—É –¥–∞—à–±–æ—Ä–¥–∞
- Period picker (7/30/90 –¥–Ω–µ–π + custom)
- Multi-select –¥–ª—è –ø—Ä–æ–µ–∫—Ç–æ–≤/–∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤
- Apply –∫–Ω–æ–ø–∫–∞ –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è
- –°–æ—Ö—Ä–∞–Ω—è–π—Ç–µ —Ñ–∏–ª—å—Ç—Ä—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

---

### 1.8. –†–∞—Å—à–∞—Ä–∏—Ç—å –¥–∞—à–±–æ—Ä–¥

```http
POST /dashboards/{id}/share

Request:
{
  "share_type": "team",        // team | organization
  "user_ids": [10, 20, 30]     // –¥–ª—è share_type=team
}

Response 200:
{
  "success": true,
  "message": "Dashboard shared successfully"
}
```

**UI flow:**
- –ö–Ω–æ–ø–∫–∞ "Share" –≤ header –¥–∞—à–±–æ—Ä–¥–∞
- Modal —Å –≤—ã–±–æ—Ä–æ–º share_type
- Multi-select –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –¥–ª—è team
- –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —Å–ø–∏—Å–æ–∫ —Ä–∞—Å—à–∞—Ä–µ–Ω–Ω—ã—Ö

```http
DELETE /dashboards/{id}/share

Response 200:
{
  "success": true,
  "message": "Dashboard unshared successfully"
}
```

---

### 1.9. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –¥–∞—à–±–æ—Ä–¥

```http
POST /dashboards/{id}/duplicate

Request:
{
  "name": "Copy of My Dashboard"  // optional
}

Response 201:
{
  "success": true,
  "message": "Dashboard duplicated successfully",
  "data": {
    "id": 5,
    "name": "Copy of My Dashboard"
  }
}
```

**UI:**
- Dropdown menu ‚Üí "Duplicate"
- –†–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ –Ω–æ–≤—ã–π –¥–∞—à–±–æ—Ä–¥ –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è

---

### 1.10. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–∞–∫ default

```http
POST /dashboards/{id}/make-default

Response 200:
{
  "success": true,
  "message": "Dashboard set as default successfully"
}
```

**UI:**
- Checkbox "Make default" –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö
- –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –∑–≤–µ–∑–¥–æ—á–∫—É ‚≠ê –Ω–∞ default –¥–∞—à–±–æ—Ä–¥–µ

---

### 1.11. –£–¥–∞–ª–∏—Ç—å –¥–∞—à–±–æ—Ä–¥

```http
DELETE /dashboards/{id}

Response 200:
{
  "success": true,
  "message": "Dashboard deleted successfully"
}

Error 400:
{
  "success": false,
  "message": "Cannot delete default dashboard"
}
```

**UI:**
- Confirmation modal –ø–µ—Ä–µ–¥ —É–¥–∞–ª–µ–Ω–∏–µ–º
- –ù–µ–ª—å–∑—è —É–¥–∞–ª–∏—Ç—å default (—Å–Ω–∞—á–∞–ª–∞ —Å–¥–µ–ª–∞—Ç—å –¥—Ä—É–≥–æ–π default)

---

## üí∞ 2. –§–∏–Ω–∞–Ω—Å–æ–≤–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞

### 2.1. Cash Flow

```http
GET /analytics/financial/cash-flow?from=2025-01-01&to=2025-10-04&groupBy=month

Query params:
- from: date (required)
- to: date (required)
- project_id: integer (optional)
- groupBy: day | week | month (default: month)

Response 200:
{
  "success": true,
  "data": {
    "period": {
      "from": "2025-01-01",
      "to": "2025-10-04"
    },
    "cash_flow": [
      {
        "period": "2025-01",
        "inflow": 1500000.00,
        "outflow": 800000.00,
        "net": 700000.00
      },
      {
        "period": "2025-02",
        "inflow": 2000000.00,
        "outflow": 1200000.00,
        "net": 800000.00
      }
    ],
    "summary": {
      "total_inflow": 3500000.00,
      "total_outflow": 2000000.00,
      "net_cash_flow": 1500000.00
    }
  }
}
```

**UI —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Bar Chart (2 series: inflow/outflow)
- –ò–ª–∏ Waterfall Chart –¥–ª—è net flow
- –ü–æ–∫–∞–∑—ã–≤–∞–π—Ç–µ summary cards –≤–≤–µ—Ä—Ö—É
- –§–æ—Ä–º–∞—Ç–∏—Ä—É–π—Ç–µ —á–∏—Å–ª–∞ —Å —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—è–º–∏ (1 500 000 ‚ÇΩ)

**Chart libraries:**
- Chart.js
- ApexCharts
- Recharts (React)
- ECharts

---

### 2.2. Profit & Loss (P&L)

```http
GET /analytics/financial/profit-loss?from=2025-01-01&to=2025-10-04

Query params:
- from: date (required)
- to: date (required)
- project_id: integer (optional)

Response 200:
{
  "success": true,
  "data": {
    "period": {...},
    "revenue": 5000000.00,
    "costs": 3000000.00,
    "gross_profit": 2000000.00,
    "expenses": 500000.00,
    "net_profit": 1500000.00,
    "profit_margin": 30.0,  // %
    "breakdown": {
      "by_project": [
        {
          "project_id": 1,
          "project_name": "Project Alpha",
          "revenue": 2000000,
          "costs": 1200000,
          "profit": 800000,
          "margin": 40.0
        }
      ]
    }
  }
}
```

**UI —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
- Waterfall Chart –¥–ª—è P&L —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
- Cards –¥–ª—è –∫–ª—é—á–µ–≤—ã—Ö –º–µ—Ç—Ä–∏–∫
- –¢–∞–±–ª–∏—Ü–∞ breakdown –ø–æ –ø—Ä–æ–µ–∫—Ç–∞–º
- Color coding: –ø—Ä–∏–±—ã–ª—å –∑–µ–ª–µ–Ω—ã–π, —É–±—ã—Ç–æ–∫ –∫—Ä–∞—Å–Ω—ã–π

---

### 2.3. ROI

```http
GET /analytics/financial/roi?project_id=5

Query params:
- project_id: integer (optional, –µ—Å–ª–∏ –Ω–µ—Ç - –≤—Å–µ –ø—Ä–æ–µ–∫—Ç—ã)

Response 200:
{
  "success": true,
  "data": {
    "roi": 45.5,  // %
    "total_revenue": 5000000.00,
    "total_costs": 3450000.00,
    "profit": 1550000.00,
    "projects": [
      {
        "project_id": 1,
        "project_name": "Project Alpha",
        "roi": 66.7,
        "revenue": 2000000,
        "costs": 1200000,
        "profit": 800000,
        "status": "high"  // high | medium | low
      }
    ]
  }
}
```

**UI —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
- Gauge chart –¥–ª—è –æ–±—â–µ–≥–æ ROI
- –¢–∞–±–ª–∏—Ü–∞ –ø—Ä–æ–µ–∫—Ç–æ–≤ —Å —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–æ–π
- Color coding: >30% green, 15-30% yellow, <15% red
- Sparklines –¥–ª—è —Ç—Ä–µ–Ω–¥–∞

---

### 2.4. Revenue Forecast

```http
GET /analytics/financial/revenue-forecast?months=6

Query params:
- months: integer (1-24, default: 6)

Response 200:
{
  "success": true,
  "data": {
    "forecast_months": 6,
    "current_revenue": 5000000.00,
    "forecast": [
      {
        "month": "2025-11",
        "expected_revenue": 5500000.00,
        "confidence": "high",  // high | medium | low
        "min_estimate": 5000000.00,
        "max_estimate": 6000000.00
      }
    ],
    "total_forecast": 35000000.00
  }
}
```

**UI —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
- Line Chart —Å confidence bands (min-max)
- –†–∞–∑–Ω—ã–µ —Ü–≤–µ—Ç–∞ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö confidence levels
- –ü–æ–∫–∞–∑—ã–≤–∞–π—Ç–µ historical + forecast
- –õ–µ–≥–µ–Ω–¥–∞ —Å –ø–æ—è—Å–Ω–µ–Ω–∏—è–º–∏

---

### 2.5. Receivables & Payables

```http
GET /analytics/financial/receivables-payables

Response 200:
{
  "success": true,
  "data": {
    "receivables": {
      "total": 2000000.00,
      "overdue": 500000.00,
      "current": 1500000.00,
      "aging": {
        "0-30": 1000000,
        "31-60": 400000,
        "61-90": 100000,
        "90+": 500000
      }
    },
    "payables": {
      "total": 1500000.00,
      "overdue": 200000.00,
      "current": 1300000.00,
      "aging": {...}
    },
    "net_position": 500000.00
  }
}
```

**UI —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
- –î–≤–µ –∫–æ–ª–æ–Ω–∫–∏: Receivables | Payables
- Pie chart –¥–ª—è aging breakdown
- –¢–∞–±–ª–∏—Ü–∞ —Å –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–µ–π
- Highlight overdue –∫—Ä–∞—Å–Ω—ã–º

---

## üîÆ 3. –ü—Ä–µ–¥–∏–∫—Ç–∏–≤–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞

### 3.1. Contract Forecast

```http
GET /analytics/predictive/contract-forecast?contract_id=10

Query params:
- contract_id: integer (required)

Response 200:
{
  "success": true,
  "data": {
    "contract_id": 10,
    "contract_name": "Contract ABC",
    "current_progress": 65.5,  // %
    "predicted_completion_date": "2025-12-15",
    "original_deadline": "2025-12-31",
    "days_remaining": 76,
    "days_ahead_behind": 16,  // –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–µ - –æ–ø–µ—Ä–µ–∂–µ–Ω–∏–µ
    "confidence": 0.85,  // 0-1
    "r_squared": 0.92,
    "risk_level": "low",  // low | medium | high
    "progress_history": [
      {"date": "2025-09-01", "progress": 45.0},
      {"date": "2025-10-01", "progress": 65.5}
    ],
    "forecast_chart": [
      {"date": "2025-10-04", "progress": 65.5},
      {"date": "2025-11-04", "progress": 80.0},
      {"date": "2025-12-15", "progress": 100.0}
    ]
  }
}
```

**UI —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
- Line chart: historical + forecast
- –ü–æ–∫–∞–∑—ã–≤–∞–π—Ç–µ confidence interval
- Card —Å predicted date vs deadline
- Color: green (–æ–ø–µ—Ä–µ–∂–µ–Ω–∏–µ), yellow (–≤ —Å—Ä–æ–∫), red (–∑–∞–¥–µ—Ä–∂–∫–∞)
- –ü–æ–∫–∞–∑—ã–≤–∞–π—Ç–µ R¬≤ –¥–ª—è –æ—Ü–µ–Ω–∫–∏ —Ç–æ—á–Ω–æ—Å—Ç–∏

---

### 3.2. Budget Risk

```http
GET /analytics/predictive/budget-risk?contract_id=10

Response 200:
{
  "success": true,
  "data": {
    "contract_id": 10,
    "budget_total": 10000000.00,
    "current_spent": 6500000.00,
    "predicted_total": 11500000.00,
    "overrun_amount": 1500000.00,
    "overrun_percentage": 15.0,
    "overrun_risk": "high",  // low | medium | high | critical
    "recommendations": [
      "–ü–µ—Ä–µ—Å–º–æ—Ç—Ä–µ—Ç—å –±—é–¥–∂–µ—Ç –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤",
      "–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ç—Ä—É–¥–æ–∑–∞—Ç—Ä–∞—Ç—ã"
    ],
    "spending_history": [
      {"month": "2025-09", "spent": 5000000},
      {"month": "2025-10", "spent": 6500000}
    ],
    "forecast_chart": [
      {"progress": 65, "spent": 6500000},
      {"progress": 100, "spent": 11500000}
    ]
  }
}
```

**UI —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
- Progress bar: spent/budget
- Gauge –¥–ª—è overrun risk
- Area chart: budget vs actual vs forecast
- Alert box —Å recommendations
- Color coding –ø–æ risk level

---

### 3.3. Material Needs

```http
GET /analytics/predictive/material-needs?months=3

Query params:
- months: integer (1-12, default: 3)

Response 200:
{
  "success": true,
  "data": {
    "forecast_months": 3,
    "materials": [
      {
        "material_id": 1,
        "material_name": "–¶–µ–º–µ–Ω—Ç –ú500",
        "unit": "—Ç–æ–Ω–Ω–∞",
        "current_balance": 50.0,
        "average_monthly_usage": 30.0,
        "predicted_need": 90.0,
        "shortage_risk": "high",  // low | medium | high
        "reorder_date": "2025-10-15",
        "recommended_quantity": 100.0
      }
    ],
    "total_materials": 25,
    "high_risk_count": 5
  }
}
```

**UI —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
- –¢–∞–±–ª–∏—Ü–∞ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ —Å —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–æ–π –ø–æ risk
- Color coding: green (–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ), yellow (–º–∞–ª–æ), red (–Ω–µ—Ö–≤–∞—Ç–∫–∞)
- Badge —Å shortage_risk
- Action button "–ó–∞–∫–∞–∑–∞—Ç—å" –¥–ª—è high risk

---

## üë• 4. HR & KPI Analytics

### 4.1. User KPI

```http
GET /analytics/hr/kpi?user_id=15&from=2025-01-01&to=2025-10-04

Query params:
- user_id: integer (required)
- from: date (required)
- to: date (required)

Response 200:
{
  "success": true,
  "data": {
    "user_id": 15,
    "user_name": "–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤",
    "period": {...},
    "metrics": {
      "completed_works_count": 45,
      "work_volume": 2500000.00,
      "on_time_completion_rate": 92.5,  // %
      "quality_score": 4.5,  // 0-5
      "revenue_generated": 3000000.00,
      "cost_efficiency": 1.2  // revenue/cost ratio
    },
    "overall_kpi": 87.5,  // 0-100
    "performance_level": "excellent",  // excellent | good | average | below_average | poor
    "trend": "improving",  // improving | stable | declining
    "comparison_to_avg": +15.5  // % –æ—Ç–ª–∏—á–∏–µ –æ—Ç —Å—Ä–µ–¥–Ω–µ–≥–æ
  }
}
```

**UI —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
- Radar chart –¥–ª—è 6 –º–µ—Ç—Ä–∏–∫
- –ë–æ–ª—å—à–∞—è —Ü–∏—Ñ—Ä–∞ overall_kpi —Å gauge
- Badge –¥–ª—è performance_level
- Comparison bar: user vs average
- Trend indicator (‚Üë/‚Üí/‚Üì)

**Performance levels colors:**
- excellent: green
- good: light green
- average: yellow
- below_average: orange
- poor: red

---

### 4.2. Top Performers

```http
GET /analytics/hr/top-performers?from=2025-01-01&to=2025-10-04&limit=10

Query params:
- from: date (required)
- to: date (required)
- limit: integer (1-50, default: 10)

Response 200:
{
  "success": true,
  "data": {
    "period": {...},
    "performers": [
      {
        "rank": 1,
        "user_id": 15,
        "user_name": "–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤",
        "avatar_url": "/avatars/15.jpg",
        "kpi_score": 92.5,
        "completed_works": 45,
        "work_volume": 2500000.00,
        "badges": ["üèÜ Top 1", "‚≠ê Best Quality"]
      },
      {
        "rank": 2,
        ...
      }
    ],
    "total_evaluated": 50
  }
}
```

**UI —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
- Leaderboard —Å avatars
- –ü–æ–∫–∞–∑—ã–≤–∞–π—Ç–µ top 3 —Å –º–µ–¥–∞–ª—è–º–∏ ü•áü•àü•â
- Animated numbers –¥–ª—è scores
- Badges –¥–ª—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
- Scroll –¥–ª—è –¥–ª–∏–Ω–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞

---

### 4.3. Resource Utilization

```http
GET /analytics/hr/resource-utilization?from=2025-01-01&to=2025-10-04

Response 200:
{
  "success": true,
  "data": {
    "period": {...},
    "overall_utilization": 75.5,  // %
    "users": [
      {
        "user_id": 15,
        "user_name": "–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤",
        "utilization": 92.0,  // %
        "workload_status": "optimal",  // underutilized | optimal | overloaded
        "hours_worked": 184,
        "available_hours": 200,
        "active_projects": 3
      }
    ],
    "distribution": {
      "underutilized": 5,  // count
      "optimal": 35,
      "overloaded": 10
    }
  }
}
```

**UI —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
- Heatmap calendar –¥–ª—è utilization
- Cards –¥–ª—è distribution
- –¢–∞–±–ª–∏—Ü–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å progress bars
- Color coding:
  - underutilized (<60%): blue
  - optimal (60-90%): green
  - overloaded (>90%): red

---

## üîî 5. Alerts (–ê–ª–µ—Ä—Ç—ã)

### 5.1. –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∞–ª–µ—Ä—Ç–æ–≤

```http
GET /alerts?is_active=true&priority=high

Query params:
- dashboard_id: integer (optional)
- type: budget_overrun | deadline_risk | low_stock | contract_completion | payment_overdue | kpi_threshold | custom
- is_active: boolean
- priority: low | medium | high | critical

Response 200:
{
  "success": true,
  "data": [
    {
      "id": 1,
      "name": "Budget Alert",
      "description": "Notify when budget exceeds 80%",
      "alert_type": "budget_overrun",
      "target_entity": "project",
      "target_entity_id": 5,
      "comparison_operator": "gt",
      "threshold_value": 80,
      "threshold_unit": "%",
      "notification_channels": ["email", "in_app"],
      "recipients": ["admin@example.com"],
      "cooldown_minutes": 60,
      "priority": "high",
      "is_active": true,
      "is_triggered": false,
      "last_triggered_at": null,
      "trigger_count": 0,
      "created_at": "2025-10-04T12:00:00Z"
    }
  ]
}
```

**UI —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
- –°–ø–∏—Å–æ–∫ —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏ (type, priority, status)
- Toggle switch –¥–ª—è is_active
- Badge –¥–ª—è priority —Å —Ü–≤–µ—Ç–∞–º–∏
- –ü–æ–∫–∞–∑—ã–≤–∞–π—Ç–µ trigger_count
- Last triggered timestamp

---

### 5.2. –°–æ–∑–¥–∞—Ç—å –∞–ª–µ—Ä—Ç

```http
POST /alerts

Request:
{
  "dashboard_id": 1,  // optional
  "name": "Budget Alert",
  "description": "Notify when budget exceeds 80%",
  "alert_type": "budget_overrun",
  "target_entity": "project",
  "target_entity_id": 5,
  "comparison_operator": "gt",  // gt | gte | lt | lte | eq | neq
  "threshold_value": 80,
  "threshold_unit": "%",
  "notification_channels": ["email", "in_app"],
  "recipients": ["admin@example.com"],
  "cooldown_minutes": 60,
  "priority": "high",
  "is_active": true
}

Response 201:
{
  "success": true,
  "message": "Alert created successfully",
  "data": {...}
}
```

**Alert types:**
- `budget_overrun` - –ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ –±—é–¥–∂–µ—Ç–∞
- `deadline_risk` - –†–∏—Å–∫ —Å—Ä—ã–≤–∞ —Å—Ä–æ–∫–∞
- `low_stock` - –ù–∏–∑–∫–∏–π –æ—Å—Ç–∞—Ç–æ–∫ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤
- `contract_completion` - –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞
- `payment_overdue` - –ü—Ä–æ—Å—Ä–æ—á–∫–∞ –ø–ª–∞—Ç–µ–∂–∞
- `kpi_threshold` - –ü–æ—Ä–æ–≥ KPI
- `custom` - –ö–∞—Å—Ç–æ–º–Ω—ã–π

**UI Form:**
```
1. Basic Info
   - Name (required)
   - Description (optional)
   
2. Condition
   - Alert Type (dropdown)
   - Target Entity (project | contract | material | user)
   - Select entity (autocomplete)
   - Operator (> | >= | < | <= | == | !=)
   - Threshold value (number)
   - Unit (%, ‚ÇΩ, –¥–Ω–µ–π, —à—Ç)
   
3. Notifications
   - Channels (checkboxes: email, in_app, webhook)
   - Recipients (chips input)
   - Cooldown (minutes, default 60)
   
4. Priority
   - Radio: low | medium | high | critical
   
5. Status
   - Toggle: Active/Inactive
```

---

### 5.3. –í–∫–ª—é—á–∏—Ç—å/–≤—ã–∫–ª—é—á–∏—Ç—å –∞–ª–µ—Ä—Ç

```http
POST /alerts/{id}/toggle

Request:
{
  "is_active": true
}

Response 200:
{
  "success": true,
  "message": "Alert enabled successfully"
}
```

**UI:**
- Toggle switch –≤ —Å–ø–∏—Å–∫–µ
- Confirmation –¥–ª—è critical alerts

---

### 5.4. –°–±—Ä–æ—Å–∏—Ç—å –∞–ª–µ—Ä—Ç

```http
POST /alerts/{id}/reset

Response 200:
{
  "success": true,
  "message": "Alert reset successfully"
}
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- –°–±—Ä–∞—Å—ã–≤–∞–µ—Ç `is_triggered` ‚Üí false
- –û—á–∏—â–∞–µ—Ç `last_triggered_at`
- –û–±–Ω—É–ª—è–µ—Ç `trigger_count`

**UI:**
- –ö–Ω–æ–ø–∫–∞ "Reset" –¥–ª—è triggered alerts

---

### 5.5. –ò—Å—Ç–æ—Ä–∏—è —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–π

```http
GET /alerts/{id}/history?limit=50

Response 200:
{
  "success": true,
  "data": [
    {
      "triggered_at": "2025-10-04T15:30:00Z",
      "current_value": 85.5,
      "threshold_value": 80,
      "message": "Budget exceeded threshold",
      "notified_channels": ["email", "in_app"]
    }
  ]
}
```

**UI:**
- Timeline view
- –ü–æ–∫–∞–∑—ã–≤–∞–π—Ç–µ actual value vs threshold
- –ò–∫–æ–Ω–∫–∏ –¥–ª—è channels

---

### 5.6. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ –∞–ª–µ—Ä—Ç—ã (manual)

```http
POST /alerts/check-all

Response 200:
{
  "success": true,
  "message": "Alerts checked successfully",
  "data": {
    "checked": 10,
    "triggered": 2,
    "errors": 0
  }
}
```

**UI:**
- Admin –∫–Ω–æ–ø–∫–∞ "Check All"
- –ü–æ–∫–∞–∑—ã–≤–∞–π—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ toast

---

## üìÑ 6. Export

### 6.1. –î–æ—Å—Ç—É–ø–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã

```http
GET /export/formats

Response 200:
{
  "success": true,
  "data": {
    "pdf": {
      "supported": true,
      "max_size_mb": 50,
      "quality": "high"
    },
    "excel": {
      "supported": true,
      "max_size_mb": 100,
      "format": "xlsx"
    }
  }
}
```

---

### 6.2. –≠–∫—Å–ø–æ—Ä—Ç –≤ PDF

```http
POST /export/dashboard/{id}/pdf

Request:
{
  "filters": {
    "from": "2025-01-01",
    "to": "2025-10-04"
  },
  "widgets": ["widget-1", "widget-2"]  // optional, –µ—Å–ª–∏ –Ω–µ—Ç - –≤—Å–µ
}

Response 200:
{
  "success": true,
  "message": "Dashboard exported successfully",
  "data": {
    "file_path": "exports/dashboard-1-20251004.pdf",
    "file_url": "https://storage.prohelper.ru/exports/dashboard-1-20251004.pdf",
    "format": "pdf",
    "size_bytes": 2456789
  }
}
```

**UI flow:**
1. –ö–Ω–æ–ø–∫–∞ "Export" ‚Üí Dropdown (PDF / Excel)
2. Modal —Å –æ–ø—Ü–∏—è–º–∏ (—Ñ–∏–ª—å—Ç—Ä—ã, –≤–∏–¥–∂–µ—Ç—ã)
3. Loading spinner (–º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å 10-30 —Å–µ–∫)
4. Success toast + Download button
5. –ê–≤—Ç–æ—Å–∫–∞—á–∏–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
- –ü–æ–∫–∞–∑—ã–≤–∞–π—Ç–µ –ø—Ä–æ–≥—Ä–µ—Å—Å
- –•—Ä–∞–Ω–∏—Ç–µ —Å—Å—ã–ª–∫—É –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è
- –û—Ç–∫—Ä—ã–≤–∞–π—Ç–µ –≤ –Ω–æ–≤–æ–π –≤–∫–ª–∞–¥–∫–µ –¥–ª—è preview

---

### 6.3. –≠–∫—Å–ø–æ—Ä—Ç –≤ Excel

```http
POST /export/dashboard/{id}/excel

Request:
{
  "filters": {...},
  "widgets": [...],
  "include_raw_data": true  // –≤–∫–ª—é—á–∏—Ç—å raw data –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–µ sheets
}

Response 200:
{
  "success": true,
  "message": "Dashboard exported successfully",
  "data": {
    "file_path": "exports/dashboard-1-20251004.xlsx",
    "file_url": "https://...",
    "format": "excel",
    "sheets": ["Summary", "Cash Flow", "P&L", "Raw Data"]
  }
}
```

---

### 6.4. Scheduled Reports

#### –°–ø–∏—Å–æ–∫

```http
GET /export/scheduled-reports?is_active=true

Response 200:
{
  "success": true,
  "data": [
    {
      "id": 1,
      "dashboard_id": 1,
      "name": "Weekly Finance Report",
      "description": "Send every Monday",
      "frequency": "weekly",
      "time_of_day": "09:00:00",
      "days_of_week": [1],  // Monday
      "export_formats": ["pdf", "excel"],
      "recipients": ["cfo@example.com"],
      "is_active": true,
      "next_run_at": "2025-10-07T09:00:00Z",
      "last_run_at": "2025-09-30T09:00:00Z",
      "last_run_status": "success",
      "run_count": 12,
      "success_count": 12,
      "failure_count": 0
    }
  ]
}
```

#### –°–æ–∑–¥–∞—Ç—å

```http
POST /export/scheduled-reports

Request:
{
  "dashboard_id": 1,
  "name": "Weekly Finance Report",
  "description": "Send every Monday at 9 AM",
  "frequency": "weekly",  // daily | weekly | monthly | custom
  "time_of_day": "09:00:00",
  "days_of_week": [1],  // –¥–ª—è weekly: 0-6 (Sun-Sat)
  "day_of_month": null,  // –¥–ª—è monthly: 1-31
  "cron_expression": null,  // –¥–ª—è custom
  "export_formats": ["pdf", "excel"],
  "recipients": ["cfo@example.com"],
  "cc_recipients": ["finance@example.com"],
  "email_subject": "Weekly Finance Report",
  "email_body": "Please find attached...",
  "filters": {...},
  "widgets": [...],
  "include_raw_data": false,
  "is_active": true
}

Response 201:
{
  "success": true,
  "message": "Scheduled report created successfully",
  "data": {...}
}
```

**UI Form:**
```
1. Basic
   - Select Dashboard (required)
   - Report Name (required)
   - Description
   
2. Schedule
   - Frequency (daily/weekly/monthly/custom)
   - Time (HH:MM)
   - Days of week (–¥–ª—è weekly)
   - Day of month (–¥–ª—è monthly)
   - Cron expression (–¥–ª—è custom)
   
3. Export
   - Formats (checkboxes: PDF, Excel)
   - Include raw data (toggle)
   - Filters (inherited from dashboard)
   
4. Email
   - Recipients (chips, required)
   - CC (chips, optional)
   - Subject (template)
   - Body (textarea)
   
5. Status
   - Active (toggle)
```

**Schedule examples:**
- Daily at 9 AM: `daily`, `09:00:00`
- Weekly Mon/Wed/Fri: `weekly`, `09:00:00`, `[1,3,5]`
- Monthly 1st day: `monthly`, `09:00:00`, `1`
- Custom cron: `custom`, `0 9 * * 1,3,5`

---

## üé® UI/UX –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### Dashboard Layout

**Grid —Å–∏—Å—Ç–µ–º–∞:**
- 12 –∫–æ–ª–æ–Ω–æ–∫
- Responsive breakpoints:
  - lg: ‚â•1200px (12 cols)
  - md: ‚â•996px (10 cols)
  - sm: ‚â•768px (6 cols)
  - xs: <768px (4 cols)

**–í–∏–¥–∂–µ—Ç—ã:**
- –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä: 2x2 (cols x rows)
- –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π: 4x3 –¥–ª—è charts
- –ü–æ–ª–Ω–∞—è —à–∏—Ä–∏–Ω–∞: 12x4 –¥–ª—è tables

### –¶–≤–µ—Ç–æ–≤–∞—è –ø–∞–ª–∏—Ç—Ä–∞

**Status colors:**
```
Success: #10B981 (green)
Warning: #F59E0B (yellow)
Error: #EF4444 (red)
Info: #3B82F6 (blue)
```

**Performance levels:**
```
Excellent: #10B981
Good: #84CC16
Average: #F59E0B
Below Average: #F97316
Poor: #EF4444
```

**Chart colors:**
```
Primary: #3B82F6
Secondary: #8B5CF6
Success: #10B981
Warning: #F59E0B
Danger: #EF4444
```

### Loading States

**Skeleton screens:**
- Dashboard list: Cards skeleton
- Widget loading: Chart skeleton
- Table loading: Table skeleton

**Spinners:**
- Page load: Full-screen spinner
- Widget refresh: Small spinner overlay
- Button action: Button spinner

### Error Handling

**Error types:**
```
401 Unauthorized ‚Üí Redirect to login
403 Module Not Active ‚Üí Show activation banner
404 Not Found ‚Üí Show 404 page
400 Validation Error ‚Üí Show field errors
429 Rate Limit ‚Üí Show retry message
500 Server Error ‚Üí Show error page
```

**Toast notifications:**
- Success: 3 sec auto-dismiss
- Error: 5 sec or manual dismiss
- Info: 3 sec auto-dismiss
- Warning: 5 sec or manual dismiss

### Performance

**Optimization:**
- Lazy load –≤–∏–¥–∂–µ—Ç–æ–≤ (IntersectionObserver)
- Debounce –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–æ–≤ (500ms)
- Throttle –¥–ª—è scroll events (100ms)
- Cache API responses (5 min TTL)
- Paginate tables (50 rows per page)

**Bundle size:**
- Code splitting –ø–æ routes
- Lazy load chart libraries
- Tree shaking unused code

---

## üîÑ Workflow Examples

### 1. –°–æ–∑–¥–∞–Ω–∏–µ –ø–µ—Ä–≤–æ–≥–æ –¥–∞—à–±–æ—Ä–¥–∞

```
1. User opens Advanced Dashboard
2. Check module status: GET /api/modules/advanced-dashboard/status
3. If not active ‚Üí Show activation prompt
4. If active ‚Üí GET /dashboards (empty)
5. Show "Create Dashboard" CTA
6. User clicks ‚Üí Modal with templates
7. User selects template: POST /dashboards/from-template
8. Redirect to new dashboard
9. Show tutorial overlay
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–∞—à–±–æ—Ä–¥–∞

```
1. Open dashboard: GET /dashboards/{id}
2. Render widgets based on dashboard.widgets
3. User drag-and-drops widget
4. Debounce 500ms
5. PUT /dashboards/{id}/layout
6. Show "Saving..." ‚Üí "Saved ‚úì"
7. User adds new widget
8. PUT /dashboards/{id}/widgets
9. Render new widget
```

### 3. –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤

```
1. User changes period in toolbar
2. Update local state
3. User clicks "Apply"
4. PUT /dashboards/{id}/filters
5. For each widget:
   - Show loading skeleton
   - Fetch data with new filters
   - Render updated chart
6. Cache responses for 5 min
```

### 4. –°–æ–∑–¥–∞–Ω–∏–µ –∞–ª–µ—Ä—Ç–∞

```
1. User clicks "Add Alert"
2. Modal form
3. Select alert type ‚Üí Show relevant fields
4. Fill conditions
5. POST /alerts
6. Success ‚Üí Add to alerts list
7. Background: cron checks alert every 10 min
8. If triggered ‚Üí Show notification
```

### 5. –≠–∫—Å–ø–æ—Ä—Ç –æ—Ç—á–µ—Ç–∞

```
1. User clicks "Export" ‚Üí Dropdown
2. Select format (PDF/Excel)
3. Modal with options
4. POST /export/dashboard/{id}/pdf
5. Show progress (polling or websocket)
6. Success ‚Üí Download file
7. Keep link for re-download
```

---

## üêõ Error Scenarios

### Module Not Active

```
Error 403:
{
  "success": false,
  "message": "Advanced Dashboard module is not active for this organization"
}

UI:
1. Show banner: "Activate Advanced Dashboard to unlock features"
2. CTA button: "Start 7-day trial" or "Activate" 
3. Disable all features
4. Redirect to activation page
```

### Dashboard Limit Exceeded

```
Error 403:
{
  "success": false,
  "message": "Dashboard limit exceeded (max 10 per user)"
}

UI:
1. Show modal: "You've reached the limit"
2. Message: "Delete unused dashboards or upgrade plan"
3. List current dashboards with "Delete" buttons
4. Upgrade CTA
```

### Validation Error

```
Error 400:
{
  "success": false,
  "message": "Validation failed",
  "errors": {
    "name": ["The name field is required"],
    "threshold_value": ["Must be a number"]
  }
}

UI:
1. Highlight error fields in red
2. Show error messages under fields
3. Focus first error field
4. Keep other filled values
```

### Rate Limit

```
Error 429:
{
  "success": false,
  "message": "Too many requests. Try again in 60 seconds"
}

UI:
1. Disable submit button
2. Show countdown timer
3. Re-enable after cooldown
```

---

## üì± Mobile Considerations

**Responsive breakpoints:**
```
xs: <576px - 1 column
sm: ‚â•576px - 2 columns
md: ‚â•768px - 3 columns
lg: ‚â•992px - 4 columns
xl: ‚â•1200px - 4 columns
```

**Mobile optimizations:**
- Simplify charts (–º–µ–Ω—å—à–µ data points)
- Stack widgets vertically
- Full-width cards
- Bottom sheet –¥–ª—è filters
- Swipe gestures –¥–ª—è navigation

---

## üîß Testing

**Manual testing checklist:**
```
‚ñ° Create dashboard from each template
‚ñ° Drag-and-drop widgets
‚ñ° Apply different filters
‚ñ° Create each type of alert
‚ñ° Export to PDF and Excel
‚ñ° Share dashboard (team/org)
‚ñ° Set default dashboard
‚ñ° Check mobile responsive
‚ñ° Test with empty state
‚ñ° Test error scenarios
```

**Performance benchmarks:**
- Dashboard load: <2 sec
- Widget render: <500ms
- Filter apply: <1 sec
- Export: <30 sec
- First paint: <1 sec

---

## üìö Additional Resources

**OpenAPI Spec:**
- `docs/openapi/advanced-dashboard.yaml`
- Import to Postman/Insomnia –¥–ª—è testing

**Permissions:**
- `@docs/PERMISSIONS_ADVANCED_DASHBOARD.md`
- Check user permissions before showing features

**Module README:**
- `app/BusinessModules/Features/AdvancedDashboard/README.md`

---

## ‚ùì FAQ

**Q: –ö–∞–∫ —á–∞—Å—Ç–æ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –¥–∞–Ω–Ω—ã–µ?**  
A: –î–∞–Ω–Ω—ã–µ –∫–µ—à–∏—Ä—É—é—Ç—Å—è 5 –º–∏–Ω—É—Ç. Manual refresh –∫–Ω–æ–ø–∫–∞ force reload.

**Q: –ú–æ–∂–Ω–æ –ª–∏ –∫–∞—Å—Ç–æ–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –≤–∏–¥–∂–µ—Ç—ã?**  
A: –î–∞, —á–µ—Ä–µ–∑ `PUT /dashboards/{id}/widgets` —Å settings.

**Q: –°–∫–æ–ª—å–∫–æ –¥–∞—à–±–æ—Ä–¥–æ–≤ –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å?**  
A: –ú–∞–∫—Å–∏–º—É–º 10 –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (FREE –≤–µ—Ä—Å–∏—è).

**Q: –†–∞–±–æ—Ç–∞–µ—Ç –ª–∏ offline?**  
A: –ù–µ—Ç, —Ç—Ä–µ–±—É–µ—Ç—Å—è internet connection.

**Q: –ö–∞–∫ —á–∞—Å—Ç–æ –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –∞–ª–µ—Ä—Ç—ã?**  
A: –ö–∞–∂–¥—ã–µ 10 –º–∏–Ω—É—Ç —á–µ—Ä–µ–∑ cron.

**Q: –†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–æ–≤ export?**  
A: PDF –¥–æ 50MB, Excel –¥–æ 100MB.

---

**–í–µ—Ä—Å–∏—è:** 1.0.0  
**–î–∞—Ç–∞:** 4 –æ–∫—Ç—è–±—Ä—è 2025  
**–°—Ç–∞—Ç—É—Å:** Production Ready ‚úÖ  

**–ü–æ–¥–¥–µ—Ä–∂–∫–∞:** support@prohelper.ru  
**Docs:** https://docs.prohelper.ru

