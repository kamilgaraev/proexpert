# –°–≤–æ–¥–∫–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ Trial Period –¥–ª—è –º–æ–¥—É–ª–µ–π

## ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

### 1. Core –ª–æ–≥–∏–∫–∞ (ModuleManager)

**–§–∞–π–ª:** `app/Modules/Core/ModuleManager.php`

–î–æ–±–∞–≤–ª–µ–Ω—ã –º–µ—Ç–æ–¥—ã:

- **`activateTrial(int $organizationId, string $moduleSlug): array`**
  - –ê–∫—Ç–∏–≤–∏—Ä—É–µ—Ç trial –ø–µ—Ä–∏–æ–¥ –¥–ª—è –º–æ–¥—É–ª—è
  - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, –Ω–µ –±—ã–ª –ª–∏ trial —É–∂–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω
  - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, –Ω–µ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω –ª–∏ —É–∂–µ –º–æ–¥—É–ª—å
  - –°–æ–∑–¥–∞–µ—Ç –∑–∞–ø–∏—Å—å —Å `status = 'trial'` –∏ `trial_ends_at`
  - –ò—Å–ø—É—Å–∫–∞–µ—Ç —Å–æ–±—ã—Ç–∏–µ `TrialActivated`
  - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π trial

- **`hasUsedTrial(int $organizationId, int $moduleId): bool`**
  - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞ –ª–∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è trial –¥–ª—è –º–æ–¥—É–ª—è
  - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ –∑–∞–ø–∏—Å–∏ —Å `trial_ends_at IS NOT NULL`

- **`convertTrialToPaid(int $organizationId, string $moduleSlug): array`**
  - –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç trial –≤ –ø–ª–∞—Ç–Ω—É—é –ø–æ–¥–ø–∏—Å–∫—É
  - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ—Å—Ç—å —Å—Ä–µ–¥—Å—Ç–≤ –Ω–∞ –±–∞–ª–∞–Ω—Å–µ
  - –°–ø–∏—Å—ã–≤–∞–µ—Ç —Å—Ä–µ–¥—Å—Ç–≤–∞ —á–µ—Ä–µ–∑ BillingEngine
  - –û–±–Ω–æ–≤–ª—è–µ—Ç —Å—Ç–∞—Ç—É—Å —Å `'trial'` –Ω–∞ `'active'`
  - –õ–æ–≥–∏—Ä—É–µ—Ç –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—é

### 2. –°–æ–±—ã—Ç–∏—è

**–§–∞–π–ª—ã:**
- `app/Modules/Events/TrialActivated.php` - –∏—Å–ø—É—Å–∫–∞–µ—Ç—Å—è –ø—Ä–∏ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ trial
- `app/Modules/Events/TrialExpired.php` - –∏—Å–ø—É—Å–∫–∞–µ—Ç—Å—è –ø—Ä–∏ –∏—Å—Ç–µ—á–µ–Ω–∏–∏ trial

–°–æ–±—ã—Ç–∏—è —Å–æ–¥–µ—Ä–∂–∞—Ç:
- `organizationId` - ID –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
- `moduleSlug` - slug –º–æ–¥—É–ª—è
- `trialDays` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π trial (—Ç–æ–ª—å–∫–æ TrialActivated)

### 3. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å—Ç–µ–∫—à–∏—Ö trial

**–§–∞–π–ª:** `app/Console/Commands/ConvertExpiredTrials.php`

–ö–æ–º–∞–Ω–¥–∞: `php artisan modules:convert-expired-trials`

–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:
- –ù–∞—Ö–æ–¥–∏—Ç –≤—Å–µ trial —Å `trial_ends_at <= now()` –∏ `status = 'trial'`
- –û–±–Ω–æ–≤–ª—è–µ—Ç –∏—Ö —Å—Ç–∞—Ç—É—Å –Ω–∞ `'expired'`
- –û—á–∏—â–∞–µ—Ç –∫–µ—à –¥–æ—Å—Ç—É–ø–∞ –¥–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
- –ò—Å–ø—É—Å–∫–∞–µ—Ç —Å–æ–±—ã—Ç–∏–µ `TrialExpired`
- –õ–æ–≥–∏—Ä—É–µ—Ç –∫–∞–∂–¥—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫:** –ö–∞–∂–¥—ã–π —á–∞—Å —á–µ—Ä–µ–∑ Laravel Scheduler (—Å–º. `routes/console.php`)

### 4. API Endpoints

**–§–∞–π–ª:** `app/Http/Controllers/Api/V1/Landing/ModuleController.php`

**–ú–∞—Ä—à—Ä—É—Ç—ã:**
```
POST   /api/modules/{slug}/activate-trial        - –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å trial
GET    /api/modules/{slug}/trial-availability    - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å trial
POST   /api/modules/{slug}/convert-trial         - –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å trial –≤ –ø–ª–∞—Ç–Ω—É—é –ø–æ–¥–ø–∏—Å–∫—É
```

**Middleware:** `auth:api_landing`, `jwt.auth`, `organization.context`, `authorize:modules.manage` (–∫—Ä–æ–º–µ trial-availability)

#### 4.1. POST `/api/modules/{slug}/activate-trial`

**–ó–∞–ø—Ä–æ—Å:**
```json
POST /api/modules/advanced-dashboard/activate-trial
Authorization: Bearer {jwt_token}
```

**–£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "message": "Trial –ø–µ—Ä–∏–æ–¥ –º–æ–¥—É–ª—è '–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π –¥–∞—à–±–æ—Ä–¥' –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω –Ω–∞ 14 –¥–Ω–µ–π",
  "trial_days": 14,
  "trial_ends_at": "2025-10-18T12:00:00.000000Z"
}
```

**–û—à–∏–±–∫–∏:**
- `400` - –ú–æ–¥—É–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω / —É–∂–µ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω / –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
- `409` - Trial —É–∂–µ –±—ã–ª –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω
- `404` - –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞

#### 4.2. GET `/api/modules/{slug}/trial-availability`

**–ó–∞–ø—Ä–æ—Å:**
```json
GET /api/modules/advanced-dashboard/trial-availability
Authorization: Bearer {jwt_token}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "trial_available": true,
  "has_used_trial": false,
  "is_active": false,
  "trial_days": 14,
  "module": {
    "name": "–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π –¥–∞—à–±–æ—Ä–¥",
    "slug": "advanced-dashboard",
    "price": 4990,
    "currency": "RUB",
    "billing_model": "subscription"
  }
}
```

#### 4.3. POST `/api/modules/{slug}/convert-trial`

**–ó–∞–ø—Ä–æ—Å:**
```json
POST /api/modules/advanced-dashboard/convert-trial
Authorization: Bearer {jwt_token}
```

**–£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "message": "–ú–æ–¥—É–ª—å '–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π –¥–∞—à–±–æ—Ä–¥' —É—Å–ø–µ—à–Ω–æ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω",
  "paid_amount": 4990
}
```

**–û—à–∏–±–∫–∏:**
- `400` - Trial –Ω–µ –Ω–∞–π–¥–µ–Ω / –º–æ–¥—É–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω
- `402` - –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤ –Ω–∞ –±–∞–ª–∞–Ω—Å–µ

### 5. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –º–æ–¥—É–ª—è

**–ü—Ä–∏–º–µ—Ä:** `config/ModuleList/features/advanced-dashboard.json`

```json
{
  "pricing": {
    "base_price": 4990,
    "currency": "RUB",
    "included_in_plans": ["profi", "enterprise"],
    "duration_days": 30,
    "trial_days": 7
  }
}
```

`trial_days` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π trial –ø–µ—Ä–∏–æ–¥–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 14, —Ç–µ–∫—É—â–∏–µ –º–æ–¥—É–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –Ω–∞ 7 –¥–Ω–µ–π)

### üì¶ –ú–æ–¥—É–ª–∏ —Å –∞–∫—Ç–∏–≤–Ω—ã–º trial –ø–µ—Ä–∏–æ–¥–æ–º (7 –¥–Ω–µ–π)

**Features (5):**
1. ‚úÖ `advanced-dashboard` - –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π –¥–∞—à–±–æ—Ä–¥ (4990 ‚ÇΩ)
2. ‚úÖ `advanced-reports` - –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –æ—Ç—á–µ—Ç—ã (2900 ‚ÇΩ)
3. ‚úÖ `workflow-management` - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞–±–æ—á–∏–º–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏ (1990 ‚ÇΩ)
4. ‚úÖ `time-tracking` - –£—á–µ—Ç —Ä–∞–±–æ—á–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ (1490 ‚ÇΩ)
5. ‚úÖ `schedule-management` - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ–º (1990 ‚ÇΩ)

**Core (1):**
6. ‚úÖ `multi-organization` - –ú—É–ª—å—Ç–∏–æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è (5900 ‚ÇΩ)

**Addons (8):**
7. ‚úÖ `integrations` - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ (2900 ‚ÇΩ)
8. ‚úÖ `rate-management` - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞—Å—Ü–µ–Ω–∫–∞–º–∏ (2490 ‚ÇΩ)
9. ‚úÖ `contractor-portal` - –ü–æ—Ä—Ç–∞–ª –ø–æ–¥—Ä—è–¥—á–∏–∫–æ–≤ (3490 ‚ÇΩ)
10. ‚úÖ `material-analytics` - –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ (2990 ‚ÇΩ)
11. ‚úÖ `act-reporting` - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–∫—Ç–∞–º–∏ (1990 ‚ÇΩ)
12. ‚úÖ `advance-accounting` - –ü–æ–¥–æ—Ç—á–µ—Ç–Ω—ã–µ —Å—Ä–µ–¥—Å—Ç–≤–∞ (2490 ‚ÇΩ)
13. ‚úÖ `system-logs` - –°–∏—Å—Ç–µ–º–Ω—ã–µ –ª–æ–≥–∏ (1990 ‚ÇΩ)
14. ‚úÖ `file-management` - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–∞–º–∏ (990 ‚ÇΩ)

**–ò—Ç–æ–≥–æ:** 14 –ø–ª–∞—Ç–Ω—ã—Ö –º–æ–¥—É–ª–µ–π —Å trial –ø–µ—Ä–∏–æ–¥–æ–º –Ω–∞ 7 –¥–Ω–µ–π

### 6. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π scheduler

**–§–∞–π–ª:** `routes/console.php`

```php
Schedule::command('modules:convert-expired-trials')
    ->hourly()
    ->withoutOverlapping(10)
    ->onFailure(function () {
        Log::channel('stderr')->error('Scheduled modules:convert-expired-trials command failed.');
    })
    ->appendOutputTo(storage_path('logs/schedule-trial-expired.log'));
```

–ö–æ–º–∞–Ω–¥–∞ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è **–∫–∞–∂–¥—ã–π —á–∞—Å** –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∏—Å—Ç–µ–∫—à–∏–µ trial –ø–µ—Ä–∏–æ–¥—ã.

## üìã –°—Ö–µ–º–∞ —Ä–∞–±–æ—Ç—ã Trial

### –ê–∫—Ç–∏–≤–∞—Ü–∏—è Trial

```
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç "–ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å 14 –¥–Ω–µ–π –±–µ—Å–ø–ª–∞—Ç–Ω–æ"
2. Frontend ‚Üí POST /api/modules/{slug}/activate-trial
3. ModuleManager –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:
   - –ù–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω –ª–∏ trial —Ä–∞–Ω–µ–µ
   - –ù–µ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω –ª–∏ –º–æ–¥—É–ª—å
   - –ü–ª–∞—Ç–Ω—ã–π –ª–∏ –º–æ–¥—É–ª—å
4. –°–æ–∑–¥–∞–µ—Ç—Å—è –∑–∞–ø–∏—Å—å OrganizationModuleActivation:
   - status = 'trial'
   - trial_ends_at = now() + 14 days
   - expires_at = now() + 14 days
   - paid_amount = 0
5. –û—á–∏—â–∞–µ—Ç—Å—è –∫–µ—à –¥–æ—Å—Ç—É–ø–∞
6. –ò—Å–ø—É—Å–∫–∞–µ—Ç—Å—è —Å–æ–±—ã—Ç–∏–µ TrialActivated
7. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç –¥–æ—Å—Ç—É–ø –∫ –º–æ–¥—É–ª—é
```

### –ò—Å—Ç–µ—á–µ–Ω–∏–µ Trial

```
1. Scheduler –∫–∞–∂–¥—ã–π —á–∞—Å –∑–∞–ø—É—Å–∫–∞–µ—Ç modules:convert-expired-trials
2. –ö–æ–º–∞–Ω–¥–∞ –Ω–∞—Ö–æ–¥–∏—Ç –∑–∞–ø–∏—Å–∏ —Å trial_ends_at <= now() –∏ status = 'trial'
3. –î–ª—è –∫–∞–∂–¥–æ–π –∑–∞–ø–∏—Å–∏:
   - –û–±–Ω–æ–≤–ª—è–µ—Ç status = 'expired'
   - –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç expires_at = now()
   - –û—á–∏—â–∞–µ—Ç –∫–µ—à –¥–æ—Å—Ç—É–ø–∞
   - –ò—Å–ø—É—Å–∫–∞–µ—Ç —Å–æ–±—ã—Ç–∏–µ TrialExpired
4. –î–æ—Å—Ç—É–ø –∫ –º–æ–¥—É–ª—é –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è
```

### –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è Trial –≤ –ø–ª–∞—Ç–Ω—É—é –ø–æ–¥–ø–∏—Å–∫—É

```
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç "–ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –º–æ–¥—É–ª—å"
2. Frontend ‚Üí POST /api/modules/{slug}/convert-trial
3. ModuleManager –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:
   - –ï—Å—Ç—å –ª–∏ –∞–∫—Ç–∏–≤–Ω—ã–π trial
   - –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ª–∏ —Å—Ä–µ–¥—Å—Ç–≤ –Ω–∞ –±–∞–ª–∞–Ω—Å–µ
4. BillingEngine —Å–ø–∏—Å—ã–≤–∞–µ—Ç —Å—Ä–µ–¥—Å—Ç–≤–∞
5. –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∑–∞–ø–∏—Å—å OrganizationModuleActivation:
   - status = 'active'
   - activated_at = now()
   - expires_at = now() + 30 days (–¥–ª—è subscription)
   - paid_amount = 4990
6. –û—á–∏—â–∞–µ—Ç—Å—è –∫–µ—à –¥–æ—Å—Ç—É–ø–∞
7. –õ–æ–≥–∏—Ä—É–µ—Ç—Å—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è
```

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

- **–û–¥–∏–Ω trial –Ω–∞ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—é:** –ü–æ–≤—Ç–æ—Ä–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ trial –¥–ª—è –æ–¥–Ω–æ–≥–æ –º–æ–¥—É–ª—è –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ
- **–¢–æ–ª—å–∫–æ –¥–ª—è –ø–ª–∞—Ç–Ω—ã—Ö –º–æ–¥—É–ª–µ–π:** –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –º–æ–¥—É–ª–∏ –Ω–µ –∏–º–µ—é—Ç trial –ø–µ—Ä–∏–æ–¥–∞
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å—Ç–µ—á–µ–Ω–∏–µ:** Trial –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å—Ç–µ–∫–∞–µ—Ç —á–µ—Ä–µ–∑ —É–∫–∞–∑–∞–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π
- **–ó–∞—â–∏—Ç–∞ –æ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è:** –ü—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å trial –ø–æ–≤—Ç–æ—Ä–Ω–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –æ—à–∏–±–∫–∞ `TRIAL_ALREADY_USED`
- **–ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–ª–∞–Ω—Å–∞:** –ü—Ä–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ—Å—Ç—å —Å—Ä–µ–¥—Å—Ç–≤

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –õ–æ–≥–∏

**Business logs:**
- `module.trial.activation.started` - –Ω–∞—á–∞–ª–æ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ trial
- `module.trial.activation.completed` - —É—Å–ø–µ—à–Ω–∞—è –∞–∫—Ç–∏–≤–∞—Ü–∏—è trial
- `module.trial.activation.failed` - –æ—à–∏–±–∫–∞ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ trial
- `module.trial.converted` - —É—Å–ø–µ—à–Ω–∞—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è trial –≤ –ø–ª–∞—Ç–Ω—É—é –ø–æ–¥–ø–∏—Å–∫—É

**Technical logs:**
- `module.trial.conversion.failed` - —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏

### –§–∞–π–ª—ã –ª–æ–≥–æ–≤

- `storage/logs/schedule-trial-expired.log` - –ª–æ–≥ —Ä–∞–±–æ—Ç—ã scheduler –¥–ª—è –∏—Å—Ç–µ–∫—à–∏—Ö trial
- `storage/logs/laravel.log` - –æ—Å–Ω–æ–≤–Ω–æ–π –ª–æ–≥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å business/technical —Å–æ–±—ã—Ç–∏—è–º–∏

### –ú–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è

1. –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–∞—Ü–∏–π trial –∑–∞ –ø–µ—Ä–∏–æ–¥
2. –ö–æ–Ω–≤–µ—Ä—Å–∏—è trial ‚Üí –ø–ª–∞—Ç–Ω–∞—è –ø–æ–¥–ø–∏—Å–∫–∞ (%)
3. –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏—Å—Ç–µ–∫—à–∏—Ö trial –±–µ–∑ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏
4. –°—Ä–µ–¥–Ω—è—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è trial –¥–æ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏
5. –ú–æ–¥—É–ª–∏ —Å –Ω–∞–∏–±–æ–ª—å—à–µ–π –∫–æ–Ω–≤–µ—Ä—Å–∏–µ–π trial

## üöÄ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

### Backend
- ‚úÖ –õ–æ–≥–∏–∫–∞ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ trial
- ‚úÖ –õ–æ–≥–∏–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ trial
- ‚úÖ –õ–æ–≥–∏–∫–∞ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ trial –≤ –ø–ª–∞—Ç–Ω—É—é –ø–æ–¥–ø–∏—Å–∫—É
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å—Ç–µ—á–µ–Ω–∏–µ trial
- ‚úÖ API endpoints
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ –°–æ–±—ã—Ç–∏—è –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞

### –¢—Ä–µ–±—É–µ—Ç—Å—è (Frontend)
- ‚è≥ –ö–Ω–æ–ø–∫–∞ "–ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å 14 –¥–Ω–µ–π –±–µ—Å–ø–ª–∞—Ç–Ω–æ" –≤ –∫–∞—Ä—Ç–æ—á–∫–µ –º–æ–¥—É–ª—è
- ‚è≥ –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –æ—Å—Ç–∞–≤—à–∏—Ö—Å—è –¥–Ω–µ–π trial
- ‚è≥ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ —Å–∫–æ—Ä–æ–º –∏—Å—Ç–µ—á–µ–Ω–∏–∏ trial
- ‚è≥ –ö–Ω–æ–ø–∫–∞ "–ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –º–æ–¥—É–ª—å" –ø—Ä–∏ –∏—Å—Ç–µ—á–µ–Ω–∏–∏ trial
- ‚è≥ UI –¥–ª—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ trial –≤ –ø–ª–∞—Ç–Ω—É—é –ø–æ–¥–ø–∏—Å–∫—É

### –¢—Ä–µ–±—É–µ—Ç—Å—è (–°–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π)
- ‚è≥ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∑–∞ 3 –¥–Ω—è –¥–æ –∏—Å—Ç–µ—á–µ–Ω–∏—è trial
- ‚è≥ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∑–∞ 1 –¥–µ–Ω—å –¥–æ –∏—Å—Ç–µ—á–µ–Ω–∏—è trial
- ‚è≥ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø—Ä–∏ –∏—Å—Ç–µ—á–µ–Ω–∏–∏ trial
- ‚è≥ Email-—Ä–∞—Å—Å—ã–ª–∫–∞ –æ trial –ø–µ—Ä–∏–æ–¥–∞—Ö

## üìù –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ trial

```bash
curl -X GET "https://api.example.com/api/modules/advanced-dashboard/trial-availability" \
  -H "Authorization: Bearer {jwt_token}"
```

### –ê–∫—Ç–∏–≤–∞—Ü–∏—è trial

```bash
curl -X POST "https://api.example.com/api/modules/advanced-dashboard/activate-trial" \
  -H "Authorization: Bearer {jwt_token}"
```

### –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è trial

```bash
curl -X POST "https://api.example.com/api/modules/advanced-dashboard/convert-trial" \
  -H "Authorization: Bearer {jwt_token}"
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å—Ç–µ–∫—à–∏—Ö trial –≤—Ä—É—á–Ω—É—é

```bash
php artisan modules:convert-expired-trials
```

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ trial

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `config/ModuleList/{type}/{module-slug}.json`:

```json
{
  "pricing": {
    "trial_days": 30
  }
}
```

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ —á–∞—Å—Ç–æ—Ç—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏—Å—Ç–µ–∫—à–∏—Ö trial

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `routes/console.php`:

```php
Schedule::command('modules:convert-expired-trials')
    ->everyThirtyMinutes()  // –∏–ª–∏ ->daily(), ->everyFiveMinutes()
```

## üéØ –ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—Ö–∞

–î–ª—è –æ—Ü–µ–Ω–∫–∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ trial –ø–µ—Ä–∏–æ–¥–∞ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–π—Ç–µ:

1. **Trial Conversion Rate** = (–ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ trial / –í—Å–µ–≥–æ –∞–∫—Ç–∏–≤–∞—Ü–∏–π trial) √ó 100%
2. **Average Days to Convert** = –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –æ—Ç –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ trial –¥–æ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏
3. **Trial Drop-off Rate** = (–ò—Å—Ç–µ–∫—à–∏–µ –±–µ–∑ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ / –í—Å–µ–≥–æ –∞–∫—Ç–∏–≤–∞—Ü–∏–π trial) √ó 100%

–¶–µ–ª–µ–≤—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏:
- Trial Conversion Rate: > 25%
- Average Days to Convert: < 7 –¥–Ω–µ–π
- Trial Drop-off Rate: < 60%

---

**–î–∞—Ç–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:** 4 –æ–∫—Ç—è–±—Ä—è 2025  
**–í–µ—Ä—Å–∏—è:** 1.0.0  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ production  
**–ú–æ–¥—É–ª–µ–π —Å trial:** 14 –º–æ–¥—É–ª–µ–π (7 –¥–Ω–µ–π trial –∫–∞–∂–¥—ã–π)

