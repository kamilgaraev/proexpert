# AI Assistant Module

–ú–æ–¥—É–ª—å —É–º–Ω–æ–≥–æ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞ –Ω–∞ –±–∞–∑–µ YandexGPT / GPT-4o-mini –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –ø—Ä–æ–µ–∫—Ç–æ–≤, –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç—á–µ—Ç–æ–≤ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –∑–∞–¥–∞—á.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- –ß–∞—Ç-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —á–µ—Ä–µ–∑ REST API –∏ WebSocket
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏ (–ø—Ä–æ–µ–∫—Ç—ã, –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã, –º–∞—Ç–µ—Ä–∏–∞–ª—ã)
- –£–º–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç –Ω–∞ –æ—Å–Ω–æ–≤–µ –∑–∞–ø—Ä–æ—Å–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –õ–∏–º–∏—Ç—ã –Ω–∞ —É—Ä–æ–≤–Ω–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
- –ò—Å—Ç–æ—Ä–∏—è –¥–∏–∞–ª–æ–≥–æ–≤
- –¢—Ä–µ–∫–∏–Ω–≥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∏ —Ä–∞—Å—Ö–æ–¥–æ–≤
- **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ YandexGPT –∏ OpenAI** - –ª–µ–≥–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é

## –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ LLM –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã

### YandexGPT / Alice AI (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –†–æ—Å—Å–∏–∏) ‚úÖ
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ VPN –∏–∑ –†–æ—Å—Å–∏–∏
- ‚úÖ –û—Ç–ª–∏—á–Ω–æ–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ —Ä—É—Å—Å–∫–æ–≥–æ —è–∑—ã–∫–∞
- ‚úÖ –£–¥–æ–±–Ω–∞—è –æ–ø–ª–∞—Ç–∞ —á–µ—Ä–µ–∑ Yandex Cloud (–∫–∞—Ä—Ç—ã –†–§)
- ‚úÖ –î–æ—Å—Ç—É–ø–Ω—ã —Ä–∞–∑–Ω—ã–µ –º–æ–¥–µ–ª–∏ —Å —Ä–∞–∑–Ω—ã–º–∏ —Ü–µ–Ω–∞–º–∏

**–î–æ—Å—Ç—É–ø–Ω—ã–µ –º–æ–¥–µ–ª–∏:**

1. **Alice AI LLM** (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è) üÜï
   - –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ –¥–ª—è –¥–∏–∞–ª–æ–≥–æ–≤ –∏ –∫—Ä–µ–∞—Ç–∏–≤–Ω—ã—Ö –∑–∞–¥–∞—á
   - –°–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π —Ä–µ–∂–∏–º: 0.50‚ÇΩ –∑–∞ 1K input, 2.00‚ÇΩ –∑–∞ 1K output
   - –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π —Ä–µ–∂–∏–º: 0.25‚ÇΩ –∑–∞ 1K input, 1.00‚ÇΩ –∑–∞ 1K output (–¥–µ—à–µ–≤–ª–µ!)
   - Model URI: `gpt://b1gbp06r4m40cduru9dg/aliceai-llm/latest`

2. **YandexGPT 5.1 Pro**
   - –ü–æ—Å–ª–µ–¥–Ω—è—è –≤–µ—Ä—Å–∏—è YandexGPT
   - –¶–µ–Ω–∞: ~‚ÇΩ400 –∑–∞ 1M —Ç–æ–∫–µ–Ω–æ–≤
   - Model URI: `gpt://b1gbp06r4m40cduru9dg/yandexgpt/latest`

3. **YandexGPT 4/5 Lite**
   - –û–±–ª–µ–≥—á–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è (–¥–µ—à–µ–≤–ª–µ)
   - Model URI: `gpt://b1gbp06r4m40cduru9dg/yandexgpt-4-lite/latest`

### DeepSeek (—Å–∞–º—ã–π –¥–µ—à–µ–≤—ã–π) üí∞
- ‚úÖ –û—á–µ–Ω—å –¥–µ—à–µ–≤–æ: ~‚ÇΩ28-42 –∑–∞ 1M —Ç–æ–∫–µ–Ω–æ–≤
- ‚úÖ –û—Ç–ª–∏—á–Ω–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ
- ‚ùå –°–ª–æ–∂–Ω–æ—Å—Ç–∏ —Å –æ–ø–ª–∞—Ç–æ–π –∏–∑ –†–æ—Å—Å–∏–∏
- Model: `deepseek-chat`

### OpenAI (–º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–π)
- –¢—Ä–µ–±—É–µ—Ç VPN –∏–∑ –†–æ—Å—Å–∏–∏
- GPT-4o-mini: ~$0.15 –∑–∞ 1M —Ç–æ–∫–µ–Ω–æ–≤
- –û—Ç–ª–∏—á–Ω–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### 1. –í—ã–±–æ—Ä –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞

#### –í–∞—Ä–∏–∞–Ω—Ç A: YandexGPT (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

**–ü–æ–ª—É—á–µ–Ω–∏–µ API –∫–ª—é—á–∞:**

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ [Yandex Cloud Console](https://console.cloud.yandex.ru/)
2. –°–æ–∑–¥–∞–π—Ç–µ **—Å–µ—Ä–≤–∏—Å–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç** (–°–µ—Ä–≤–∏—Å–Ω—ã–µ –∞–∫–∫–∞—É–Ω—Ç—ã ‚Üí –°–æ–∑–¥–∞—Ç—å)
3. –ù–∞–∑–Ω–∞—á—å—Ç–µ —Ä–æ–ª—å **`ai.languageModels.user`**
4. –°–æ–∑–¥–∞–π—Ç–µ **API-–∫–ª—é—á** (–ö–ª—é—á–∏ API ‚Üí –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –∫–ª—é—á ‚Üí API-–∫–ª—é—á)
5. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ API-–∫–ª—é—á (–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑!)
6. –ù–∞–π–¥–∏—Ç–µ **Folder ID** –≤ URL –∫–æ–Ω—Å–æ–ª–∏: `https://console.cloud.yandex.ru/folders/YOUR_FOLDER_ID`

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞ `.env`:**

```env
# LLM Provider
LLM_PROVIDER=yandex

# YandexGPT Configuration
YANDEX_API_KEY=AQVN...–≤–∞—à-–∫–ª—é—á
YANDEX_FOLDER_ID=b1gbp06r4m40cduru9dg
YANDEX_MODEL_URI=gpt://b1gbp06r4m40cduru9dg/yandexgpt/latest
YANDEX_MAX_TOKENS=2000
YANDEX_TEMPERATURE=0.7

# AI Assistant
AI_ASSISTANT_ENABLED=true
AI_ASSISTANT_DEFAULT_LIMIT=5000
AI_ASSISTANT_CACHE_TTL=3600
```

**–î–æ—Å—Ç—É–ø–Ω—ã–µ –º–æ–¥–µ–ª–∏ YandexGPT:**

1. **Alice AI LLM** (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è) üÜï
   ```env
   YANDEX_MODEL_URI=gpt://b1gbp06r4m40cduru9dg/aliceai-llm/latest
   YANDEX_USE_ASYNC=false  # true –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞ (–¥–µ—à–µ–≤–ª–µ)
   ```
   - –°–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π: 0.50‚ÇΩ/1K input, 2.00‚ÇΩ/1K output
   - –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π: 0.25‚ÇΩ/1K input, 1.00‚ÇΩ/1K output

2. **YandexGPT 5.1 Pro**
   ```env
   YANDEX_MODEL_URI=gpt://b1gbp06r4m40cduru9dg/yandexgpt/latest
   ```
   - –¶–µ–Ω–∞: ~‚ÇΩ400 –∑–∞ 1M —Ç–æ–∫–µ–Ω–æ–≤

3. **YandexGPT 4/5 Lite** (–¥–µ—à–µ–≤–ª–µ)
   ```env
   YANDEX_MODEL_URI=gpt://b1gbp06r4m40cduru9dg/yandexgpt-4-lite/latest
   # –∏–ª–∏
   YANDEX_MODEL_URI=gpt://b1gbp06r4m40cduru9dg/yandexgpt-5-lite/latest
   ```

#### –í–∞—Ä–∏–∞–Ω—Ç B: OpenAI

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞ `.env`:**

```env
# LLM Provider
LLM_PROVIDER=openai

# OpenAI Configuration
OPENAI_API_KEY=sk-your-api-key-here
OPENAI_MODEL=gpt-4o-mini
OPENAI_MAX_TOKENS=2000
OPENAI_TEMPERATURE=0.7

# AI Assistant
AI_ASSISTANT_ENABLED=true
AI_ASSISTANT_DEFAULT_LIMIT=5000
AI_ASSISTANT_CACHE_TTL=3600
```

### 2. –ó–∞–ø—É—Å–∫ –º–∏–≥—Ä–∞—Ü–∏–π

```bash
php artisan migrate
```

### 3. –ê–∫—Ç–∏–≤–∞—Ü–∏—è –º–æ–¥—É–ª—è

–ú–æ–¥—É–ª—å —É–∂–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –≤ `bootstrap/providers.php`.

## API Endpoints

### POST /api/v1/ai-assistant/chat

–û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç—É.

**Request:**
```json
{
  "message": "–ö–∞–∫–∏–µ –ø—Ä–æ–µ–∫—Ç—ã –≤ –∑–æ–Ω–µ —Ä–∏—Å–∫–∞?",
  "conversation_id": 123  // –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
}
```

**Response:**
```json
{
  "success": true,
  "data": {
    "conversation_id": 123,
    "message": {
      "id": 456,
      "role": "assistant",
      "content": "–û–±–Ω–∞—Ä—É–∂–µ–Ω–æ 2 –ø—Ä–æ–µ–∫—Ç–∞ –≤ –∑–æ–Ω–µ —Ä–∏—Å–∫–∞...",
      "created_at": "2025-10-10T12:00:00.000000Z"
    },
    "tokens_used": 1250,
    "usage": {
      "monthly_limit": 5000,
      "used": 142,
      "remaining": 4858,
      "percentage_used": 2.8
    }
  }
}
```

### GET /api/v1/ai-assistant/conversations

–ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –¥–∏–∞–ª–æ–≥–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

**Response:**
```json
{
  "success": true,
  "data": [
    {
      "id": 123,
      "title": "–ö–∞–∫–∏–µ –ø—Ä–æ–µ–∫—Ç—ã –≤ –∑–æ–Ω–µ —Ä–∏—Å–∫–∞?...",
      "created_at": "2025-10-10T12:00:00.000000Z",
      "updated_at": "2025-10-10T12:05:00.000000Z"
    }
  ]
}
```

### GET /api/v1/ai-assistant/conversations/{id}

–ü–æ–ª—É—á–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –¥–∏–∞–ª–æ–≥–∞.

**Response:**
```json
{
  "success": true,
  "data": {
    "conversation": {
      "id": 123,
      "title": "–ö–∞–∫–∏–µ –ø—Ä–æ–µ–∫—Ç—ã –≤ –∑–æ–Ω–µ —Ä–∏—Å–∫–∞?...",
      "created_at": "2025-10-10T12:00:00.000000Z"
    },
    "messages": [
      {
        "id": 1,
        "role": "user",
        "content": "–ö–∞–∫–∏–µ –ø—Ä–æ–µ–∫—Ç—ã –≤ –∑–æ–Ω–µ —Ä–∏—Å–∫–∞?",
        "created_at": "2025-10-10T12:00:00.000000Z"
      },
      {
        "id": 2,
        "role": "assistant",
        "content": "–û–±–Ω–∞—Ä—É–∂–µ–Ω–æ 2 –ø—Ä–æ–µ–∫—Ç–∞...",
        "tokens_used": 1250,
        "created_at": "2025-10-10T12:00:05.000000Z"
      }
    ]
  }
}
```

### DELETE /api/v1/ai-assistant/conversations/{id}

–£–¥–∞–ª–∏—Ç—å –¥–∏–∞–ª–æ–≥.

**Response:**
```json
{
  "success": true,
  "message": "Conversation deleted"
}
```

### GET /api/v1/ai-assistant/usage

–ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –¥–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏.

**Response:**
```json
{
  "success": true,
  "data": {
    "monthly_limit": 5000,
    "used": 142,
    "remaining": 4858,
    "percentage_used": 2.8,
    "tokens_used": 178500,
    "cost_rub": 14.25
  }
}
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ (React)

### –ü—Ä–æ—Å—Ç–æ–π –∑–∞–ø—Ä–æ—Å

```javascript
const response = await fetch('/api/v1/ai-assistant/chat', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
    'Authorization': `Bearer ${token}`
  },
  body: JSON.stringify({
    message: '–ö–∞–∫–∏–µ –ø—Ä–æ–µ–∫—Ç—ã –≤ –∑–æ–Ω–µ —Ä–∏—Å–∫–∞?'
  })
});

const data = await response.json();
console.log(data.data.message.content);
```

### –° –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ–º –¥–∏–∞–ª–æ–≥–∞

```javascript
// –ü–µ—Ä–≤—ã–π –∑–∞–ø—Ä–æ—Å
const response1 = await fetch('/api/v1/ai-assistant/chat', {
  method: 'POST',
  headers: { /* ... */ },
  body: JSON.stringify({
    message: '–ü–æ–∫–∞–∂–∏ –±—é–¥–∂–µ—Ç –ø—Ä–æ–µ–∫—Ç–æ–≤'
  })
});

const { conversation_id } = await response1.json().data;

// –°–ª–µ–¥—É—é—â–∏–π –∑–∞–ø—Ä–æ—Å –≤ —Ç–æ–º –∂–µ –¥–∏–∞–ª–æ–≥–µ
const response2 = await fetch('/api/v1/ai-assistant/chat', {
  method: 'POST',
  headers: { /* ... */ },
  body: JSON.stringify({
    message: '–ê –∫–∞–∫–∏–µ –∏–∑ –Ω–∏—Ö –≤ –∑–æ–Ω–µ —Ä–∏—Å–∫–∞?',
    conversation_id: conversation_id
  })
});
```

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

```
AIAssistantService
‚îú‚îÄ‚îÄ LLMProvider (OpenAI)
‚îú‚îÄ‚îÄ ConversationManager (–ò—Å—Ç–æ—Ä–∏—è)
‚îú‚îÄ‚îÄ ContextBuilder (–ö–æ–Ω—Ç–µ–∫—Å—Ç –∏–∑ –ë–î)
‚îú‚îÄ‚îÄ IntentRecognizer (–†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –Ω–∞–º–µ—Ä–µ–Ω–∏–π)
‚îú‚îÄ‚îÄ UsageTracker (–õ–∏–º–∏—Ç—ã –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞)
‚îî‚îÄ‚îÄ Actions
    ‚îú‚îÄ‚îÄ Projects (GetProjectStatus, GetProjectBudget, AnalyzeProjectRisks)
    ‚îú‚îÄ‚îÄ Contracts (SearchContracts, GetContractDetails)
    ‚îî‚îÄ‚îÄ Materials (CheckMaterialStock, ForecastMaterialNeeds)
```

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏

–ú–æ–¥—É–ª—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –≥–æ—Ç–æ–≤—ã–µ —Å–µ—Ä–≤–∏—Å—ã –∏–∑ `AdvancedDashboard`:
- `ProjectsStatusWidgetProvider`
- `ProjectsBudgetWidgetProvider`
- `ProjectsRisksWidgetProvider`
- `MaterialsLowStockWidgetProvider`
- `MaterialsForecastWidgetProvider`
- –ò –¥—Ä—É–≥–∏–µ...

## –õ–∏–º–∏—Ç—ã –∏ –±–∏–ª–ª–∏–Ω–≥

- –ú–æ–¥—É–ª—å: **‚ÇΩ3,990/–º–µ—Å** (–ø–æ–¥–ø–∏—Å–∫–∞)
- –õ–∏–º–∏—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: **5,000 –∑–∞–ø—Ä–æ—Å–æ–≤/–º–µ—Å—è—Ü**
- –õ–∏–º–∏—Ç—ã —Å—á–∏—Ç–∞—é—Ç—Å—è –Ω–∞ —É—Ä–æ–≤–Ω–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
- –°–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å: ~‚ÇΩ100/–º–µ—Å—è—Ü –ø—Ä–∏ –ø–æ–ª–Ω–æ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –ª–∏–º–∏—Ç–∞

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

–í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –ª–æ–≥–∏—Ä—É—é—Ç—Å—è —á–µ—Ä–µ–∑ `LoggingService`:

```php
// Business logs
'ai.assistant.request'
'ai.assistant.success'

// Technical logs
'ai.openai.request'
'ai.openai.success'
'ai.openai.error'
```

## –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤

AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –ø–æ–Ω–∏–º–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ —Ç–∏–ø—ã –∑–∞–ø—Ä–æ—Å–æ–≤:

**–°—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–æ–≤:**
- "–ö–∞–∫–∏–µ –ø—Ä–æ–µ–∫—Ç—ã —Å–µ–π—á–∞—Å –∞–∫—Ç–∏–≤–Ω—ã?"
- "–ü–æ–∫–∞–∂–∏ —Ç–µ–∫—É—â–∏–µ –ø—Ä–æ–µ–∫—Ç—ã"
- "–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å –ø—Ä–æ–µ–∫—Ç–∞–º–∏?"

**–ë—é–¥–∂–µ—Ç:**
- "–°–∫–æ–ª—å–∫–æ –ø–æ—Ç—Ä–∞—á–µ–Ω–æ –ø–æ –ø—Ä–æ–µ–∫—Ç–∞–º?"
- "–ö–∞–∫–æ–π –±—é–¥–∂–µ—Ç –æ—Å—Ç–∞–ª–æ—Å—å?"
- "–ü–æ–∫–∞–∂–∏ —Ä–∞—Å—Ö–æ–¥—ã"

**–†–∏—Å–∫–∏:**
- "–ö–∞–∫–∏–µ –ø—Ä–æ–µ–∫—Ç—ã –≤ –∑–æ–Ω–µ —Ä–∏—Å–∫–∞?"
- "–ï—Å—Ç—å –ª–∏ –ø—Ä–æ–±–ª–µ–º—ã?"
- "–ß—Ç–æ –º–æ–∂–µ—Ç —Å–æ—Ä–≤–∞—Ç—å—Å—è?"

**–ö–æ–Ω—Ç—Ä–∞–∫—Ç—ã:**
- "–ü–æ–∫–∞–∂–∏ –∫–æ–Ω—Ç—Ä–∞–∫—Ç ‚Ññ45/2025"
- "–ù–∞–π–¥–∏ –¥–æ–≥–æ–≤–æ—Ä—ã —Å–æ –°—Ç—Ä–æ–π–ò–Ω–≤–µ—Å—Ç"

**–ú–∞—Ç–µ—Ä–∏–∞–ª—ã:**
- "–ö–∞–∫–∏–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã –∑–∞–∫–∞–Ω—á–∏–≤–∞—é—Ç—Å—è?"
- "–•–≤–∞—Ç–∏—Ç –ª–∏ —Ü–µ–º–µ–Ω—Ç–∞?"
- "–ß—Ç–æ –Ω—É–∂–Ω–æ –∑–∞–∫—É–ø–∏—Ç—å?"

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ Action

1. –°–æ–∑–¥–∞–π—Ç–µ –∫–ª–∞—Å—Å –≤ `Actions/`
2. –†–µ–∞–ª–∏–∑—É–π—Ç–µ –º–µ—Ç–æ–¥ `execute()`
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Å–µ—Ä–≤–∏—Å—ã –∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã
4. –û–±–Ω–æ–≤–∏—Ç–µ `IntentRecognizer` –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

–ü—Ä–∏–º–µ—Ä:

```php
namespace App\BusinessModules\Features\AIAssistant\Actions\Custom;

class CustomAction
{
    public function execute(int $organizationId, ?array $params = []): array
    {
        // –í–∞—à–∞ –ª–æ–≥–∏–∫–∞
        return [
            'data' => $result
        ];
    }
}
```

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –í—Å–µ endpoints –∑–∞—â–∏—â–µ–Ω—ã `auth:api` middleware
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–Ω–æ—Å—Ç–∏ –¥–∏–∞–ª–æ–≥–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
- –õ–∏–º–∏—Ç—ã –Ω–∞ —É—Ä–æ–≤–Ω–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ (5 –º–∏–Ω)
- –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è (10 –º–∏–Ω)
- –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —á–µ—Ä–µ–∑ –æ—á–µ—Ä–µ–¥–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–æ–≤ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ

## Troubleshooting

### "OpenAI API key not configured"

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ `.env`:
```env
OPENAI_API_KEY=sk-...
```

### "AI_LIMIT_EXCEEDED"

–û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –∏—Å—á–µ—Ä–ø–∞–ª–∞ –º–µ—Å—è—á–Ω—ã–π –ª–∏–º–∏—Ç. –ú–æ–∂–Ω–æ:
1. –£–≤–µ–ª–∏—á–∏—Ç—å –ª–∏–º–∏—Ç –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –º–æ–¥—É–ª—è
2. –î–æ–∂–¥–∞—Ç—å—Å—è –Ω–∞—á–∞–ª–∞ —Å–ª–µ–¥—É—é—â–µ–≥–æ –º–µ—Å—è—Ü–∞
3. –û–±–Ω–æ–≤–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É

### –ú–µ–¥–ª–µ–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–∑–º–µ—Ä –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
2. –£–º–µ–Ω—å—à–∏—Ç–µ `max_tokens` –≤ –∫–æ–Ω—Ñ–∏–≥–µ
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —á–∞—Å—Ç—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

## Roadmap

- [ ] WebSocket real-time –æ—Ç–≤–µ—Ç—ã
- [ ] Telegram –±–æ—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- [ ] RAG —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- [ ] Function calling –¥–ª—è –¥–µ–π—Å—Ç–≤–∏–π
- [ ] –ì–æ–ª–æ—Å–æ–≤–æ–π –≤–≤–æ–¥
- [ ] –ü—Ä–æ–∞–∫—Ç–∏–≤–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

