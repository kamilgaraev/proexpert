# üöÄ –ò–ù–°–¢–†–£–ö–¶–ò–Ø: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–∏—Å—Ç–µ–º—ã –ø–æ–¥–¥–æ–º–µ–Ω–æ–≤ —Ö–æ–ª–¥–∏–Ω–≥–æ–≤

## üìã –ß–¢–û –£–ñ–ï –ì–û–¢–û–í–û (–ö–û–î)
‚úÖ Middleware –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø–æ–¥–¥–æ–º–µ–Ω–æ–≤  
‚úÖ –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä —Ö–æ–ª–¥–∏–Ω–≥–æ–≤—ã—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤  
‚úÖ –†–æ—É—Ç–∏–Ω–≥ –¥–ª—è –ø–æ–¥–¥–æ–º–µ–Ω–æ–≤  
‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Nginx  
‚úÖ –°–∫—Ä–∏–ø—Ç SSL –Ω–∞—Å—Ç—Ä–æ–π–∫–∏  

## üîß –ß–¢–û –ù–£–ñ–ù–û –°–î–ï–õ–ê–¢–¨ –í–ê–ú

### 1Ô∏è‚É£ **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ DNS –≤ reg.ru (10 –º–∏–Ω—É—Ç)**

#### –ó–∞–π–¥–∏—Ç–µ –≤ –ø–∞–Ω–µ–ª—å reg.ru:
- –û—Ç–∫—Ä–æ–π—Ç–µ https://www.reg.ru/user/account
- –ù–∞–π–¥–∏—Ç–µ –¥–æ–º–µ–Ω `prohelper.pro`
- –ù–∞–∂–º–∏—Ç–µ "–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ" ‚Üí "DNS-—Å–µ—Ä–≤–µ—Ä—ã –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–æ–Ω–æ–π" ‚Üí "–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∑–æ–Ω—É"

#### –î–æ–±–∞–≤—å—Ç–µ DNS –∑–∞–ø–∏—Å–∏:

**–û—Å–Ω–æ–≤–Ω–∞—è –∑–∞–ø–∏—Å—å:**
```
–¢–∏–ø: A
–ò–º—è: @
–ó–Ω–∞—á–µ–Ω–∏–µ: 89.111.153.146
TTL: 300
```

**‚≠ê –í–ê–ñ–ù–û! Wildcard –∑–∞–ø–∏—Å—å:**
```
–¢–∏–ø: A
–ò–º—è: *
–ó–Ω–∞—á–µ–Ω–∏–µ: 89.111.153.146
TTL: 300
```

**WWW –∑–∞–ø–∏—Å—å:**
```
–¢–∏–ø: A
–ò–º—è: www
–ó–Ω–∞—á–µ–Ω–∏–µ: 89.111.153.146
TTL: 300
```

#### –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏ –ø–æ–¥–æ–∂–¥–∏—Ç–µ 15 –º–∏–Ω—É—Ç

### 2Ô∏è‚É£ **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ SSL –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ (15 –º–∏–Ω—É—Ç)**

#### –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä:
```bash
# –ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–∞–π–ª—ã –≤ –ø–∞–ø–∫—É /tmp –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:
scp scripts/nginx-config.conf root@89.111.153.146:/tmp/
scp scripts/ssl-setup.sh root@89.111.153.146:/tmp/
```

#### –ó–∞–ø—É—Å—Ç–∏—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫—É SSL:
```bash
# –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É
ssh root@89.111.153.146

# –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –ø–∞–ø–∫—É —Å —Ñ–∞–π–ª–∞–º–∏
cd /tmp

# –°–¥–µ–ª–∞–π—Ç–µ —Å–∫—Ä–∏–ø—Ç –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º
chmod +x ssl-setup.sh

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫—É
sudo ./ssl-setup.sh
```

#### ‚ö†Ô∏è –í–ê–ñ–ù–û! –ü—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ TXT –∑–∞–ø–∏—Å–∏:
1. Certbot –ø–æ–∫–∞–∂–µ—Ç TXT –∑–∞–ø–∏—Å—å —Ç–∏–ø–∞: `_acme-challenge.prohelper.pro`
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —ç—Ç—É –∑–∞–ø–∏—Å—å
3. –î–æ–±–∞–≤—å—Ç–µ –≤ reg.ru –ø–∞–Ω–µ–ª–∏:
   ```
   –¢–∏–ø: TXT
   –ò–º—è: _acme-challenge
   –ó–Ω–∞—á–µ–Ω–∏–µ: (—Ç–æ —á—Ç–æ –ø–æ–∫–∞–∑–∞–ª Certbot)
   TTL: 300
   ```
4. –ü–æ–¥–æ–∂–¥–∏—Ç–µ 2-3 –º–∏–Ω—É—Ç—ã
5. –ù–∞–∂–º–∏—Ç–µ Enter –≤ Certbot

### 3Ô∏è‚É£ **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ .env**

–î–æ–±–∞–≤—å—Ç–µ –≤ —Ñ–∞–π–ª `.env`:
```
APP_DOMAIN=prohelper.pro
```

### 4Ô∏è‚É£ **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**

#### –ü—Ä–æ–≤–µ—Ä—å—Ç–µ DNS:
```bash
nslookup prohelper.pro
nslookup test.prohelper.pro
# –î–æ–ª–∂–Ω—ã –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å 89.111.153.146
```

#### –°–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π —Ö–æ–ª–¥–∏–Ω–≥:
1. –ó–∞–π–¥–∏—Ç–µ –≤ –∞–¥–º–∏–Ω–∫—É Laravel
2. –°–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π —Ö–æ–ª–¥–∏–Ω–≥ —Å–æ slug `test`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ: `https://test.prohelper.pro`

## üéØ –†–ï–ó–£–õ–¨–¢–ê–¢

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —É –≤–∞—Å –±—É–¥–µ—Ç:
- ‚úÖ `prohelper.pro` - –æ—Å–Ω–æ–≤–Ω–æ–π —Å–∞–π—Ç/–õ–ö
- ‚úÖ `company1.prohelper.pro` - –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Ö–æ–ª–¥–∏–Ω–≥–∞ 1
- ‚úÖ `company2.prohelper.pro` - –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Ö–æ–ª–¥–∏–Ω–≥–∞ 2
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π SSL –¥–ª—è –≤—Å–µ—Ö –ø–æ–¥–¥–æ–º–µ–Ω–æ–≤
- ‚úÖ API endpoints –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ö–æ–ª–¥–∏–Ω–≥–∞–º–∏

## üÜò –ï–°–õ–ò –ß–¢–û-–¢–û –ù–ï –†–ê–ë–û–¢–ê–ï–¢

**DNS –Ω–µ —Ä–µ–∑–æ–ª–≤–∏—Ç—Å—è:**
- –ü–æ–¥–æ–∂–¥–∏—Ç–µ –¥–æ 24 —á–∞—Å–æ–≤ –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ wildcard –∑–∞–ø–∏—Å—å `*` –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ

**SSL –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ TXT –∑–∞–ø–∏—Å—å –±—ã–ª–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ DNS
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `sudo tail -f /var/log/letsencrypt/letsencrypt.log`

**404 –Ω–∞ –ø–æ–¥–¥–æ–º–µ–Ω–µ:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ —Ö–æ–ª–¥–∏–Ω–≥ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ slug —Ö–æ–ª–¥–∏–Ω–≥–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π

## üìû –ì–û–¢–û–í–û –ö –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Æ

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö —à–∞–≥–æ–≤ –Ω–∞–ø–∏—à–∏—Ç–µ –º–Ω–µ - –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–µ–º —Å–æ–∑–¥–∞–Ω–∏–µ –ø–µ—Ä–≤–æ–≥–æ —Ö–æ–ª–¥–∏–Ω–≥–∞! 