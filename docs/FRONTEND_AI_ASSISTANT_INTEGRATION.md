# –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ AI-–ê—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞ –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞

## üìã –û–±—â–∞—è –∫–æ–Ω—Ü–µ–ø—Ü–∏—è

–ù–µ–æ–±—Ö–æ–¥–∏–º–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å **–ø–ª–∞–≤–∞—é—â–∏–π —á–∞—Ç-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç** –≤ –≤–∏–¥–µ —à–∞—Ä–∏–∫–∞ –≤ –ø—Ä–∞–≤–æ–º –Ω–∏–∂–Ω–µ–º —É–≥–ª—É —ç–∫—Ä–∞–Ω–∞. –ü—Ä–∏ –∫–ª–∏–∫–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è —á–∞—Ç —Å AI-–ø–æ–º–æ—â–Ω–∏–∫–æ–º.

## üé® UI/UX –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –í–Ω–µ—à–Ω–∏–π –≤–∏–¥

**–ü–ª–∞–≤–∞—é—â–∞—è –∫–Ω–æ–ø–∫–∞ (FAB - Floating Action Button):**
- **–ü–æ–∑–∏—Ü–∏—è:** –ü—Ä–∞–≤—ã–π –Ω–∏–∂–Ω–∏–π —É–≥–æ–ª —ç–∫—Ä–∞–Ω–∞ (fixed position)
- **–û—Ç—Å—Ç—É–ø—ã:** ~24px –æ—Ç –∫—Ä–∞–µ–≤
- **–†–∞–∑–º–µ—Ä:** 56x56px –∏–ª–∏ 64x64px
- **–ò–∫–æ–Ω–∫–∞:** –ò–∫–æ–Ω–∫–∞ –±–æ—Ç–∞/—á–∞—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `üí¨` –∏–ª–∏ bot icon)
- **–¶–≤–µ—Ç:** –ê–∫—Ü–µ–Ω—Ç–Ω—ã–π —Ü–≤–µ—Ç –≤–∞—à–µ–π —Ç–µ–º—ã (—Å–∏–Ω–∏–π/—Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–π)
- **z-index:** –í—ã—Å–æ–∫–∏–π (999 –∏–ª–∏ –≤—ã—à–µ), —á—Ç–æ–±—ã –±—ã–ª –ø–æ–≤–µ—Ä—Ö –≤—Å–µ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- **–¢–µ–Ω—å:** Material Design shadow –¥–ª—è –æ–±—ä–µ–º–∞
- **–ê–Ω–∏–º–∞—Ü–∏—è:** –ü–ª–∞–≤–Ω–æ–µ –ø–æ—è–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

**–û–∫–Ω–æ —á–∞—Ç–∞:**
- **–†–∞–∑–º–µ—Ä:** 400px —à–∏—Ä–∏–Ω–∞ √ó 600px –≤—ã—Å–æ—Ç–∞ (desktop)
- **–ü–æ–∑–∏—Ü–∏—è:** –°–ø—Ä–∞–≤–∞ –≤–Ω–∏–∑—É, –Ω–∞–¥ –∫–Ω–æ–ø–∫–æ–π
- **Mobile:** –ù–∞ –≤–µ—Å—å —ç–∫—Ä–∞–Ω –∏–ª–∏ 90% –≤—ã—Å–æ—Ç—ã
- **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
  - –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å –Ω–∞–∑–≤–∞–Ω–∏–µ–º "AI –ê—Å—Å–∏—Å—Ç–µ–Ω—Ç" –∏ –∫–Ω–æ–ø–∫–æ–π –∑–∞–∫—Ä—ã—Ç–∏—è
  - –û–±–ª–∞—Å—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–π (—Å–∫—Ä–æ–ª–ª)
  - –ü–æ–ª–µ –≤–≤–æ–¥–∞ –≤–Ω–∏–∑—É
  - –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä "AI –¥—É–º–∞–µ—Ç..." –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ

### –ü–æ–≤–µ–¥–µ–Ω–∏–µ

1. **–ü—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ —à–∞—Ä–∏–∫:**
   - –û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –æ–∫–Ω–æ —á–∞—Ç–∞ —Å –ø–ª–∞–≤–Ω–æ–π –∞–Ω–∏–º–∞—Ü–∏–µ–π (slide-up –∏–ª–∏ fade-in)
   - –®–∞—Ä–∏–∫ –æ—Å—Ç–∞–µ—Ç—Å—è –≤–∏–¥–∏–º—ã–º –∏–ª–∏ –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ –∏–∫–æ–Ω–∫—É –∑–∞–∫—Ä—ã—Ç–∏—è

2. **–ü—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Å–æ–æ–±—â–µ–Ω–∏—è:**
   - –°–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ —á–∞—Ç
   - –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏ "AI –¥—É–º–∞–µ—Ç..."
   - –ü–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è –æ—Ç–≤–µ—Ç–∞ - –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç AI
   - –ê–≤—Ç–æ—Å–∫—Ä–æ–ª–ª –∫ –ø–æ—Å–ª–µ–¥–Ω–µ–º—É —Å–æ–æ–±—â–µ–Ω–∏—é

3. **–ü—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏:**
   - –û–∫–Ω–æ —Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è —Å –∞–Ω–∏–º–∞—Ü–∏–µ–π
   - –ò—Å—Ç–æ—Ä–∏—è –¥–∏–∞–ª–æ–≥–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è (conversation_id)
   - –ü—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º –æ—Ç–∫—Ä—ã—Ç–∏–∏ - –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏—Å—Ç–æ—Ä–∏—è

---

## üîå API Endpoints

### –ë–∞–∑–æ–≤—ã–π URL

**–î–ª—è –õ–∏—á–Ω–æ–≥–æ –∫–∞–±–∏–Ω–µ—Ç–∞ (–õ–ö):**
```
https://your-domain.com/api/v1/ai-assistant
```

**–î–ª—è –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏:**
```
https://your-domain.com/api/v1/admin/ai-assistant
```

### –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

**–î–ª—è –õ–ö:**
```
Authorization: Bearer YOUR_ACCESS_TOKEN
```

**–î–ª—è –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏:**
```
Authorization: Bearer YOUR_ADMIN_ACCESS_TOKEN
```

> **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** API endpoints –∏–¥–µ–Ω—Ç–∏—á–Ω—ã –¥–ª—è –æ–±–æ–∏—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤, –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–µ—Ñ–∏–∫—Å (`/api/v1/ai-assistant` vs `/api/v1/admin/ai-assistant`)

---

## üì° API –ú–µ—Ç–æ–¥—ã

### 1. –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ AI

**Endpoint:** 
- –õ–ö: `POST /api/v1/ai-assistant/chat`
- –ê–¥–º–∏–Ω: `POST /api/v1/admin/ai-assistant/chat`

**–û–ø–∏—Å–∞–Ω–∏–µ:** –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ AI –∏ –ø–æ–ª—É—á–∞–µ—Ç –æ—Ç–≤–µ—Ç. –°–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–π –¥–∏–∞–ª–æ–≥ –∏–ª–∏ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π.

**Request Body:**
```json
{
  "message": "–ö–∞–∫–∏–µ –ø—Ä–æ–µ–∫—Ç—ã –≤ –∑–æ–Ω–µ —Ä–∏—Å–∫–∞?",
  "conversation_id": 123  // –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è –¥–∏–∞–ª–æ–≥–∞
}
```

**Response (Success - 200):**
```json
{
  "success": true,
  "data": {
    "conversation_id": 123,
    "message": {
      "id": 456,
      "role": "assistant",
      "content": "–û–±–Ω–∞—Ä—É–∂–µ–Ω–æ 2 –ø—Ä–æ–µ–∫—Ç–∞ –≤ –∑–æ–Ω–µ —Ä–∏—Å–∫–∞:\n\n1. **–ñ–ö ¬´–°–µ–≤–µ—Ä–Ω—ã–π¬ª** - –ø—Ä–æ—Å—Ä–æ—á–∫–∞ –Ω–∞ 5 –¥–Ω–µ–π...",
      "tokens_used": 1250,
      "created_at": "2025-10-10T12:00:00.000000Z"
    },
    "usage": {
      "monthly_limit": 5000,
      "used": 142,
      "remaining": 4858,
      "percentage_used": 2.8
    }
  }
}
```

**Response (Error - 422):**
```json
{
  "success": false,
  "message": "Validation failed",
  "errors": {
    "message": ["–ü–æ–ª–µ message –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è"]
  }
}
```

**Response (Error - 429 - –õ–∏–º–∏—Ç –∏—Å—á–µ—Ä–ø–∞–Ω):**
```json
{
  "success": false,
  "error": "AI_LIMIT_EXCEEDED",
  "message": "–ú–µ—Å—è—á–Ω—ã–π –ª–∏–º–∏—Ç –∑–∞–ø—Ä–æ—Å–æ–≤ –∏—Å—á–µ—Ä–ø–∞–Ω",
  "data": {
    "limit": 5000,
    "used": 5000,
    "reset_at": "2025-11-01T00:00:00.000000Z"
  }
}
```

---

### 2. –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –¥–∏–∞–ª–æ–≥–æ–≤

**Endpoint:** 
- –õ–ö: `GET /api/v1/ai-assistant/conversations`
- –ê–¥–º–∏–Ω: `GET /api/v1/admin/ai-assistant/conversations`

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –¥–∏–∞–ª–æ–≥–æ–≤ —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–ø–æ—Å–ª–µ–¥–Ω–∏–µ —Å–≤–µ—Ä—Ö—É).

**Query Parameters:**
- `page` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) - –Ω–æ–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 1)
- `per_page` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 15)

**Request Example:**
```
GET /api/v1/ai-assistant/conversations?page=1&per_page=10
```

**Response (Success - 200):**
```json
{
  "success": true,
  "data": [
    {
      "id": 123,
      "title": "–ö–∞–∫–∏–µ –ø—Ä–æ–µ–∫—Ç—ã –≤ –∑–æ–Ω–µ —Ä–∏—Å–∫–∞?...",
      "created_at": "2025-10-10T12:00:00.000000Z",
      "updated_at": "2025-10-10T12:05:00.000000Z"
    },
    {
      "id": 122,
      "title": "–ü–æ–∫–∞–∂–∏ –±—é–¥–∂–µ—Ç –ø—Ä–æ–µ–∫—Ç–æ–≤...",
      "created_at": "2025-10-09T15:30:00.000000Z",
      "updated_at": "2025-10-09T15:35:00.000000Z"
    }
  ],
  "meta": {
    "current_page": 1,
    "per_page": 10,
    "total": 25
  }
}
```

---

### 3. –ü–æ–ª—É—á–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é –¥–∏–∞–ª–æ–≥–∞

**Endpoint:** 
- –õ–ö: `GET /api/v1/ai-assistant/conversations/{id}`
- –ê–¥–º–∏–Ω: `GET /api/v1/admin/ai-assistant/conversations/{id}`

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ü–æ–ª—É—á–∏—Ç—å –ø–æ–ª–Ω—É—é –∏—Å—Ç–æ—Ä–∏—é –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –¥–∏–∞–ª–æ–≥–∞ —Å–æ –≤—Å–µ–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏.

**Request Example:**
```
GET /api/v1/ai-assistant/conversations/123
```

**Response (Success - 200):**
```json
{
  "success": true,
  "data": {
    "conversation": {
      "id": 123,
      "title": "–ö–∞–∫–∏–µ –ø—Ä–æ–µ–∫—Ç—ã –≤ –∑–æ–Ω–µ —Ä–∏—Å–∫–∞?...",
      "created_at": "2025-10-10T12:00:00.000000Z",
      "updated_at": "2025-10-10T12:05:00.000000Z"
    },
    "messages": [
      {
        "id": 1,
        "role": "user",
        "content": "–ö–∞–∫–∏–µ –ø—Ä–æ–µ–∫—Ç—ã –≤ –∑–æ–Ω–µ —Ä–∏—Å–∫–∞?",
        "created_at": "2025-10-10T12:00:00.000000Z"
      },
      {
        "id": 2,
        "role": "assistant",
        "content": "–û–±–Ω–∞—Ä—É–∂–µ–Ω–æ 2 –ø—Ä–æ–µ–∫—Ç–∞ –≤ –∑–æ–Ω–µ —Ä–∏—Å–∫–∞...",
        "tokens_used": 1250,
        "created_at": "2025-10-10T12:00:05.000000Z"
      },
      {
        "id": 3,
        "role": "user",
        "content": "–†–∞—Å—Å–∫–∞–∂–∏ –ø–æ–¥—Ä–æ–±–Ω–µ–µ –ø—Ä–æ –ø–µ—Ä–≤—ã–π –ø—Ä–æ–µ–∫—Ç",
        "created_at": "2025-10-10T12:01:00.000000Z"
      },
      {
        "id": 4,
        "role": "assistant",
        "content": "–ñ–ö ¬´–°–µ–≤–µ—Ä–Ω—ã–π¬ª –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –∑–æ–Ω–µ —Ä–∏—Å–∫–∞ –ø–æ —Å–ª–µ–¥—É—é—â–∏–º –ø—Ä–∏—á–∏–Ω–∞–º...",
        "tokens_used": 980,
        "created_at": "2025-10-10T12:01:04.000000Z"
      }
    ]
  }
}
```

**Response (Error - 404):**
```json
{
  "success": false,
  "message": "–î–∏–∞–ª–æ–≥ –Ω–µ –Ω–∞–π–¥–µ–Ω"
}
```

---

### 4. –£–¥–∞–ª–∏—Ç—å –¥–∏–∞–ª–æ–≥

**Endpoint:** 
- –õ–ö: `DELETE /api/v1/ai-assistant/conversations/{id}`
- –ê–¥–º–∏–Ω: `DELETE /api/v1/admin/ai-assistant/conversations/{id}`

**–û–ø–∏—Å–∞–Ω–∏–µ:** –£–¥–∞–ª–∏—Ç—å –¥–∏–∞–ª–æ–≥ –∏ –≤—Å—é –µ–≥–æ –∏—Å—Ç–æ—Ä–∏—é.

**Request Example:**
```
DELETE /api/v1/ai-assistant/conversations/123
```

**Response (Success - 200):**
```json
{
  "success": true,
  "message": "Conversation deleted"
}
```

**Response (Error - 404):**
```json
{
  "success": false,
  "message": "–î–∏–∞–ª–æ–≥ –Ω–µ –Ω–∞–π–¥–µ–Ω"
}
```

---

### 5. –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

**Endpoint:** 
- –õ–ö: `GET /api/v1/ai-assistant/usage`
- –ê–¥–º–∏–Ω: `GET /api/v1/admin/ai-assistant/usage`

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞ –¥–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ (—Ç–µ–∫—É—â–∏–π –º–µ—Å—è—Ü).

**Request Example:**
```
GET /api/v1/ai-assistant/usage
```

**Response (Success - 200):**
```json
{
  "success": true,
  "data": {
    "monthly_limit": 5000,
    "used": 142,
    "remaining": 4858,
    "percentage_used": 2.8,
    "tokens_used": 178500,
    "cost_rub": 71.40
  }
}
```

---

## üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –∏ –Ω–∞–ø—É—Ç—Å—Ç–≤–∏—è

### 1. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- **React Context** –∏–ª–∏ **Zustand** –¥–ª—è –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è —á–∞—Ç–∞
- **React Query / SWR** –¥–ª—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è API –∑–∞–ø—Ä–æ—Å–∞–º–∏

**–ü—Ä–∏–º–µ—Ä —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Å–æ—Å—Ç–æ—è–Ω–∏—è:**
```typescript
interface ChatState {
  isOpen: boolean;
  currentConversationId: number | null;
  messages: Message[];
  isLoading: boolean;
  conversations: Conversation[];
}
```

### 2. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è UX

**–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ:**
- ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- ‚úÖ –ê–≤—Ç–æ—Å–∫—Ä–æ–ª–ª –∫ –ø–æ—Å–ª–µ–¥–Ω–µ–º—É —Å–æ–æ–±—â–µ–Ω–∏—é
- ‚úÖ –°–æ—Ö—Ä–∞–Ω—è—Ç—å `conversation_id` –¥–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è –¥–∏–∞–ª–æ–≥–∞
- ‚úÖ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –æ—à–∏–±–∫–∏ (–æ—Å–æ–±–µ–Ω–Ω–æ –ª–∏–º–∏—Ç –∑–∞–ø—Ä–æ—Å–æ–≤)
- ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø—Ä–æ—Ü–µ–Ω—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ª–∏–º–∏—Ç–∞

**–ñ–µ–ª–∞—Ç–µ–ª—å–Ω–æ:**
- üìå Markdown —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –≤ –æ—Ç–≤–µ—Ç–∞—Ö AI (–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `react-markdown`)
- üìå –ö–Ω–æ–ø–∫–∞ "–ù–æ–≤—ã–π –¥–∏–∞–ª–æ–≥" –¥–ª—è –Ω–∞—á–∞–ª–∞ —Å–≤–µ–∂–µ–≥–æ —Ä–∞–∑–≥–æ–≤–æ—Ä–∞
- üìå –°–ø–∏—Å–æ–∫ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –¥–∏–∞–ª–æ–≥–æ–≤ (sidebar)
- üìå –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤ –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞
- üìå –ü–æ–¥—Å–≤–µ—Ç–∫–∞ –∫–æ–¥–∞ –≤ –æ—Ç–≤–µ—Ç–∞—Ö

### 3. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

**–¢–∏–ø–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏:**

| –ö–æ–¥ | –û—à–∏–±–∫–∞ | –ß—Ç–æ –ø–æ–∫–∞–∑–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é |
|-----|--------|---------------------------|
| 401 | Unauthorized | "–ù–µ–æ–±—Ö–æ–¥–∏–º–æ –≤–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É" |
| 422 | Validation Error | –ü–æ–∫–∞–∑–∞—Ç—å –æ—à–∏–±–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ |
| 429 | Rate Limit | "–õ–∏–º–∏—Ç –∑–∞–ø—Ä–æ—Å–æ–≤ –∏—Å—á–µ—Ä–ø–∞–Ω. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∑–∞–≤—Ç—Ä–∞ –∏–ª–∏ –æ–±–Ω–æ–≤–∏—Ç–µ —Ç–∞—Ä–∏—Ñ" |
| 500 | Server Error | "–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ" |

### 4. –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

**–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:**
- –õ–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ —á–∞—Ç–∞ (React.lazy)
- –í–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è —Å–ø–∏—Å–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –¥–ª—è –¥–ª–∏–Ω–Ω—ã—Ö –¥–∏–∞–ª–æ–≥–æ–≤ (react-window)
- Debounce –¥–ª—è –ø–æ–ª—è –≤–≤–æ–¥–∞ (–µ—Å–ª–∏ –±—É–¥–µ—Ç –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ)

### 5. Accessibility (A11y)

- ‚ôø –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–Ω–æ–π –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ (Enter –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏)
- ‚ôø ARIA-labels –¥–ª—è –∫–Ω–æ–ø–æ–∫
- ‚ôø –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å–µ–º–∞–Ω—Ç–∏–∫–∞ HTML
- ‚ôø Focus management –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏/–∑–∞–∫—Ä—ã—Ç–∏–∏

---

## üéØ –ü—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞

### –ë–∞–∑–æ–≤—ã–π React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç (TypeScript)

```typescript
import React, { useState } from 'react';
import axios from 'axios';

interface Message {
  id: number;
  role: 'user' | 'assistant';
  content: string;
  created_at: string;
}

const AIAssistant: React.FC = () => {
  const [isOpen, setIsOpen] = useState(false);
  const [messages, setMessages] = useState<Message[]>([]);
  const [input, setInput] = useState('');
  const [isLoading, setIsLoading] = useState(false);
  const [conversationId, setConversationId] = useState<number | null>(null);

  const sendMessage = async () => {
    if (!input.trim()) return;

    const userMessage = {
      id: Date.now(),
      role: 'user' as const,
      content: input,
      created_at: new Date().toISOString(),
    };

    setMessages([...messages, userMessage]);
    setInput('');
    setIsLoading(true);

    try {
      const response = await axios.post('/api/v1/ai-assistant/chat', {
        message: input,
        conversation_id: conversationId,
      });

      const { conversation_id, message } = response.data.data;
      
      setConversationId(conversation_id);
      setMessages((prev) => [...prev, message]);
    } catch (error) {
      console.error('AI Error:', error);
      // –ü–æ–∫–∞–∑–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ
    } finally {
      setIsLoading(false);
    }
  };

  return (
    <>
      {/* –ü–ª–∞–≤–∞—é—â–∞—è –∫–Ω–æ–ø–∫–∞ */}
      <button
        className="fixed bottom-6 right-6 w-14 h-14 bg-blue-600 rounded-full shadow-lg hover:bg-blue-700"
        onClick={() => setIsOpen(!isOpen)}
      >
        üí¨
      </button>

      {/* –û–∫–Ω–æ —á–∞—Ç–∞ */}
      {isOpen && (
        <div className="fixed bottom-24 right-6 w-96 h-[600px] bg-white rounded-lg shadow-2xl flex flex-col">
          {/* –ó–∞–≥–æ–ª–æ–≤–æ–∫ */}
          <div className="p-4 border-b flex justify-between items-center">
            <h3 className="font-semibold">AI –ê—Å—Å–∏—Å—Ç–µ–Ω—Ç</h3>
            <button onClick={() => setIsOpen(false)}>‚úï</button>
          </div>

          {/* –°–æ–æ–±—â–µ–Ω–∏—è */}
          <div className="flex-1 overflow-y-auto p-4 space-y-4">
            {messages.map((msg) => (
              <div
                key={msg.id}
                className={`flex ${msg.role === 'user' ? 'justify-end' : 'justify-start'}`}
              >
                <div
                  className={`max-w-[80%] p-3 rounded-lg ${
                    msg.role === 'user'
                      ? 'bg-blue-600 text-white'
                      : 'bg-gray-100 text-gray-900'
                  }`}
                >
                  {msg.content}
                </div>
              </div>
            ))}
            {isLoading && (
              <div className="flex justify-start">
                <div className="bg-gray-100 p-3 rounded-lg">
                  AI –¥—É–º–∞–µ—Ç...
                </div>
              </div>
            )}
          </div>

          {/* –ü–æ–ª–µ –≤–≤–æ–¥–∞ */}
          <div className="p-4 border-t">
            <div className="flex gap-2">
              <input
                type="text"
                value={input}
                onChange={(e) => setInput(e.target.value)}
                onKeyPress={(e) => e.key === 'Enter' && sendMessage()}
                placeholder="–ó–∞–¥–∞–π—Ç–µ –≤–æ–ø—Ä–æ—Å..."
                className="flex-1 px-3 py-2 border rounded-lg"
                disabled={isLoading}
              />
              <button
                onClick={sendMessage}
                disabled={isLoading || !input.trim()}
                className="px-4 py-2 bg-blue-600 text-white rounded-lg disabled:opacity-50"
              >
                ‚û§
              </button>
            </div>
          </div>
        </div>
      )}
    </>
  );
};

export default AIAssistant;
```

---

## üöÄ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ –ø—Ä–æ–µ–∫—Ç

### –®–∞–≥ 1: –î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç

```typescript
// App.tsx –∏–ª–∏ Layout.tsx
import AIAssistant from './components/AIAssistant';

function App() {
  return (
    <>
      {/* –í–∞—à –æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç */}
      <MainContent />
      
      {/* AI –ê—Å—Å–∏—Å—Ç–µ–Ω—Ç - –±—É–¥–µ—Ç –Ω–∞ –≤—Å–µ—Ö —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö */}
      <AIAssistant />
    </>
  );
}
```

### –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å axios

```typescript
// api/client.ts
import axios from 'axios';

const apiClient = axios.create({
  baseURL: process.env.REACT_APP_API_URL || 'http://localhost:8000/api/v1',
  headers: {
    'Content-Type': 'application/json',
  },
});

// –î–æ–±–∞–≤–∏—Ç—å —Ç–æ–∫–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
apiClient.interceptors.request.use((config) => {
  const token = localStorage.getItem('authToken');
  if (token) {
    config.headers.Authorization = `Bearer ${token}`;
  }
  return config;
});

export default apiClient;
```

---

## üìö –ü–æ–ª–µ–∑–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ:**
- **react-markdown** - —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ Markdown –≤ –æ—Ç–≤–µ—Ç–∞—Ö AI
- **react-syntax-highlighter** - –ø–æ–¥—Å–≤–µ—Ç–∫–∞ –∫–æ–¥–∞
- **framer-motion** - –∞–Ω–∏–º–∞—Ü–∏–∏ –¥–ª—è —á–∞—Ç–∞
- **react-query** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ API –∑–∞–ø—Ä–æ—Å–∞–º–∏
- **zustand** - –ª–µ–≥–∫–æ–≤–µ—Å–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º

**–ü—Ä–∏–º–µ—Ä —É—Å—Ç–∞–Ω–æ–≤–∫–∏:**
```bash
npm install react-markdown react-syntax-highlighter framer-motion @tanstack/react-query zustand
```

---

## ‚úÖ –ß–µ–∫-–ª–∏—Å—Ç –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

- [ ] –ü–ª–∞–≤–∞—é—â–∞—è –∫–Ω–æ–ø–∫–∞ –≤ –ø—Ä–∞–≤–æ–º –Ω–∏–∂–Ω–µ–º —É–≥–ª—É
- [ ] –û—Ç–∫—Ä—ã—Ç–∏–µ/–∑–∞–∫—Ä—ã—Ç–∏–µ –æ–∫–Ω–∞ —á–∞—Ç–∞
- [ ] –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π —á–µ—Ä–µ–∑ POST /chat
- [ ] –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤ AI
- [ ] –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏ "AI –¥—É–º–∞–µ—Ç..."
- [ ] –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ conversation_id –¥–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è –¥–∏–∞–ª–æ–≥–∞
- [ ] –ê–≤—Ç–æ—Å–∫—Ä–æ–ª–ª –∫ –Ω–æ–≤—ã–º —Å–æ–æ–±—â–µ–Ω–∏—è–º
- [ ] –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ (–≤–∞–ª–∏–¥–∞—Ü–∏—è, –ª–∏–º–∏—Ç—ã)
- [ ] –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
- [ ] Markdown —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

---

## üÜò –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –≤–æ–ø—Ä–æ—Å–æ–≤ –∏–ª–∏ –ø—Ä–æ–±–ª–µ–º:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ console –±—Ä–∞—É–∑–µ—Ä–∞ –Ω–∞ –æ—à–∏–±–∫–∏
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Network tab –≤ DevTools
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ç–æ–∫–µ–Ω –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç —Ç–µ–ª –∑–∞–ø—Ä–æ—Å–æ–≤

**–£–¥–∞—á–∏ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ! üöÄ**

