type: object
description: Сводный отчет по подрядчикам проекта
properties:
  title:
    type: string
    example: "Отчет по подрядчикам"
  project:
    type: object
    description: Информация о проекте
    properties:
      id:
        type: integer
        format: int64
        example: 1
      name:
        type: string
        example: "Строительство жилого комплекса"
      address:
        type: string
        example: "г. Москва, ул. Примерная, д. 1"
    required: [id, name]
  period:
    type: object
    description: Период отчета
    properties:
      from:
        type: string
        format: date
        nullable: true
        example: "2024-01-01"
      to:
        type: string
        format: date
        nullable: true
        example: "2024-12-31"
  filters:
    type: object
    description: Примененные фильтры
    properties:
      contract_status:
        type: string
        nullable: true
        example: "active"
      contractor_ids:
        type: array
        nullable: true
        items:
          type: integer
          format: int64
      include_completed_works:
        type: boolean
        example: true
      include_payments:
        type: boolean
        example: true
      include_materials:
        type: boolean
        example: false
  summary:
    type: object
    description: Общая сводка по всем подрядчикам
    properties:
      total_contractors:
        type: integer
        description: Общее количество подрядчиков
        example: 5
      total_contract_amount:
        type: number
        format: float
        description: Общая сумма всех контрактов
        example: 15000000.00
      total_completed_amount:
        type: number
        format: float
        description: Общая сумма выполненных работ
        example: 12000000.00
      total_payment_amount:
        type: number
        format: float
        description: Общая сумма платежей
        example: 10000000.00
      total_remaining_amount:
        type: number
        format: float
        description: Общий остаток к доплате
        example: 5000000.00
    required: [total_contractors, total_contract_amount, total_completed_amount, total_payment_amount, total_remaining_amount]
  contractors:
    type: array
    description: Данные по каждому подрядчику
    items:
      type: object
      properties:
        contractor_id:
          type: integer
          format: int64
          example: 1
        contractor_name:
          type: string
          example: "ООО Строительная компания"
        contact_person:
          type: string
          nullable: true
          example: "Иванов Иван Иванович"
        phone:
          type: string
          nullable: true
          example: "+7 (495) 123-45-67"
        email:
          type: string
          nullable: true
          example: "info@stroyka.ru"
        contractor_type:
          type: string
          example: "manual"
        contracts_count:
          type: integer
          description: Количество контрактов подрядчика
          example: 2
        total_contract_amount:
          type: number
          format: float
          description: Общая сумма контрактов подрядчика
          example: 5000000.00
        total_completed_amount:
          type: number
          format: float
          description: Сумма выполненных работ
          example: 4000000.00
        total_payment_amount:
          type: number
          format: float
          description: Сумма платежей
          example: 3500000.00
        remaining_to_complete:
          type: number
          format: float
          description: Остаток к выполнению
          example: 1000000.00
        remaining_amount:
          type: number
          format: float
          description: Остаток к доплате
          example: 1500000.00
        completion_percentage:
          type: number
          format: float
          description: Процент выполнения работ
          example: 80.0
        payment_percentage:
          type: number
          format: float
          description: Процент оплаты
          example: 70.0
      required: [contractor_id, contractor_name, contracts_count, total_contract_amount, total_completed_amount, total_payment_amount, remaining_to_complete, remaining_amount, completion_percentage, payment_percentage]
  generated_at:
    type: string
    format: date-time
    description: Время генерации отчета
    example: "2024-01-15T10:30:00Z"
required: [title, project, summary, contractors, generated_at]