type: object
description: Схема для создания нового контракта.
required:
  - contractor_id
  - number
  - date
  - total_amount
  - status
properties:
  project_id:
    type: integer
    nullable: true
    description: ID проекта, к которому привязан контракт (опционально).
    example: 5
  contractor_id:
    type: integer
    nullable: true
    description: ID подрядчика из каталога организации. Опционален если указан is_self_execution=true.
    example: 3
  is_self_execution:
    type: boolean
    nullable: true
    description: "Флаг выполнения работ собственными силами (хозяйственный способ). Если true, contractor_id будет заполнен автоматически."
    example: false
  parent_contract_id:
    type: integer
    nullable: true
    description: ID родительского контракта (для создания иерархии). Проверяется через ParentContractValid.
    example: 12
  number:
    type: string
    description: Номер контракта (обязательно, максимум 255 символов).
    maxLength: 255
    example: "ДПХ-2024/001"
  date:
    type: string
    format: date
    description: Дата заключения контракта (формат YYYY-MM-DD).
    example: "2024-02-01"
  subject:
    type: string
    nullable: true
    description: Предмет контракта или краткое описание.
    example: "Выполнение строительно-монтажных работ по объекту"
  work_type_category:
    type: string
    nullable: true
    description: Категория видов работ по контракту.
    enum: [smr, general_construction, finishing, installation, design, consultation, supply, services, rent, other]
    example: "general_construction"
  payment_terms:
    type: string
    nullable: true
    description: Условия оплаты по контракту.
    example: "Оплата в течение 10 банковских дней с момента подписания акта"
  total_amount:
    type: number
    format: float
    description: Общая сумма контракта (обязательно, минимум 0).
    minimum: 0
    example: 2500000.00
  gp_percentage:
    type: number
    format: float
    nullable: true
    description: Процент генерального подряда (от 0 до 100).
    minimum: 0
    maximum: 100
    example: 15.5
  planned_advance_amount:
    type: number
    format: float
    nullable: true
    description: Планируемая сумма аванса (минимум 0).
    minimum: 0
    example: 500000.00
  actual_advance_amount:
    type: number
    format: float
    nullable: true
    description: Фактически выплаченная сумма аванса (минимум 0).
    minimum: 0
    example: 250000.00
  status:
    type: string
    description: Статус контракта.
    enum: [draft, active, completed, terminated, on_hold]
    example: "active"
  start_date:
    type: string
    format: date
    nullable: true
    description: Дата начала работ по контракту (формат YYYY-MM-DD).
    example: "2024-02-05"
  end_date:
    type: string
    format: date
    nullable: true
    description: Дата окончания работ по контракту (должна быть после или равна start_date).
    example: "2024-08-30"
  notes:
    type: string
    nullable: true
    description: Дополнительные примечания или комментарии к контракту.
    example: "Особые условия: работа в зимний период, требуется согласование с управляющей компанией"