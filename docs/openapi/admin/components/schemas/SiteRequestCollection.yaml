type: object
description: Пагинированная коллекция заявок с сайта с метаданными и сводкой.
properties:
  data:
    type: array
    description: Массив заявок
    items:
      $ref: './SiteRequest.yaml'
  meta:
    type: object
    description: Метаданные пагинации
    properties:
      total:
        type: integer
        example: 87
      per_page:
        type: integer
        example: 15
      current_page:
        type: integer
        example: 1
      last_page:
        type: integer
        example: 6
      from:
        type: integer
        nullable: true
        example: 1
      to:
        type: integer
        nullable: true
        example: 15
  links:
    type: object
    description: Ссылки для навигации по страницам
    properties:
      first:
        type: string
        nullable: true
        example: "http://example.com/api/v1/admin/site-requests?page=1"
      last:
        type: string
        nullable: true
        example: "http://example.com/api/v1/admin/site-requests?page=6"
      prev:
        type: string
        nullable: true
        example: null
      next:
        type: string
        nullable: true
        example: "http://example.com/api/v1/admin/site-requests?page=2"
  summary:
    type: object
    description: Сводная информация о заявках в текущей выборке
    properties:
      total_requests:
        type: integer
        description: Общее количество заявок в выборке
        example: 15
      by_status:
        type: object
        description: Распределение по статусам
        properties:
          pending:
            type: integer
            example: 5
          in_progress:
            type: integer
            example: 8
          completed:
            type: integer
            example: 2
          cancelled:
            type: integer
            example: 0
          on_hold:
            type: integer
            example: 0
      by_priority:
        type: object
        description: Распределение по приоритетам
        properties:
          low:
            type: integer
            example: 3
          medium:
            type: integer
            example: 7
          high:
            type: integer
            example: 4
          urgent:
            type: integer
            example: 1
      by_type:
        type: object
        description: Распределение по типам заявок
        properties:
          material_request:
            type: integer
            example: 5
          equipment_request:
            type: integer
            example: 3
          personnel_request:
            type: integer
            example: 6
          service_request:
            type: integer
            example: 1
          other:
            type: integer
            example: 0
      personnel_requests:
        type: object
        description: Детальная информация о заявках на персонал
        properties:
          total:
            type: integer
            description: Общее количество заявок на персонал
            example: 6
          by_personnel_type:
            type: object
            description: Распределение по типам персонала
            additionalProperties:
              type: object
              properties:
                count:
                  type: integer
                  description: Количество заявок
                  example: 2
                total_personnel:
                  type: integer
                  description: Общее количество требуемого персонала
                  example: 8
                average_rate:
                  type: number
                  format: decimal
                  description: Средняя почасовая ставка
                  example: 850.00
            example:
              mason:
                count: 2
                total_personnel: 8
                average_rate: 850.00
              carpenter:
                count: 1
                total_personnel: 3
                average_rate: 750.00
          total_personnel_needed:
            type: integer
            description: Общее количество требуемого персонала
            example: 35
          average_hourly_rate:
            type: number
            format: decimal
            description: Средняя почасовая ставка по всем заявкам на персонал
            example: 825.50
      overdue_count:
        type: integer
        description: Количество просроченных заявок
        example: 2
