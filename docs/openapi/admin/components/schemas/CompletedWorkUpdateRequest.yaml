type: object
description: Схема для обновления выполненной работы. Все поля опциональны, так как используется частичное обновление.
properties:
  project_id:
    type: integer
    description: ID проекта, к которому относится работа. Проверяется через ProjectAccessibleRule.
    example: 2
  contract_id:
    type: integer
    nullable: true
    description: ID договора для данной работы (опционально, проверяется принадлежность проекту).
    example: 6
  contractor_id:
    type: integer
    nullable: true
    description: ID подрядчика, выполнившего работу (опционально).
    example: 4
  work_type_id:
    type: integer
    description: ID вида работы из каталога организации.
    example: 8
  user_id:
    type: integer
    description: ID пользователя (прораба), зафиксировавшего выполненную работу.
    example: 13
  quantity:
    type: number
    format: float
    description: Количество выполненной работы (мин 0.001).
    minimum: 0.001
    example: 200.75
  price:
    type: number
    format: float
    nullable: true
    description: Цена за единицу работы (опционально, автоматически рассчитывается).
    minimum: 0
    example: 475.50
  total_amount:
    type: number
    format: float
    nullable: true
    description: Общая стоимость работы (опционально, автоматически рассчитывается).
    minimum: 0
    example: 95456.25
  completion_date:
    type: string
    format: date
    description: Дата выполнения работы (формат YYYY-MM-DD).
    example: "2024-02-18"
  notes:
    type: string
    nullable: true
    description: Комментарии или примечания к работе (максимум 65535 символов).
    maxLength: 65535
    example: "Обновлены комментарии по качеству выполнения работ."
  status:
    type: string
    description: Статус выполненной работы.
    enum: [draft, confirmed, cancelled]
    example: "confirmed"
  additional_info:
    type: object
    nullable: true
    description: Дополнительная информация в формате JSON.
    example:
      quality_rating: 4
      updated_notes: "скорректированы объемы"
  materials:
    type: array
    nullable: true
    description: Список материалов, использованных в работе (при указании заменяет существующий список).
    items:
      type: object
      required:
        - material_id
        - quantity
      properties:
        material_id:
          type: integer
          description: ID материала из каталога организации.
          example: 18
        quantity:
          type: number
          format: float
          description: Количество использованного материала (мин 0.0001).
          minimum: 0.0001
          example: 30.25
        unit_price:
          type: number
          format: float
          nullable: true
          description: Цена за единицу материала (опционально).
          minimum: 0
          example: 175.00
        total_amount:
          type: number
          format: float
          nullable: true
          description: Общая стоимость материала (опционально).
          minimum: 0
          example: 5293.75
        notes:
          type: string
          nullable: true
          description: Примечания по материалу (максимум 1000 символов).
          maxLength: 1000
          example: "Материал заменен на более качественный"
