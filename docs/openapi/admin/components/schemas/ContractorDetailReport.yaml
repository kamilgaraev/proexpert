type: object
description: Детальный отчет по конкретному подрядчику
properties:
  title:
    type: string
    example: "Детальный отчет по подрядчику"
  contractor:
    type: object
    description: Информация о подрядчике
    properties:
      id:
        type: integer
        format: int64
        example: 1
      name:
        type: string
        example: "ООО Строительная компания"
      contact_person:
        type: string
        nullable: true
        example: "Иванов Иван Иванович"
      phone:
        type: string
        nullable: true
        example: "+7 (495) 123-45-67"
      email:
        type: string
        nullable: true
        example: "info@stroyka.ru"
      contractor_type:
        type: string
        example: "manual"
    required: [id, name, contractor_type]
  project:
    type: object
    description: Информация о проекте
    properties:
      id:
        type: integer
        format: int64
        example: 1
      name:
        type: string
        example: "Строительство жилого комплекса"
      address:
        type: string
        example: "г. Москва, ул. Примерная, д. 1"
    required: [id, name]
  period:
    type: object
    description: Период отчета
    properties:
      from:
        type: string
        format: date
        nullable: true
        example: "2024-01-01"
      to:
        type: string
        format: date
        nullable: true
        example: "2024-12-31"
  summary:
    type: object
    description: Сводка по подрядчику
    properties:
      total_contracts:
        type: integer
        description: Общее количество контрактов
        example: 2
      total_contract_amount:
        type: number
        format: float
        description: Общая сумма контрактов
        example: 5000000.00
      total_completed_amount:
        type: number
        format: float
        description: Сумма выполненных работ
        example: 4000000.00
      total_payment_amount:
        type: number
        format: float
        description: Сумма платежей
        example: 3500000.00
    required: [total_contracts, total_contract_amount, total_completed_amount, total_payment_amount]
  contracts:
    type: array
    description: Детальная информация по каждому контракту
    items:
      type: object
      properties:
        contract_id:
          type: integer
          format: int64
          example: 1
        contract_number:
          type: string
          nullable: true
          example: "Д-001/2024"
        contract_date:
          type: string
          format: date
          nullable: true
          example: "2024-01-15"
        status:
          type: string
          example: "active"
        total_amount:
          type: number
          format: float
          description: Сумма контракта
          example: 2500000.00
        completed_amount:
          type: number
          format: float
          description: Сумма выполненных работ по контракту
          example: 2000000.00
        payment_amount:
          type: number
          format: float
          description: Сумма платежей по контракту
          example: 1750000.00
        remaining_amount:
          type: number
          format: float
          description: Остаток к доплате
          example: 750000.00
        completion_percentage:
          type: number
          format: float
          description: Процент выполнения работ
          example: 80.0
        payment_percentage:
          type: number
          format: float
          description: Процент оплаты
          example: 70.0
        completed_works:
          type: array
          description: Выполненные работы по контракту
          items:
            type: object
            properties:
              id:
                type: integer
                format: int64
                example: 1
              work_type:
                type: string
                nullable: true
                example: "Кладочные работы"
              quantity:
                type: number
                format: float
                example: 100.5
              price:
                type: number
                format: float
                example: 1500.00
              total_amount:
                type: number
                format: float
                example: 150750.00
              completion_date:
                type: string
                format: date
                nullable: true
                example: "2024-01-20"
              notes:
                type: string
                nullable: true
                example: "Работы выполнены в срок"
            required: [id, quantity, price, total_amount]
        payments:
          type: array
          description: Платежи по контракту
          items:
            type: object
            properties:
              id:
                type: integer
                format: int64
                example: 1
              amount:
                type: number
                format: float
                example: 875000.00
              payment_date:
                type: string
                format: date
                nullable: true
                example: "2024-01-25"
              payment_type:
                type: string
                nullable: true
                example: "advance"
              notes:
                type: string
                nullable: true
                example: "Авансовый платеж"
            required: [id, amount]
      required: [contract_id, status, total_amount, completed_amount, payment_amount, remaining_amount, completion_percentage, payment_percentage, completed_works, payments]
  generated_at:
    type: string
    format: date-time
    description: Время генерации отчета
    example: "2024-01-15T10:30:00Z"
required: [title, contractor, project, summary, contracts, generated_at]