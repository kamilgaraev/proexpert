type: object
description: Заявка с сайта с полной информацией включая метаданные и связанные объекты.
properties:
  id:
    type: integer
    description: Уникальный идентификатор заявки
    example: 150
  organization_id:
    type: integer
    description: ID организации
    example: 10
  project_id:
    type: integer
    description: ID проекта
    example: 25
  user_id:
    type: integer
    description: ID пользователя, создавшего заявку
    example: 15
  title:
    type: string
    description: Заголовок заявки
    example: "Требуются рабочие для укладки кирпича"
  description:
    type: string
    description: Подробное описание заявки
    example: "Необходимо 5 каменщиков для кладки стен 1-го этажа"
  request_type:
    type: string
    enum: [material_request, info_request, issue_report, work_order, personnel_request, other]
    description: Тип заявки
    example: "personnel_request"
  status:
    type: string
    enum: [draft, pending, submitted, approved, rejected, in_progress, completed, on_hold]
    description: Статус заявки
    example: "in_progress"
  priority:
    type: string
    enum: [low, medium, high, urgent]
    description: Приоритет заявки
    example: "high"
  required_date:
    type: string
    format: date
    description: Требуемая дата выполнения
    example: "2024-12-25"
  notes:
    type: string
    nullable: true
    description: Дополнительные заметки
    example: "Работы должны начаться в 8:00"
  # Поля для заявок на персонал
  personnel_type:
    type: string
    enum: [general_worker, skilled_worker, foreman, engineer, specialist, operator, electrician, plumber, welder, carpenter, mason, painter, security, driver, other]
    nullable: true
    description: Тип персонала
    example: "mason"
  personnel_count:
    type: integer
    nullable: true
    description: Количество требуемого персонала
    example: 5
  personnel_requirements:
    type: string
    nullable: true
    description: Требования к персоналу
    example: "Опыт работы от 2 лет, знание технологии кладки"
  hourly_rate:
    type: number
    format: decimal
    nullable: true
    description: Почасовая ставка
    example: 800.50
  work_hours_per_day:
    type: integer
    nullable: true
    description: Количество рабочих часов в день
    example: 8
  work_start_date:
    type: string
    format: date
    nullable: true
    description: Дата начала работы
    example: "2024-12-20"
  work_end_date:
    type: string
    format: date
    nullable: true
    description: Дата окончания работы
    example: "2024-12-30"
  work_location:
    type: string
    nullable: true
    description: Место выполнения работы
    example: "Строительная площадка, 1-й этаж, секция А"
  additional_conditions:
    type: string
    nullable: true
    description: Дополнительные условия работы
    example: "Предоставляется спецодежда и инструмент"
  created_at:
    type: string
    format: date-time
    description: Дата создания
    example: "2024-12-15T10:00:00Z"
  updated_at:
    type: string
    format: date-time
    description: Дата последнего обновления
    example: "2024-12-15T14:30:00Z"
  # Связанные объекты
  project:
    type: object
    nullable: true
    description: Информация о проекте
    properties:
      id:
        type: integer
        example: 25
      name:
        type: string
        example: "Жилой комплекс Солнечный"
  user:
    type: object
    nullable: true
    description: Информация о пользователе, создавшем заявку
    properties:
      id:
        type: integer
        example: 15
      name:
        type: string
        example: "Иванов Иван Иванович"
      email:
        type: string
        example: "ivanov@example.com"
  files:
    type: array
    description: Прикрепленные файлы
    items:
      type: object
      properties:
        id:
          type: integer
          example: 45
        name:
          type: string
          example: "plan.jpg"
        original_name:
          type: string
          example: "План этажа.jpg"
        path:
          type: string
          example: "site_request_files/150/plan.jpg"
        size:
          type: integer
          example: 1024000
        mime_type:
          type: string
          example: "image/jpeg"
  # Вычисляемые поля
  is_personnel_request:
    type: boolean
    description: Является ли заявка запросом на персонал
    example: true
  status_label:
    type: string
    description: Человекочитаемый статус
    example: "В работе"
  priority_label:
    type: string
    description: Человекочитаемый приоритет
    example: "Высокий"
  personnel_type_label:
    type: string
    nullable: true
    description: Человекочитаемый тип персонала
    example: "Каменщик"
  days_until_required:
    type: integer
    description: Количество дней до требуемой даты (отрицательное если просрочено)
    example: 10
  is_overdue:
    type: boolean
    description: Просрочена ли заявка
    example: false
required:
  - id
  - organization_id
  - project_id
  - user_id
  - title
  - description
  - request_type
  - status
  - priority
