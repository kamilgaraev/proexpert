# –ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞ –æ—Ç—á–µ—Ç–æ–≤

## üìä –û–±–∑–æ—Ä

–ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –æ—Ç—á–µ—Ç–æ–≤ - —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –º–æ–¥—É–ª—è `advanced-reports`, –ø–æ–∑–≤–æ–ª—è—é—â–∞—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º —Å–æ–∑–¥–∞–≤–∞—Ç—å –∫–∞—Å—Ç–æ–º–Ω—ã–µ –æ—Ç—á–µ—Ç—ã —Å –≥–∏–±–∫–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–æ–π –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –¥–∞–Ω–Ω—ã—Ö, —Ñ–∏–ª—å—Ç—Ä–æ–≤, –∞–≥—Ä–µ–≥–∞—Ü–∏–π –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏.

**–ú–æ–¥—É–ª—å:** `advanced-reports`  
**Permission:** `advanced_reports.custom_reports`  
**–¢–∏–ø:** Feature (–ø–ª–∞—Ç–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å)

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

1. **–ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö** - CustomReport, CustomReportExecution, CustomReportSchedule
2. **–°–µ—Ä–≤–∏—Å—ã –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏** - –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤, –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ, –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
3. **API –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã** - CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏, –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –æ—Ç—á–µ—Ç–æ–≤, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ–º
4. **–†–µ–≥–∏—Å—Ç—Ä –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –¥–∞–Ω–Ω—ã—Ö** - –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü –∏ –ø–æ–ª–µ–π
5. **–°–∏—Å—Ç–µ–º–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏** - –≤–∞–ª–∏–¥–∞—Ü–∏—è, –∫–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞, –∑–∞—â–∏—Ç–∞ –æ—Ç SQL-–∏–Ω—ä–µ–∫—Ü–∏–π

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –¢–∞–±–ª–∏—Ü–∞: `custom_reports`

–•—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –æ—Ç—á–µ—Ç–æ–≤.

```sql
- id (bigint, PK)
- name (string) - –Ω–∞–∑–≤–∞–Ω–∏–µ –æ—Ç—á–µ—Ç–∞
- description (text, nullable) - –æ–ø–∏—Å–∞–Ω–∏–µ
- organization_id (FK) - –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è
- user_id (FK) - —Å–æ–∑–¥–∞—Ç–µ–ª—å
- report_category (string) - –∫–∞—Ç–µ–≥–æ—Ä–∏—è: finances, materials, works, projects, staff
- data_sources (json) - –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö –∏ –∏—Ö —Å–≤—è–∑–∏
  {
    "primary": "projects",
    "joins": [
      {"table": "contracts", "type": "left", "on": ["projects.id", "contracts.project_id"]},
      {"table": "organizations", "type": "inner", "on": ["projects.organization_id", "organizations.id"]}
    ]
  }
- query_config (json) - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–∞
  {
    "where": [
      {"field": "projects.status", "operator": "=", "value": "active"},
      {"field": "projects.created_at", "operator": ">=", "value": "2024-01-01"}
    ],
    "where_logic": "and"
  }
- columns_config (json) - –∫–æ–ª–æ–Ω–∫–∏ –æ—Ç—á–µ—Ç–∞
  [
    {
      "field": "projects.name",
      "label": "–ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞",
      "order": 1,
      "format": "text",
      "width": 200
    },
    {
      "field": "projects.budget_amount",
      "label": "–ë—é–¥–∂–µ—Ç",
      "order": 2,
      "format": "currency",
      "aggregation": "sum"
    }
  ]
- filters_config (json) - —Ñ–∏–ª—å—Ç—Ä—ã –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  [
    {
      "field": "projects.status",
      "label": "–°—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞",
      "type": "select",
      "options": ["active", "completed", "on_hold"],
      "required": false,
      "default": null
    },
    {
      "field": "projects.start_date",
      "label": "–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞",
      "type": "date_range",
      "required": true
    }
  ]
- aggregations_config (json) - –∞–≥—Ä–µ–≥–∞—Ü–∏–∏ –∏ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏
  {
    "group_by": ["projects.status"],
    "aggregations": [
      {"field": "projects.budget_amount", "function": "sum", "alias": "total_budget"},
      {"field": "projects.id", "function": "count", "alias": "projects_count"}
    ],
    "having": [
      {"field": "total_budget", "operator": ">", "value": 100000}
    ]
  }
- sorting_config (json) - —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞
  [
    {"field": "projects.created_at", "direction": "desc"},
    {"field": "projects.name", "direction": "asc"}
  ]
- visualization_config (json, nullable) - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≥—Ä–∞—Ñ–∏–∫–æ–≤
  {
    "enabled": true,
    "chart_type": "bar",
    "x_axis": "projects.name",
    "y_axis": "total_budget",
    "colors": ["#3b82f6", "#10b981"]
  }
- is_shared (boolean) - –¥–æ—Å—Ç—É–ø–µ–Ω –≤—Å–µ–π –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
- is_favorite (boolean) - –∏–∑–±—Ä–∞–Ω–Ω—ã–π –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- is_scheduled (boolean) - –∏–º–µ–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ
- execution_count (integer) - —Å—á–µ—Ç—á–∏–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–π
- last_executed_at (timestamp, nullable)
- created_at, updated_at, deleted_at
```

**–ò–Ω–¥–µ–∫—Å—ã:**
- `(organization_id, is_shared, deleted_at)`
- `(user_id, deleted_at)`
- `(report_category)`

---

### –¢–∞–±–ª–∏—Ü–∞: `custom_report_executions`

–ò—Å—Ç–æ—Ä–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –æ—Ç—á–µ—Ç–æ–≤.

```sql
- id (bigint, PK)
- custom_report_id (FK) - –æ—Ç—á–µ—Ç
- user_id (FK) - –∫—Ç–æ –∑–∞–ø—É—Å—Ç–∏–ª
- organization_id (FK)
- applied_filters (json) - –ø—Ä–∏–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã
  {
    "projects.status": "active",
    "projects.start_date": {"from": "2024-01-01", "to": "2024-12-31"}
  }
- execution_time_ms (integer) - –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤ –º—Å
- result_rows_count (integer) - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–æ–∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
- export_format (string, nullable) - csv, excel, pdf
- export_file_id (string, nullable, FK to report_files)
- status (enum) - pending, processing, completed, failed, cancelled
- error_message (text, nullable)
- query_sql (text, nullable) - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–π SQL –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
- created_at (timestamp)
- completed_at (timestamp, nullable)
```

**–ò–Ω–¥–µ–∫—Å—ã:**
- `(custom_report_id, created_at)`
- `(user_id, created_at)`
- `(status, created_at)`

---

### –¢–∞–±–ª–∏—Ü–∞: `custom_report_schedules`

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏ –æ—Ç–ø—Ä–∞–≤–∫–∞ –æ—Ç—á–µ—Ç–æ–≤.

```sql
- id (bigint, PK)
- custom_report_id (FK)
- organization_id (FK)
- user_id (FK) - –≤–ª–∞–¥–µ–ª–µ—Ü —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è
- schedule_type (enum) - daily, weekly, monthly, custom_cron
- schedule_config (json)
  {
    "time": "09:00",
    "day_of_week": 1, // –¥–ª—è weekly (1=Monday)
    "day_of_month": 1, // –¥–ª—è monthly
    "cron_expression": "0 9 * * 1" // –¥–ª—è custom_cron
  }
- filters_preset (json) - –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã –¥–ª—è –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞
- recipient_emails (json) - —Å–ø–∏—Å–æ–∫ email –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏
  ["user1@example.com", "user2@example.com"]
- export_format (enum) - csv, excel, pdf
- is_active (boolean)
- last_run_at (timestamp, nullable)
- next_run_at (timestamp, nullable)
- last_execution_id (FK to custom_report_executions, nullable)
- created_at, updated_at
```

**–ò–Ω–¥–µ–∫—Å—ã:**
- `(custom_report_id, is_active)`
- `(next_run_at, is_active)`
- `(organization_id)`

---

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª: `config/custom-reports.php`

–ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –¥–∞–Ω–Ω—ã—Ö (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ —Ç–∞–±–ª–∏—Ü–µ).

```php
return [
    'data_sources' => [
        'projects' => [
            'table' => 'projects',
            'model' => \App\Models\Project::class,
            'label' => '–ü—Ä–æ–µ–∫—Ç—ã',
            'category' => 'core',
            'fields' => [
                'id' => ['type' => 'integer', 'label' => 'ID', 'filterable' => true, 'sortable' => true],
                'name' => ['type' => 'string', 'label' => '–ù–∞–∑–≤–∞–Ω–∏–µ', 'filterable' => true, 'sortable' => true],
                'address' => ['type' => 'string', 'label' => '–ê–¥—Ä–µ—Å', 'filterable' => true],
                'budget_amount' => ['type' => 'decimal', 'label' => '–ë—é–¥–∂–µ—Ç', 'aggregatable' => true, 'format' => 'currency'],
                'status' => ['type' => 'enum', 'label' => '–°—Ç–∞—Ç—É—Å', 'filterable' => true, 'options' => ['active', 'completed', 'on_hold']],
                'start_date' => ['type' => 'date', 'label' => '–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞', 'filterable' => true, 'sortable' => true],
                'end_date' => ['type' => 'date', 'label' => '–î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è', 'filterable' => true, 'sortable' => true],
                'is_archived' => ['type' => 'boolean', 'label' => '–ê—Ä—Ö–∏–≤–Ω—ã–π', 'filterable' => true],
                'organization_id' => ['type' => 'integer', 'label' => 'ID –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏', 'filterable' => true],
            ],
            'relations' => [
                'organization' => [
                    'type' => 'belongsTo',
                    'target' => 'organizations',
                    'foreign_key' => 'organization_id',
                    'owner_key' => 'id',
                ],
                'contracts' => [
                    'type' => 'hasMany',
                    'target' => 'contracts',
                    'foreign_key' => 'project_id',
                    'local_key' => 'id',
                ],
                'materialReceipts' => [
                    'type' => 'hasMany',
                    'target' => 'material_receipts',
                    'foreign_key' => 'project_id',
                    'local_key' => 'id',
                ],
                'completedWorks' => [
                    'type' => 'hasMany',
                    'target' => 'completed_works',
                    'foreign_key' => 'project_id',
                    'local_key' => 'id',
                ],
            ],
            'default_filters' => [
                ['field' => 'organization_id', 'operator' => '=', 'value' => ':current_organization_id'],
                ['field' => 'is_archived', 'operator' => '=', 'value' => false],
            ],
        ],
        
        'contracts' => [
            'table' => 'contracts',
            'model' => \App\Models\Contract::class,
            'label' => '–ö–æ–Ω—Ç—Ä–∞–∫—Ç—ã',
            'category' => 'finances',
            'fields' => [
                'id' => ['type' => 'integer', 'label' => 'ID'],
                'number' => ['type' => 'string', 'label' => '–ù–æ–º–µ—Ä –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞'],
                'date' => ['type' => 'date', 'label' => '–î–∞—Ç–∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞'],
                'total_amount' => ['type' => 'decimal', 'label' => '–°—É–º–º–∞', 'aggregatable' => true, 'format' => 'currency'],
                'status' => ['type' => 'enum', 'label' => '–°—Ç–∞—Ç—É—Å', 'filterable' => true],
                'project_id' => ['type' => 'integer', 'label' => 'ID –ø—Ä–æ–µ–∫—Ç–∞', 'filterable' => true],
                'contractor_id' => ['type' => 'integer', 'label' => 'ID –ø–æ–¥—Ä—è–¥—á–∏–∫–∞', 'filterable' => true],
            ],
            'relations' => [
                'project' => ['type' => 'belongsTo', 'target' => 'projects'],
                'contractor' => ['type' => 'belongsTo', 'target' => 'contractors'],
                'payments' => ['type' => 'hasMany', 'target' => 'contract_payments'],
            ],
        ],
        
        'materials' => [
            'table' => 'materials',
            'model' => \App\Models\Material::class,
            'label' => '–ú–∞—Ç–µ—Ä–∏–∞–ª—ã',
            'category' => 'materials',
            'fields' => [
                'id' => ['type' => 'integer', 'label' => 'ID'],
                'name' => ['type' => 'string', 'label' => '–ù–∞–∑–≤–∞–Ω–∏–µ', 'filterable' => true],
                'code' => ['type' => 'string', 'label' => '–ö–æ–¥', 'filterable' => true],
                'default_price' => ['type' => 'decimal', 'label' => '–¶–µ–Ω–∞', 'aggregatable' => true, 'format' => 'currency'],
                'category' => ['type' => 'string', 'label' => '–ö–∞—Ç–µ–≥–æ—Ä–∏—è', 'filterable' => true],
            ],
            'relations' => [
                'organization' => ['type' => 'belongsTo', 'target' => 'organizations'],
                'measurementUnit' => ['type' => 'belongsTo', 'target' => 'measurement_units'],
                'receipts' => ['type' => 'hasMany', 'target' => 'material_receipts'],
            ],
        ],
        
        'completed_works' => [
            'table' => 'completed_works',
            'model' => \App\Models\CompletedWork::class,
            'label' => '–í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ —Ä–∞–±–æ—Ç—ã',
            'category' => 'works',
            'fields' => [
                'id' => ['type' => 'integer', 'label' => 'ID'],
                'work_date' => ['type' => 'date', 'label' => '–î–∞—Ç–∞ —Ä–∞–±–æ—Ç—ã', 'filterable' => true],
                'quantity' => ['type' => 'decimal', 'label' => '–û–±—ä–µ–º', 'aggregatable' => true],
                'total_cost' => ['type' => 'decimal', 'label' => '–°—Ç–æ–∏–º–æ—Å—Ç—å', 'aggregatable' => true, 'format' => 'currency'],
                'project_id' => ['type' => 'integer', 'label' => 'ID –ø—Ä–æ–µ–∫—Ç–∞', 'filterable' => true],
                'work_type_id' => ['type' => 'integer', 'label' => 'ID –≤–∏–¥–∞ —Ä–∞–±–æ—Ç', 'filterable' => true],
            ],
            'relations' => [
                'project' => ['type' => 'belongsTo', 'target' => 'projects'],
                'workType' => ['type' => 'belongsTo', 'target' => 'work_types'],
                'user' => ['type' => 'belongsTo', 'target' => 'users'],
            ],
        ],
        
        'users' => [
            'table' => 'users',
            'model' => \App\Models\User::class,
            'label' => '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏',
            'category' => 'staff',
            'fields' => [
                'id' => ['type' => 'integer', 'label' => 'ID'],
                'name' => ['type' => 'string', 'label' => '–ò–º—è', 'filterable' => true],
                'email' => ['type' => 'string', 'label' => 'Email', 'filterable' => true],
                'created_at' => ['type' => 'datetime', 'label' => '–î–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏', 'filterable' => true],
            ],
            'relations' => [
                'organizations' => ['type' => 'belongsToMany', 'target' => 'organizations'],
                'projects' => ['type' => 'belongsToMany', 'target' => 'projects'],
            ],
        ],
        
        'contractors' => [
            'table' => 'contractors',
            'model' => \App\Models\Contractor::class,
            'label' => '–ü–æ–¥—Ä—è–¥—á–∏–∫–∏',
            'category' => 'finances',
            'fields' => [
                'id' => ['type' => 'integer', 'label' => 'ID'],
                'name' => ['type' => 'string', 'label' => '–ù–∞–∑–≤–∞–Ω–∏–µ', 'filterable' => true],
                'inn' => ['type' => 'string', 'label' => '–ò–ù–ù', 'filterable' => true],
                'contact_person' => ['type' => 'string', 'label' => '–ö–æ–Ω—Ç–∞–∫—Ç–Ω–æ–µ –ª–∏—Ü–æ'],
                'phone' => ['type' => 'string', 'label' => '–¢–µ–ª–µ—Ñ–æ–Ω'],
            ],
            'relations' => [
                'organization' => ['type' => 'belongsTo', 'target' => 'organizations'],
                'contracts' => ['type' => 'hasMany', 'target' => 'contracts'],
            ],
        ],
        
        'material_receipts' => [
            'table' => 'material_receipts',
            'model' => \App\Models\MaterialReceipt::class,
            'label' => '–ü—Ä–∏–µ–º–∫–∏ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤',
            'category' => 'materials',
            'fields' => [
                'id' => ['type' => 'integer', 'label' => 'ID'],
                'receipt_date' => ['type' => 'date', 'label' => '–î–∞—Ç–∞ –ø—Ä–∏–µ–º–∫–∏', 'filterable' => true],
                'quantity' => ['type' => 'decimal', 'label' => '–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ', 'aggregatable' => true],
                'price_per_unit' => ['type' => 'decimal', 'label' => '–¶–µ–Ω–∞ –∑–∞ –µ–¥–∏–Ω–∏—Ü—É', 'format' => 'currency'],
                'total_price' => ['type' => 'decimal', 'label' => '–û–±—â–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å', 'aggregatable' => true, 'format' => 'currency'],
                'project_id' => ['type' => 'integer', 'label' => 'ID –ø—Ä–æ–µ–∫—Ç–∞', 'filterable' => true],
                'material_id' => ['type' => 'integer', 'label' => 'ID –º–∞—Ç–µ—Ä–∏–∞–ª–∞', 'filterable' => true],
            ],
            'relations' => [
                'project' => ['type' => 'belongsTo', 'target' => 'projects'],
                'material' => ['type' => 'belongsTo', 'target' => 'materials'],
                'supplier' => ['type' => 'belongsTo', 'target' => 'suppliers'],
            ],
        ],
        
        'time_entries' => [
            'table' => 'time_entries',
            'model' => \App\Models\TimeEntry::class,
            'label' => '–£—á–µ—Ç —Ä–∞–±–æ—á–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏',
            'category' => 'staff',
            'fields' => [
                'id' => ['type' => 'integer', 'label' => 'ID'],
                'date' => ['type' => 'date', 'label' => '–î–∞—Ç–∞', 'filterable' => true],
                'hours' => ['type' => 'decimal', 'label' => '–ß–∞—Å—ã', 'aggregatable' => true],
                'user_id' => ['type' => 'integer', 'label' => 'ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è', 'filterable' => true],
                'project_id' => ['type' => 'integer', 'label' => 'ID –ø—Ä–æ–µ–∫—Ç–∞', 'filterable' => true],
            ],
            'relations' => [
                'user' => ['type' => 'belongsTo', 'target' => 'users'],
                'project' => ['type' => 'belongsTo', 'target' => 'projects'],
            ],
        ],
    ],
    
    'limits' => [
        'max_joins' => 7,
        'max_result_rows' => 10000,
        'query_timeout_seconds' => 30,
        'max_aggregations' => 10,
        'max_filters' => 20,
        'max_columns' => 50,
    ],
    
    'allowed_operators' => [
        '=' => '–†–∞–≤–Ω–æ',
        '!=' => '–ù–µ —Ä–∞–≤–Ω–æ',
        '>' => '–ë–æ–ª—å—à–µ',
        '<' => '–ú–µ–Ω—å—à–µ',
        '>=' => '–ë–æ–ª—å—à–µ –∏–ª–∏ —Ä–∞–≤–Ω–æ',
        '<=' => '–ú–µ–Ω—å—à–µ –∏–ª–∏ —Ä–∞–≤–Ω–æ',
        'like' => '–°–æ–¥–µ—Ä–∂–∏—Ç',
        'not_like' => '–ù–µ —Å–æ–¥–µ—Ä–∂–∏—Ç',
        'in' => '–í —Å–ø–∏—Å–∫–µ',
        'not_in' => '–ù–µ –≤ —Å–ø–∏—Å–∫–µ',
        'between' => '–ú–µ–∂–¥—É',
        'is_null' => '–ü—É—Å—Ç–æ',
        'is_not_null' => '–ù–µ –ø—É—Å—Ç–æ',
    ],
    
    'aggregation_functions' => [
        'sum' => '–°—É–º–º–∞',
        'avg' => '–°—Ä–µ–¥–Ω–µ–µ',
        'count' => '–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ',
        'min' => '–ú–∏–Ω–∏–º—É–º',
        'max' => '–ú–∞–∫—Å–∏–º—É–º',
        'count_distinct' => '–£–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è',
    ],
    
    'export_formats' => [
        'csv' => 'CSV',
        'excel' => 'Excel (XLSX)',
        'pdf' => 'PDF',
    ],
    
    'cache' => [
        'enabled' => true,
        'ttl' => 3600,
        'prefix' => 'custom_report',
    ],
];
```

---

## üîß –ú–æ–¥–µ–ª–∏ Eloquent

### CustomReport.php

```php
namespace App\Models;

use Illuminate\Database\Eloquent\Model;
use Illuminate\Database\Eloquent\SoftDeletes;
use Illuminate\Database\Eloquent\Relations\BelongsTo;
use Illuminate\Database\Eloquent\Relations\HasMany;

class CustomReport extends Model
{
    use SoftDeletes;

    protected $fillable = [
        'name',
        'description',
        'organization_id',
        'user_id',
        'report_category',
        'data_sources',
        'query_config',
        'columns_config',
        'filters_config',
        'aggregations_config',
        'sorting_config',
        'visualization_config',
        'is_shared',
        'is_favorite',
        'is_scheduled',
        'execution_count',
        'last_executed_at',
    ];

    protected $casts = [
        'data_sources' => 'array',
        'query_config' => 'array',
        'columns_config' => 'array',
        'filters_config' => 'array',
        'aggregations_config' => 'array',
        'sorting_config' => 'array',
        'visualization_config' => 'array',
        'is_shared' => 'boolean',
        'is_favorite' => 'boolean',
        'is_scheduled' => 'boolean',
        'execution_count' => 'integer',
        'last_executed_at' => 'datetime',
    ];

    public function organization(): BelongsTo
    {
        return $this->belongsTo(Organization::class);
    }

    public function user(): BelongsTo
    {
        return $this->belongsTo(User::class);
    }

    public function executions(): HasMany
    {
        return $this->hasMany(CustomReportExecution::class);
    }

    public function schedules(): HasMany
    {
        return $this->hasMany(CustomReportSchedule::class);
    }

    public function incrementExecutionCount(): void
    {
        $this->increment('execution_count');
        $this->update(['last_executed_at' => now()]);
    }
}
```

### CustomReportExecution.php

```php
namespace App\Models;

use Illuminate\Database\Eloquent\Model;
use Illuminate\Database\Eloquent\Relations\BelongsTo;

class CustomReportExecution extends Model
{
    const STATUS_PENDING = 'pending';
    const STATUS_PROCESSING = 'processing';
    const STATUS_COMPLETED = 'completed';
    const STATUS_FAILED = 'failed';
    const STATUS_CANCELLED = 'cancelled';

    protected $fillable = [
        'custom_report_id',
        'user_id',
        'organization_id',
        'applied_filters',
        'execution_time_ms',
        'result_rows_count',
        'export_format',
        'export_file_id',
        'status',
        'error_message',
        'query_sql',
        'completed_at',
    ];

    protected $casts = [
        'applied_filters' => 'array',
        'execution_time_ms' => 'integer',
        'result_rows_count' => 'integer',
        'completed_at' => 'datetime',
    ];

    public function customReport(): BelongsTo
    {
        return $this->belongsTo(CustomReport::class);
    }

    public function user(): BelongsTo
    {
        return $this->belongsTo(User::class);
    }

    public function exportFile(): BelongsTo
    {
        return $this->belongsTo(ReportFile::class, 'export_file_id');
    }
}
```

### CustomReportSchedule.php

```php
namespace App\Models;

use Illuminate\Database\Eloquent\Model;
use Illuminate\Database\Eloquent\Relations\BelongsTo;

class CustomReportSchedule extends Model
{
    const TYPE_DAILY = 'daily';
    const TYPE_WEEKLY = 'weekly';
    const TYPE_MONTHLY = 'monthly';
    const TYPE_CUSTOM_CRON = 'custom_cron';

    protected $fillable = [
        'custom_report_id',
        'organization_id',
        'user_id',
        'schedule_type',
        'schedule_config',
        'filters_preset',
        'recipient_emails',
        'export_format',
        'is_active',
        'last_run_at',
        'next_run_at',
        'last_execution_id',
    ];

    protected $casts = [
        'schedule_config' => 'array',
        'filters_preset' => 'array',
        'recipient_emails' => 'array',
        'is_active' => 'boolean',
        'last_run_at' => 'datetime',
        'next_run_at' => 'datetime',
    ];

    public function customReport(): BelongsTo
    {
        return $this->belongsTo(CustomReport::class);
    }

    public function user(): BelongsTo
    {
        return $this->belongsTo(User::class);
    }

    public function lastExecution(): BelongsTo
    {
        return $this->belongsTo(CustomReportExecution::class, 'last_execution_id');
    }
}
```

---

## üõ†Ô∏è –°–µ—Ä–≤–∏—Å—ã

### ReportDataSourceRegistry.php

–†–µ–≥–∏—Å—Ç—Ä –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –¥–∞–Ω–Ω—ã—Ö - –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –æ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü–∞—Ö –∏ –ø–æ–ª—è—Ö.

```php
namespace App\Services\Report;

class ReportDataSourceRegistry
{
    protected array $dataSources;

    public function __construct()
    {
        $this->dataSources = config('custom-reports.data_sources');
    }

    public function getAllDataSources(): array;
    public function getDataSource(string $key): ?array;
    public function getAvailableFields(string $dataSourceKey): array;
    public function getAvailableRelations(string $dataSourceKey): array;
    public function getFieldMetadata(string $dataSourceKey, string $fieldKey): ?array;
    public function isFieldAggregatable(string $dataSourceKey, string $fieldKey): bool;
    public function isFieldFilterable(string $dataSourceKey, string $fieldKey): bool;
    public function validateDataSource(string $dataSourceKey): bool;
    public function validateRelation(string $fromSource, string $relationKey): bool;
}
```

### CustomReportBuilderService.php

–ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –æ—Ç—á–µ—Ç–æ–≤.

```php
namespace App\Services\Report;

class CustomReportBuilderService
{
    public function __construct(
        protected ReportDataSourceRegistry $registry,
        protected ReportQueryBuilder $queryBuilder
    ) {}

    public function validateReportConfig(array $config): array;
    public function buildQueryFromConfig(CustomReport $report): Builder;
    public function testReportQuery(CustomReport $report, array $filters = []): array;
    public function estimateQueryComplexity(array $config): int;
    public function suggestOptimizations(array $config): array;
    public function cloneReport(CustomReport $report, int $userId): CustomReport;
}
```

### CustomReportExecutionService.php

–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –æ—Ç—á–µ—Ç–æ–≤ —Å –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ–º —Ñ–∏–ª—å—Ç—Ä–æ–≤ –∏ —ç–∫—Å–ø–æ—Ä—Ç–æ–º.

```php
namespace App\Services\Report;

class CustomReportExecutionService
{
    public function __construct(
        protected CustomReportBuilderService $builder,
        protected ReportFilterBuilder $filterBuilder,
        protected ReportAggregationBuilder $aggregationBuilder,
        protected CsvExporterService $csvExporter,
        protected ExcelExporterService $excelExporter,
        protected LoggingService $logging
    ) {}

    public function executeReport(
        CustomReport $report,
        array $filters = [],
        ?string $exportFormat = null,
        ?int $userId = null
    ): array|StreamedResponse;

    protected function createExecution(CustomReport $report, array $filters, int $userId): CustomReportExecution;
    protected function applyUserFilters(Builder $query, array $filters, array $filtersConfig): Builder;
    protected function executeQuery(Builder $query, int $limit): Collection;
    protected function formatResults(Collection $results, array $columnsConfig): array;
    protected function exportResults(Collection $results, CustomReport $report, string $format): StreamedResponse;
    protected function updateExecutionStatus(CustomReportExecution $execution, string $status, array $data = []): void;
}
```

### CustomReportSchedulerService.php

–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç—á–µ—Ç–æ–≤.

```php
namespace App\Services\Report;

class CustomReportSchedulerService
{
    public function __construct(
        protected CustomReportExecutionService $executionService,
        protected LoggingService $logging
    ) {}

    public function createSchedule(CustomReport $report, array $scheduleData): CustomReportSchedule;
    public function updateSchedule(CustomReportSchedule $schedule, array $data): CustomReportSchedule;
    public function executeScheduledReports(): void;
    public function calculateNextRunTime(CustomReportSchedule $schedule): Carbon;
    public function sendReportByEmail(CustomReport $report, array $recipients, string $filePath): void;
    public function deactivateSchedule(CustomReportSchedule $schedule): void;
}
```

### ReportQueryBuilder.php

–ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ SQL –∑–∞–ø—Ä–æ—Å–æ–≤ –∏–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.

```php
namespace App\Services\Report\Builders;

use Illuminate\Database\Eloquent\Builder;

class ReportQueryBuilder
{
    public function __construct(
        protected ReportDataSourceRegistry $registry,
        protected ReportFilterBuilder $filterBuilder,
        protected ReportAggregationBuilder $aggregationBuilder
    ) {}

    public function buildFromConfig(array $config, int $organizationId): Builder;
    protected function buildBaseQuery(string $primarySource, int $organizationId): Builder;
    protected function applyJoins(Builder $query, array $joins): Builder;
    protected function applyWhereConditions(Builder $query, array $conditions): Builder;
    protected function applyDefaultFilters(Builder $query, string $dataSource, int $organizationId): Builder;
    protected function selectColumns(Builder $query, array $columnsConfig): Builder;
    protected function applySorting(Builder $query, array $sortingConfig): Builder;
}
```

### ReportFilterBuilder.php

–ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤ WHERE.

```php
namespace App\Services\Report\Builders;

class ReportFilterBuilder
{
    public function applyFilter(Builder $query, array $filter): Builder;
    protected function applyEqualsFilter(Builder $query, string $field, $value): Builder;
    protected function applyLikeFilter(Builder $query, string $field, string $value): Builder;
    protected function applyInFilter(Builder $query, string $field, array $values): Builder;
    protected function applyBetweenFilter(Builder $query, string $field, array $range): Builder;
    protected function applyNullFilter(Builder $query, string $field, bool $isNull): Builder;
    public function validateFilter(array $filter, string $dataSource): bool;
}
```

### ReportAggregationBuilder.php

–ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –∞–≥—Ä–µ–≥–∞—Ü–∏–π –∏ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–æ–∫.

```php
namespace App\Services\Report\Builders;

class ReportAggregationBuilder
{
    public function applyAggregations(Builder $query, array $config): Builder;
    protected function applyGroupBy(Builder $query, array $groupByFields): Builder;
    protected function applyAggregationFunctions(Builder $query, array $aggregations): Builder;
    protected function applyHavingConditions(Builder $query, array $havingConditions): Builder;
    public function validateAggregations(array $config, string $dataSource): bool;
}
```

### ReportQueryOptimizer.php

–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤.

```php
namespace App\Services\Report;

class ReportQueryOptimizer
{
    public function optimizeQuery(Builder $query): Builder;
    public function addEagerLoading(Builder $query, array $relations): Builder;
    public function estimateQueryCost(Builder $query): int;
    public function validateQueryPerformance(Builder $query): bool;
    public function suggestIndexes(array $config): array;
}
```

### ReportVisualizationService.php

–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –≥—Ä–∞—Ñ–∏–∫–æ–≤ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ).

```php
namespace App\Services\Report;

class ReportVisualizationService
{
    public function generateChartData(Collection $results, array $chartConfig): array;
    public function getSupportedChartTypes(): array;
    protected function prepareLineChartData(Collection $results, array $config): array;
    protected function prepareBarChartData(Collection $results, array $config): array;
    protected function preparePieChartData(Collection $results, array $config): array;
}
```

---

## üåê API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

### CustomReportController.php

CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è –æ—Ç—á–µ—Ç–æ–≤.

```
GET    /api/v1/admin/custom-reports
       Query params: category, is_shared, is_favorite, page, per_page
       –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: —Å–ø–∏—Å–æ–∫ –æ—Ç—á–µ—Ç–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –æ–±—â–∏—Ö –æ—Ç—á–µ—Ç–æ–≤ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏

POST   /api/v1/admin/custom-reports
       Body: name, description, report_category, data_sources, query_config,
             columns_config, filters_config, aggregations_config, sorting_config,
             visualization_config, is_shared
       –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: —Å–æ–∑–¥–∞–Ω–Ω—ã–π –æ—Ç—á–µ—Ç

GET    /api/v1/admin/custom-reports/{id}
       –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: –¥–µ—Ç–∞–ª–∏ –æ—Ç—á–µ—Ç–∞

PUT    /api/v1/admin/custom-reports/{id}
       Body: —Ç–µ –∂–µ –ø–æ–ª—è —á—Ç–æ –∏ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏
       –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –æ—Ç—á–µ—Ç

DELETE /api/v1/admin/custom-reports/{id}
       Soft delete –æ—Ç—á–µ—Ç–∞

POST   /api/v1/admin/custom-reports/{id}/clone
       Body: name (–Ω–æ–≤–æ–µ –∏–º—è)
       –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –æ—Ç—á–µ—Ç

POST   /api/v1/admin/custom-reports/{id}/favorite
       –î–æ–±–∞–≤–ª–µ–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ –∏–∑ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ

POST   /api/v1/admin/custom-reports/{id}/share
       Body: is_shared (boolean)
       –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–±—â–∏–º –¥–æ—Å—Ç—É–ø–æ–º
```

### CustomReportBuilderController.php

–í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ –º–µ—Ç–æ–¥—ã –¥–ª—è –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞.

```
GET    /api/v1/admin/custom-reports/builder/data-sources
       –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –¥–∞–Ω–Ω—ã—Ö —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏

GET    /api/v1/admin/custom-reports/builder/data-sources/{source}/fields
       –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: –ø–æ–ª—è —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –¥–∞–Ω–Ω—ã—Ö

GET    /api/v1/admin/custom-reports/builder/data-sources/{source}/relations
       –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: –¥–æ—Å—Ç—É–ø–Ω—ã–µ —Å–≤—è–∑–∏ —Å –¥—Ä—É–≥–∏–º–∏ —Ç–∞–±–ª–∏—Ü–∞–º–∏

POST   /api/v1/admin/custom-reports/builder/validate
       Body: –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–∞
       –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏ (–æ—à–∏–±–∫–∏ –∏–ª–∏ —É—Å–ø–µ—Ö)

POST   /api/v1/admin/custom-reports/builder/preview
       Body: –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–∞ + —Ñ–∏–ª—å—Ç—Ä—ã
       –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: –ø–µ—Ä–≤—ã–µ 20 —Å—Ç—Ä–æ–∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –¥–ª—è –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–∞

GET    /api/v1/admin/custom-reports/builder/operators
       –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤ –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–æ–≤

GET    /api/v1/admin/custom-reports/builder/aggregations
       –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∞–≥—Ä–µ–≥–∞—Ç–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
```

### CustomReportExecutionController.php

–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –æ—Ç—á–µ—Ç–æ–≤.

```
POST   /api/v1/admin/custom-reports/{id}/execute
       Body: filters (–ø—Ä–∏–º–µ–Ω—è–µ–º—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º —Ñ–∏–ª—å—Ç—Ä—ã)
       Query params: export (csv|excel|pdf), limit, page
       –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ—Ç—á–µ—Ç–∞ –∏–ª–∏ —Ñ–∞–π–ª —ç–∫—Å–ø–æ—Ä—Ç–∞

GET    /api/v1/admin/custom-reports/{id}/executions
       Query params: page, per_page, status
       –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: –∏—Å—Ç–æ—Ä–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–π –æ—Ç—á–µ—Ç–∞

GET    /api/v1/admin/custom-reports/executions/{executionId}
       –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: –¥–µ—Ç–∞–ª–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

POST   /api/v1/admin/custom-reports/{id}/export
       Body: filters, format (csv|excel|pdf)
       –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: —Ñ–∞–π–ª —ç–∫—Å–ø–æ—Ä—Ç–∞ (StreamedResponse)

DELETE /api/v1/admin/custom-reports/executions/{executionId}
       –£–¥–∞–ª–µ–Ω–∏–µ –∑–∞–ø–∏—Å–∏ –æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ (–æ—á–∏—Å—Ç–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏)
```

### CustomReportScheduleController.php

–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ–º.

```
GET    /api/v1/admin/custom-reports/{id}/schedules
       –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: —Å–ø–∏—Å–æ–∫ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–π –¥–ª—è –æ—Ç—á–µ—Ç–∞

POST   /api/v1/admin/custom-reports/{id}/schedules
       Body: schedule_type, schedule_config, filters_preset,
             recipient_emails, export_format
       –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: —Å–æ–∑–¥–∞–Ω–Ω–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ

GET    /api/v1/admin/custom-reports/{id}/schedules/{scheduleId}
       –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: –¥–µ—Ç–∞–ª–∏ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è

PUT    /api/v1/admin/custom-reports/{id}/schedules/{scheduleId}
       Body: —Ç–µ –∂–µ –ø–æ–ª—è —á—Ç–æ –∏ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏
       –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: –æ–±–Ω–æ–≤–ª–µ–Ω–Ω–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ

DELETE /api/v1/admin/custom-reports/{id}/schedules/{scheduleId}
       –£–¥–∞–ª–µ–Ω–∏–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è

POST   /api/v1/admin/custom-reports/{id}/schedules/{scheduleId}/toggle
       –ê–∫—Ç–∏–≤–∞—Ü–∏—è/–¥–µ–∞–∫—Ç–∏–≤–∞—Ü–∏—è —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è

POST   /api/v1/admin/custom-reports/{id}/schedules/{scheduleId}/run-now
       –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è
```

---

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ó–∞—â–∏—Ç–∞ –æ—Ç SQL-–∏–Ω—ä–µ–∫—Ü–∏–π

1. **Whitelist –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –¥–∞–Ω–Ω—ã—Ö** - —Ç–æ–ª—å–∫–æ —Ç–∞–±–ª–∏—Ü—ã –∏–∑ config
2. **Whitelist –ø–æ–ª–µ–π** - —Ç–æ–ª—å–∫–æ –ø–æ–ª—è, –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
3. **Whitelist –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤** - —Ç–æ–ª—å–∫–æ —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã —Ñ–∏–ª—å—Ç—Ä–æ–≤
4. **–ü–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã** - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Query Builder Eloquent
5. **–í–∞–ª–∏–¥–∞—Ü–∏—è —Å–≤—è–∑–µ–π** - —Ç–æ–ª—å–∫–æ —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ JOIN'—ã

### –ö–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞

1. **Middleware** - –ø—Ä–æ–≤–µ—Ä–∫–∞ `module.access:advanced-reports`
2. **Permission** - –ø—Ä–æ–≤–µ—Ä–∫–∞ `advanced_reports.custom_reports`
3. **–ò–∑–æ–ª—è—Ü–∏—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ `organization_id`
4. **–ü—Ä–∞–≤–∞ –Ω–∞ –æ—Ç—á–µ—Ç** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ –æ—Ç—á–µ—Ç—ã (–∫—Ä–æ–º–µ shared)

### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

1. **–õ–∏–º–∏—Ç JOIN'–æ–≤** - –º–∞–∫—Å–∏–º—É–º 7 —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü
2. **–õ–∏–º–∏—Ç —Å—Ç—Ä–æ–∫** - –º–∞–∫—Å–∏–º—É–º 10,000 —Å—Ç—Ä–æ–∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
3. **–¢–∞–π–º–∞—É—Ç** - –º–∞–∫—Å–∏–º—É–º 30 —Å–µ–∫—É–Ω–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
4. **Throttling** - –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –æ—Ç—á–µ—Ç–æ–≤ (rate limiting)
5. **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ** - –±–æ–ª—å—à–∏–µ –æ—Ç—á–µ—Ç—ã —á–µ—Ä–µ–∑ –æ—á–µ—Ä–µ–¥–∏ (Jobs)

### –í–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

```php
// –ü—Ä–∏–º–µ—Ä –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –≤ CustomReportBuilderService
public function validateReportConfig(array $config): array
{
    $errors = [];

    if (!isset($config['data_sources']['primary'])) {
        $errors[] = 'Primary data source is required';
    }

    $primarySource = $config['data_sources']['primary'] ?? null;
    if ($primarySource && !$this->registry->validateDataSource($primarySource)) {
        $errors[] = "Invalid data source: {$primarySource}";
    }

    if (isset($config['data_sources']['joins'])) {
        if (count($config['data_sources']['joins']) > config('custom-reports.limits.max_joins')) {
            $errors[] = 'Too many joins';
        }
    }

    return $errors;
}
```

---

## üìã Console Commands

### ExecuteScheduledReportsCommand.php

–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –æ—Ç—á–µ—Ç–æ–≤ –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é (–∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∏–∑ CRON).

```php
php artisan custom-reports:execute-scheduled
```

```php
namespace App\Console\Commands;

use App\Services\Report\CustomReportSchedulerService;
use Illuminate\Console\Command;

class ExecuteScheduledReportsCommand extends Command
{
    protected $signature = 'custom-reports:execute-scheduled';
    protected $description = 'Execute scheduled custom reports';

    public function __construct(
        protected CustomReportSchedulerService $schedulerService
    ) {
        parent::__construct();
    }

    public function handle(): int
    {
        $this->info('Executing scheduled reports...');
        
        $this->schedulerService->executeScheduledReports();
        
        $this->info('Done!');
        return Command::SUCCESS;
    }
}
```

–î–æ–±–∞–≤–∏—Ç—å –≤ `app/Console/Kernel.php`:

```php
protected function schedule(Schedule $schedule)
{
    $schedule->command('custom-reports:execute-scheduled')
        ->everyFiveMinutes()
        ->withoutOverlapping();
}
```

### CleanupOldReportExecutionsCommand.php

–û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –∑–∞–ø–∏—Å–µ–π –æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –æ—Ç—á–µ—Ç–æ–≤.

```php
php artisan custom-reports:cleanup-executions --days=30
```

---

## üìä –ü—Ä–∏–º–µ—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π –æ—Ç—á–µ—Ç–æ–≤

### –ü—Ä–∏–º–µ—Ä 1: –§–∏–Ω–∞–Ω—Å–æ–≤—ã–π –æ—Ç—á–µ—Ç –ø–æ –ø—Ä–æ–µ–∫—Ç–∞–º

```json
{
  "name": "–§–∏–Ω–∞–Ω—Å–æ–≤—ã–π –æ—Ç—á–µ—Ç –ø–æ –ø—Ä–æ–µ–∫—Ç–∞–º",
  "description": "–°—É–º–º—ã –ø–æ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞–º –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–º —Ä–∞–±–æ—Ç–∞–º –ø–æ –ø—Ä–æ–µ–∫—Ç–∞–º",
  "report_category": "finances",
  "data_sources": {
    "primary": "projects",
    "joins": [
      {
        "table": "contracts",
        "type": "left",
        "on": ["projects.id", "contracts.project_id"]
      },
      {
        "table": "completed_works",
        "type": "left",
        "on": ["projects.id", "completed_works.project_id"]
      }
    ]
  },
  "columns_config": [
    {
      "field": "projects.name",
      "label": "–ü—Ä–æ–µ–∫—Ç",
      "order": 1,
      "format": "text"
    },
    {
      "field": "projects.budget_amount",
      "label": "–ë—é–¥–∂–µ—Ç",
      "order": 2,
      "format": "currency"
    },
    {
      "field": "contracts.total_amount",
      "label": "–°—É–º–º–∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤",
      "order": 3,
      "format": "currency",
      "aggregation": "sum"
    },
    {
      "field": "completed_works.total_cost",
      "label": "–°—Ç–æ–∏–º–æ—Å—Ç—å —Ä–∞–±–æ—Ç",
      "order": 4,
      "format": "currency",
      "aggregation": "sum"
    }
  ],
  "filters_config": [
    {
      "field": "projects.status",
      "label": "–°—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞",
      "type": "select",
      "options": ["active", "completed"],
      "required": false
    },
    {
      "field": "projects.start_date",
      "label": "–ü–µ—Ä–∏–æ–¥",
      "type": "date_range",
      "required": true
    }
  ],
  "aggregations_config": {
    "group_by": ["projects.id", "projects.name", "projects.budget_amount"],
    "aggregations": [
      {
        "field": "contracts.total_amount",
        "function": "sum",
        "alias": "total_contracts"
      },
      {
        "field": "completed_works.total_cost",
        "function": "sum",
        "alias": "total_works"
      }
    ]
  },
  "sorting_config": [
    {
      "field": "total_contracts",
      "direction": "desc"
    }
  ]
}
```

### –ü—Ä–∏–º–µ—Ä 2: –û—Ç—á–µ—Ç –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤

```json
{
  "name": "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –ø–æ –ø—Ä–æ–µ–∫—Ç–∞–º",
  "description": "–ü—Ä–∏—Ö–æ–¥ –∏ —Ä–∞—Å—Ö–æ–¥ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –ø–æ –ø—Ä–æ–µ–∫—Ç–∞–º",
  "report_category": "materials",
  "data_sources": {
    "primary": "materials",
    "joins": [
      {
        "table": "material_receipts",
        "type": "left",
        "on": ["materials.id", "material_receipts.material_id"]
      },
      {
        "table": "projects",
        "type": "inner",
        "on": ["material_receipts.project_id", "projects.id"]
      }
    ]
  },
  "columns_config": [
    {
      "field": "materials.name",
      "label": "–ú–∞—Ç–µ—Ä–∏–∞–ª",
      "order": 1
    },
    {
      "field": "projects.name",
      "label": "–ü—Ä–æ–µ–∫—Ç",
      "order": 2
    },
    {
      "field": "material_receipts.quantity",
      "label": "–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ",
      "order": 3,
      "aggregation": "sum"
    },
    {
      "field": "material_receipts.total_price",
      "label": "–°—Ç–æ–∏–º–æ—Å—Ç—å",
      "order": 4,
      "format": "currency",
      "aggregation": "sum"
    }
  ],
  "filters_config": [
    {
      "field": "material_receipts.receipt_date",
      "label": "–ü–µ—Ä–∏–æ–¥",
      "type": "date_range",
      "required": true
    },
    {
      "field": "materials.category",
      "label": "–ö–∞—Ç–µ–≥–æ—Ä–∏—è –º–∞—Ç–µ—Ä–∏–∞–ª–∞",
      "type": "text",
      "required": false
    }
  ],
  "aggregations_config": {
    "group_by": ["materials.id", "materials.name", "projects.id", "projects.name"],
    "aggregations": [
      {
        "field": "material_receipts.quantity",
        "function": "sum",
        "alias": "total_quantity"
      },
      {
        "field": "material_receipts.total_price",
        "function": "sum",
        "alias": "total_cost"
      }
    ]
  }
}
```

### –ü—Ä–∏–º–µ—Ä 3: –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø—Ä–æ—Ä–∞–±–æ–≤

```json
{
  "name": "–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø—Ä–æ—Ä–∞–±–æ–≤",
  "description": "–†–∞–±–æ—á–µ–µ –≤—Ä–µ–º—è –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ —Ä–∞–±–æ—Ç—ã –ø–æ –ø—Ä–æ—Ä–∞–±–∞–º",
  "report_category": "staff",
  "data_sources": {
    "primary": "users",
    "joins": [
      {
        "table": "time_entries",
        "type": "left",
        "on": ["users.id", "time_entries.user_id"]
      },
      {
        "table": "completed_works",
        "type": "left",
        "on": ["users.id", "completed_works.user_id"]
      }
    ]
  },
  "query_config": {
    "where": [
      {
        "field": "users.role",
        "operator": "=",
        "value": "foreman"
      }
    ]
  },
  "columns_config": [
    {
      "field": "users.name",
      "label": "–ü—Ä–æ—Ä–∞–±",
      "order": 1
    },
    {
      "field": "time_entries.hours",
      "label": "–û—Ç—Ä–∞–±–æ—Ç–∞–Ω–æ —á–∞—Å–æ–≤",
      "order": 2,
      "aggregation": "sum"
    },
    {
      "field": "completed_works.id",
      "label": "–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–∞–±–æ—Ç",
      "order": 3,
      "aggregation": "count"
    },
    {
      "field": "completed_works.total_cost",
      "label": "–°—Ç–æ–∏–º–æ—Å—Ç—å —Ä–∞–±–æ—Ç",
      "order": 4,
      "format": "currency",
      "aggregation": "sum"
    }
  ],
  "filters_config": [
    {
      "field": "time_entries.date",
      "label": "–ü–µ—Ä–∏–æ–¥",
      "type": "date_range",
      "required": true
    }
  ],
  "aggregations_config": {
    "group_by": ["users.id", "users.name"],
    "aggregations": [
      {
        "field": "time_entries.hours",
        "function": "sum",
        "alias": "total_hours"
      },
      {
        "field": "completed_works.id",
        "function": "count",
        "alias": "works_count"
      },
      {
        "field": "completed_works.total_cost",
        "function": "sum",
        "alias": "total_revenue"
      }
    ]
  },
  "sorting_config": [
    {
      "field": "total_revenue",
      "direction": "desc"
    }
  ]
}
```

---

## üöÄ –≠—Ç–∞–ø—ã —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ (Roadmap)

### MVP (–§–∞–∑–∞ 1) - 3-4 –Ω–µ–¥–µ–ª–∏

**–¶–µ–ª—å:** –ë–∞–∑–æ–≤—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞ —Å –æ–¥–Ω–∏–º –∏—Å—Ç–æ—á–Ω–∏–∫–æ–º –¥–∞–Ω–Ω—ã—Ö.

1. **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö** (3 –¥–Ω—è)
   - –ú–∏–≥—Ä–∞—Ü–∏–∏: custom_reports, custom_report_executions
   - –ú–æ–¥–µ–ª–∏ Eloquent
   - Seeders –¥–ª—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö

2. **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –¥–∞–Ω–Ω—ã—Ö** (2 –¥–Ω—è)
   - config/custom-reports.php
   - ReportDataSourceRegistry
   - –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ 5-7 –æ—Å–Ω–æ–≤–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤

3. **–ë–∞–∑–æ–≤—ã–µ —Å–µ—Ä–≤–∏—Å—ã** (5 –¥–Ω–µ–π)
   - CustomReportBuilderService (–≤–∞–ª–∏–¥–∞—Ü–∏—è, –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤)
   - ReportQueryBuilder (–ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –ø—Ä–æ—Å—Ç—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –±–µ–∑ JOIN)
   - ReportFilterBuilder (–±–∞–∑–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã: =, >, <, like, in)

4. **API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã - CRUD** (4 –¥–Ω—è)
   - CustomReportController (create, read, update, delete, list)
   - CustomReportBuilderController (data-sources, fields, validate, preview)
   - Request –∫–ª–∞—Å—Å—ã –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏

5. **–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –æ—Ç—á–µ—Ç–æ–≤** (3 –¥–Ω—è)
   - CustomReportExecutionService
   - CustomReportExecutionController (execute, export)
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ —ç–∫—Å–ø–æ—Ä—Ç–µ—Ä–∞–º–∏ (CSV, Excel)

6. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ MVP** (2 –¥–Ω—è)
   - Unit —Ç–µ—Å—Ç—ã –¥–ª—è —Å–µ—Ä–≤–∏—Å–æ–≤
   - API —Ç–µ—Å—Ç—ã –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤

### –§–∞–∑–∞ 2 - 2-3 –Ω–µ–¥–µ–ª–∏

**–¶–µ–ª—å:** JOIN'—ã, –∞–≥—Ä–µ–≥–∞—Ü–∏–∏, —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ.

7. **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ JOIN'–æ–≤** (4 –¥–Ω—è)
   - –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ ReportQueryBuilder
   - –í–∞–ª–∏–¥–∞—Ü–∏—è —Å–≤—è–∑–µ–π –º–µ–∂–¥—É —Ç–∞–±–ª–∏—Ü–∞–º–∏
   - –¢–µ—Å—Ç—ã

8. **–ê–≥—Ä–µ–≥–∞—Ü–∏–∏ –∏ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏** (3 –¥–Ω—è)
   - ReportAggregationBuilder
   - GROUP BY, HAVING
   - SUM, AVG, COUNT, MIN, MAX

9. **–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ** (5 –¥–Ω–µ–π)
   - –ú–∏–≥—Ä–∞—Ü–∏—è: custom_report_schedules
   - CustomReportSchedulerService
   - CustomReportScheduleController
   - ExecuteScheduledReportsCommand
   - Email —Ä–∞—Å—Å—ã–ª–∫–∞ –æ—Ç—á–µ—Ç–æ–≤

10. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏** (2 –¥–Ω—è)
    - ReportQueryOptimizer
    - –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö
    - –ò–Ω–¥–µ–∫—Å—ã –ë–î

### –§–∞–∑–∞ 3 - 2-3 –Ω–µ–¥–µ–ª–∏

**–¶–µ–ª—å:** –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è, –≤—ã—á–∏—Å–ª—è–µ–º—ã–µ –ø–æ–ª—è, —à–∞–±–ª–æ–Ω—ã.

11. **–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, 4 –¥–Ω—è)
    - ReportVisualizationService
    - –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –≥—Ä–∞—Ñ–∏–∫–æ–≤
    - API –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è chart data

12. **–í—ã—á–∏—Å–ª—è–µ–º—ã–µ –ø–æ–ª—è** (3 –¥–Ω—è)
    - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ñ–æ—Ä–º—É–ª –≤ columns_config
    - –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º—É–ª

13. **–®–∞–±–ª–æ–Ω—ã –æ—Ç—á–µ—Ç–æ–≤** (3 –¥–Ω—è)
    - –ü—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —à–∞–±–ª–æ–Ω—ã
    - –ò–º–ø–æ—Ä—Ç/—ç–∫—Å–ø–æ—Ä—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π
    - –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç—á–µ—Ç–æ–≤

14. **–í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, 3 –¥–Ω—è)
    - –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
    - –û—Ç–∫–∞—Ç –∫ –ø—Ä–µ–¥—ã–¥—É—â–∏–º –≤–µ—Ä—Å–∏—è–º

### –§–∞–∑–∞ 4 - 2 –Ω–µ–¥–µ–ª–∏

**–¶–µ–ª—å:** –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏, collaboration, –¥–æ—Ä–∞–±–æ—Ç–∫–∏.

15. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏** (4 –¥–Ω—è)
    - –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ Telegram
    - Webhook –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö —Å–∏—Å—Ç–µ–º
    - API –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –æ—Ç—á–µ—Ç–∞

16. **Collaborative features** (3 –¥–∏—è)
    - –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ –æ—Ç—á–µ—Ç–∞–º
    - –¢–µ–≥–∏, —Ä–µ–π—Ç–∏–Ω–≥–∏
    - –ò–∑–±—Ä–∞–Ω–Ω–æ–µ

17. **UI –ø–æ–¥—Å–∫–∞–∑–∫–∏ –¥–ª—è API** (2 –¥–Ω—è)
    - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API (OpenAPI/Swagger)
    - –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤

18. **–§–∏–Ω–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** (2 –¥–Ω—è)
    - Integration —Ç–µ—Å—Ç—ã
    - –ù–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
    - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–≥–æ–≤

---

## üìù –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

- Laravel 10+
- PHP 8.1+
- MySQL 8.0+ / PostgreSQL 14+
- Redis (–¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –æ—á–µ—Ä–µ–¥–µ–π)
- Laravel Queue (–¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –æ—Ç—á–µ—Ç–æ–≤)

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- –ü—Ä–æ—Å—Ç–æ–π –æ—Ç—á–µ—Ç (–±–µ–∑ JOIN): < 1 —Å–µ–∫
- –°–ª–æ–∂–Ω—ã–π –æ—Ç—á–µ—Ç (—Å JOIN –∏ –∞–≥—Ä–µ–≥–∞—Ü–∏—è–º–∏): < 5 —Å–µ–∫
- –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –ø–æ—Ä–æ–≥: 30 —Å–µ–∫ (—Ç–∞–π–º–∞—É—Ç)
- –ö—ç—à –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö: TTL 1 —á–∞—Å
- –ö—ç—à —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ): TTL 5 –º–∏–Ω—É—Ç

### –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å

- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –¥–æ 50 –∫–∞—Å—Ç–æ–º–Ω—ã—Ö –æ—Ç—á–µ—Ç–æ–≤ –Ω–∞ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—é
- –î–æ 10 –∞–∫—Ç–∏–≤–Ω—ã—Ö —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–π –Ω–∞ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—é
- –î–æ 1000 –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–π –æ—Ç—á–µ—Ç–∞ –≤ –∏—Å—Ç–æ—Ä–∏–∏ (–∞–≤—Ç–æ–æ—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö)

---

## üîç –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –º–µ—Ç—Ä–∏–∫–∏

### –ë–∏–∑–Ω–µ—Å-–º–µ—Ç—Ä–∏–∫–∏

- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –æ—Ç—á–µ—Ç–æ–≤
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–π –æ—Ç—á–µ—Ç–æ–≤ (total, –ø–æ –ø–µ—Ä–∏–æ–¥–∞–º)
- –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö
- –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –æ—Ç—á–µ—Ç–æ–≤
- –°—Ä–µ–¥–Ω—è—è —á–∞—Å—Ç–æ—Ç–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –æ—Ç—á–µ—Ç–∞
- –ü—Ä–æ—Ü–µ–Ω—Ç –æ—Ç—á–µ—Ç–æ–≤ —Å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ–º
- –ü—Ä–æ—Ü–µ–Ω—Ç shared –æ—Ç—á–µ—Ç–æ–≤

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –º–µ—Ç—Ä–∏–∫–∏

- –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –æ—Ç—á–µ—Ç–∞
- P50, P95, P99 –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ failed –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–π
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–π —Ç–∞–π–º–∞—É—Ç–∞
- –†–∞–∑–º–µ—Ä —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ (—Å—Ç—Ä–æ–∫, —Ä–∞–∑–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö)

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

```php
// –ü—Ä–∏–º–µ—Ä –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –≤ CustomReportExecutionService
$this->logging->business('custom_report.executed', [
    'report_id' => $report->id,
    'report_name' => $report->name,
    'organization_id' => $report->organization_id,
    'user_id' => $userId,
    'execution_time_ms' => $executionTime,
    'result_rows_count' => $rowsCount,
    'export_format' => $exportFormat,
]);

// –ü—Ä–∏ –æ—à–∏–±–∫–∞—Ö
$this->logging->technical('custom_report.execution.failed', [
    'report_id' => $report->id,
    'error' => $exception->getMessage(),
    'execution_time_ms' => $executionTime,
], 'error');
```

---

## ‚ö†Ô∏è –†–∏—Å–∫–∏ –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ä–∏—Å–∫–∏

1. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–ª–æ–∂–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤**
   - *–ú–∏—Ç–∏–≥–∞—Ü–∏—è:* –ª–∏–º–∏—Ç—ã –Ω–∞ JOIN'—ã, —Ç–∞–π–º–∞—É—Ç—ã, –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ

2. **SQL-–∏–Ω—ä–µ–∫—Ü–∏–∏**
   - *–ú–∏—Ç–∏–≥–∞—Ü–∏—è:* —Å—Ç—Ä–æ–≥–∏–π whitelist, Query Builder, –≤–∞–ª–∏–¥–∞—Ü–∏—è

3. **–ü–µ—Ä–µ—É—Å–ª–æ–∂–Ω–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞**
   - *–ú–∏—Ç–∏–≥–∞—Ü–∏—è:* –ø–æ—à–∞–≥–æ–≤—ã–π –ø—Ä–æ—Ü–µ—Å—Å, —à–∞–±–ª–æ–Ω—ã, —Ö–æ—Ä–æ—à–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

4. **–ù–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ –ë–î**
   - *–ú–∏—Ç–∏–≥–∞—Ü–∏—è:* –∏–Ω–¥–µ–∫—Å—ã, –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ, rate limiting

### –ë–∏–∑–Ω–µ—Å-—Ä–∏—Å–∫–∏

1. **–ù–∏–∑–∫–æ–µ adoption rate** (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–µ –±—É–¥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å)
   - *–ú–∏—Ç–∏–≥–∞—Ü–∏—è:* —à–∞–±–ª–æ–Ω—ã –æ—Ç—á–µ—Ç–æ–≤, –æ–±—É—á–∞—é—â–∏–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã

2. **–í—ã—Å–æ–∫–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫–∏**
   - *–ú–∏—Ç–∏–≥–∞—Ü–∏—è:* —Ö–æ—Ä–æ—à–µ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ, –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥, –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã

### Frontend (–æ–±—â–µ–µ –æ–ø–∏—Å–∞–Ω–∏–µ)

–ü–æ—Å–∫–æ–ª—å–∫—É —É –≤–∞—Å —Ç–æ–ª—å–∫–æ API, —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –±—É–¥–µ—Ç —Ä–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞. –ò–º –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è:

1. **–ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä (–≤–∏–∑–∞—Ä–¥ –∏–∑ 5-7 —à–∞–≥–æ–≤)**
   - –í—ã–±–æ—Ä –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –¥–∞–Ω–Ω—ã—Ö (drag & drop –∏–ª–∏ –≤—ã–±–æ—Ä –∏–∑ —Å–ø–∏—Å–∫–∞)
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ JOIN'–æ–≤ (–≤–∏–∑—É–∞–ª—å–Ω–∞—è —Å—Ö–µ–º–∞ —Å–≤—è–∑–µ–π)
   - –í—ã–±–æ—Ä –∫–æ–ª–æ–Ω–æ–∫ (drag & drop, –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ)
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ñ–∏–ª—å—Ç—Ä–æ–≤ (–∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–ª—è)
   - –ê–≥—Ä–µ–≥–∞—Ü–∏–∏ (–≤—ã–±–æ—Ä —Ñ—É–Ω–∫—Ü–∏–π)
   - –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –∏ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è
   - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –æ—Ç—á–µ—Ç–∞

2. **–°—Ç—Ä–∞–Ω–∏—Ü–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –æ—Ç—á–µ—Ç–∞**
   - –§–æ—Ä–º–∞ —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - –¢–∞–±–ª–∏—Ü–∞ —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ (—Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π)
   - –ö–Ω–æ–ø–∫–∏ —ç–∫—Å–ø–æ—Ä—Ç–∞
   - –ì—Ä–∞—Ñ–∏–∫–∏ (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã)

3. **–°–ø–∏—Å–æ–∫ –æ—Ç—á–µ—Ç–æ–≤**
   - –¢–∞–±–ª–∏—Ü–∞ —Å –æ—Ç—á–µ—Ç–∞–º–∏ (—Ñ–∏–ª—å—Ç—Ä—ã, —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞)
   - –ö–Ω–æ–ø–∫–∏: –≤—ã–ø–æ–ª–Ω–∏—Ç—å, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å, –∫–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å, —É–¥–∞–ª–∏—Ç—å
   - –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä: shared, favorite, scheduled

4. **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ–º**
   - –§–æ—Ä–º–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è
   - –°–ø–∏—Å–æ–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–π
   - –ò—Å—Ç–æ—Ä–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–π

### –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è API

–°–º. –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é OpenAPI/Swagger (–±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω–∞ –æ—Ç–¥–µ–ª—å–Ω–æ).

### –°—Å—ã–ª–∫–∏ –Ω–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

- `app/Services/Export/CsvExporterService.php` - —ç–∫—Å–ø–æ—Ä—Ç CSV
- `app/Services/Export/ExcelExporterService.php` - —ç–∫—Å–ø–æ—Ä—Ç Excel
- `app/Models/ReportTemplate.php` - —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —à–∞–±–ª–æ–Ω—ã
- `app/Models/ReportFile.php` - —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –æ—Ç—á–µ—Ç–æ–≤
- `app/Services/Logging/LoggingService.php` - –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

---

## ‚úÖ –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫ (Checklist)

### –ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- [ ] –°–æ–≥–ª–∞—Å–æ–≤–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ë–î
- [ ] –°–æ–≥–ª–∞—Å–æ–≤–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –¥–∞–Ω–Ω—ã—Ö
- [ ] –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ (MVP vs Nice-to-have)
- [ ] –°–æ–∑–¥–∞—Ç—å —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞—á–∏ –≤ —Ç—Ä–µ–∫–µ—Ä–µ

### MVP
- [ ] –ú–∏–≥—Ä–∞—Ü–∏–∏ –∏ –º–æ–¥–µ–ª–∏
- [ ] –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –¥–∞–Ω–Ω—ã—Ö
- [ ] ReportDataSourceRegistry
- [ ] CustomReportBuilderService (–±–∞–∑–æ–≤—ã–π)
- [ ] ReportQueryBuilder (–±–µ–∑ JOIN)
- [ ] ReportFilterBuilder (–±–∞–∑–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã)
- [ ] CustomReportController (CRUD)
- [ ] CustomReportBuilderController (metadata)
- [ ] CustomReportExecutionService
- [ ] CustomReportExecutionController
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —ç–∫—Å–ø–æ—Ä—Ç–µ—Ä–∞–º–∏
- [ ] Unit –∏ API —Ç–µ—Å—Ç—ã

### –§–∞–∑–∞ 2
- [ ] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ JOIN'–æ–≤
- [ ] ReportAggregationBuilder
- [ ] CustomReportSchedulerService
- [ ] CustomReportScheduleController
- [ ] ExecuteScheduledReportsCommand
- [ ] Email —Ä–∞—Å—Å—ã–ª–∫–∞
- [ ] ReportQueryOptimizer
- [ ] –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ

### –§–∞–∑–∞ 3
- [ ] ReportVisualizationService
- [ ] –í—ã—á–∏—Å–ª—è–µ–º—ã–µ –ø–æ–ª—è
- [ ] –®–∞–±–ª–æ–Ω—ã –æ—Ç—á–µ—Ç–æ–≤
- [ ] –ò–º–ø–æ—Ä—Ç/—ç–∫—Å–ø–æ—Ä—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π
- [ ] –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ

### –§–∞–∑–∞ 4
- [ ] Telegram –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- [ ] Webhook API
- [ ] –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∏ —Ç–µ–≥–∏
- [ ] OpenAPI –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- [ ] –§–∏–Ω–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

---

## üéØ –ò—Ç–æ–≥–æ

–ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –æ—Ç—á–µ—Ç–æ–≤ - —Å–ª–æ–∂–Ω–∞—è, –Ω–æ –æ—á–µ–Ω—å —Ü–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –¥–ª—è –º–æ–¥—É–ª—è –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã—Ö –æ—Ç—á–µ—Ç–æ–≤. –ö–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã:

1. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –ø—Ä–µ–≤—ã—à–µ –≤—Å–µ–≥–æ** - —Å—Ç—Ä–æ–≥–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è, whitelist, –∏–∑–æ–ª—è—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
2. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤–∞–∂–Ω–∞** - –ª–∏–º–∏—Ç—ã, —Ç–∞–π–º–∞—É—Ç—ã, –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è, –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
3. **–ü–æ—ç—Ç–∞–ø–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞** - –Ω–∞—á–∞—Ç—å —Å MVP, –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏
4. **–•–æ—Ä–æ—à–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** - –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥-–∫–æ–º–∞–Ω–¥—ã –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
5. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** - –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

**–û—Ü–µ–Ω–∫–∞ –≤—Ä–µ–º–µ–Ω–∏:** 10-14 –Ω–µ–¥–µ–ª—å (2.5-3.5 –º–µ—Å—è—Ü–∞) –ø–æ–ª–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏.

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ù–∞—á–∞—Ç—å —Å MVP (1 –∏—Å—Ç–æ—á–Ω–∏–∫, –±–∞–∑–æ–≤—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã, —ç–∫—Å–ø–æ—Ä—Ç), –ø–æ–ª—É—á–∏—Ç—å –æ–±—Ä–∞—Ç–Ω—É—é —Å–≤—è–∑—å –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –∑–∞—Ç–µ–º —Ä–∞—Å—à–∏—Ä—è—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å.

